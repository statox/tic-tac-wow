import{_ as F}from"./preload-helper-41c905a7.js";import{S as I,i as O,s as W,k as b,l as N,m as V,h as g,n as p,b as j,W as q,B as _,X as x,o as z}from"./index-0ce3b86f.js";const A=[448,56,7,292,146,73,273,84],te=[{p:16,o:40},{p:16,o:130},{p:16,o:257},{p:16,o:68}],re=[{p:1,o:6},{p:1,o:72},{p:1,o:272}],ne=[{p:2,o:5},{p:2,o:144}],G=(e,t)=>(e&t)===t;var u=(e=>(e[e.player=1]="player",e[e.computer=2]="computer",e))(u||{});function w(e){let t=e,r=0;for(;t;)r+=t&1,t>>=1;return r}function oe(e,t){return m(e,t)}function m(e,t){return!(e&1<<t)}function S(e,t){return e+2**t}const f=e=>{for(const t of A)if(G(e,t))return!0;return!1},H={1:u.computer,2:u.player},M=e=>H[e];function se(){return{player:0,computer:0,toString:function(){return`player ${this.player.toString(2).padStart(9,"0")} computer ${this.computer.toString(2).padStart(9,"0")}`}}}function ie(e,t){return t===u.player?e.player:e.computer}function ce(e,t){return t===u.player?e.computer:e.player}function T(e,t){if(!t&&!k(e))return"invalid_board";const r=f(e.player),n=f(e.computer);return r&&n?"draw":r?"player_win":n?"computer_win":P(e)?"not_over":"over"}function X(e,t,r){if(!L(e,r))throw new Error(`Impossible move. player: ${e==null?void 0:e.player}, computer: ${e==null?void 0:e.computer}, index ${r} `);t===u.player?e.player=S(e.player,r):e.computer=S(e.computer,r)}function k(e){if(e.player&e.computer)return!1;const t=w(e.player),r=w(e.computer);return!(Math.abs(t-r)>1)}function L(e,t){return m(e.player,t)&&m(e.computer,t)}function P(e){return(e.player|e.computer)!==511}function B(e){let t=e.player|e.computer;if(t===0)return[0,1,2,3,4,5,6,7,8];if(t===511)return[];const r=[];let n=0;for(;n<9;)t&1||r.push(n),n++,t>>=1;return r}function R(e,t){return B(e).map(n=>{const o={...e};return X(o,t,n),{move:n,board:o}})}function ae(e,t){if(B(e).length===0)throw new Error("No available moves");const o=y({board:e,player:t,depth:1,moves:[]});return{score:o.score,reason:o.reason,move:o.moves[0]}}function J(e){return e==="player_win"?{score:0,reason:e}:e==="draw"?{score:1,reason:e}:e==="over"?{score:2,reason:e}:e==="not_over"?{score:3,reason:e}:e==="computer_win"?{score:4,reason:e}:{score:-1,reason:e}}const K=12;function y(e){const t=T(e.board);if(e.depth===K||t!=="not_over")return{moves:e.moves,...J(t)};const r=R(e.board,e.player);if(e.player===u.player){let o;for(const i of r){const a={board:i.board,player:M(e.player),depth:e.depth+1,moves:[...e.moves,i.move]},l=y(a);(!o||l.score>o.score)&&(o=l)}if(!o)throw new Error("Couldnt get any best child for maximizing player");return o}let n;for(const o of r){const i={board:o.board,player:M(e.player),depth:e.depth+1,moves:[...e.moves,o.move]},a=y(i);(!n||a.score<n.score)&&(n=a)}if(!n)throw new Error("Couldnt get any best child for maximizing player");return n}function ue(e,t){if(!t&&!k(e))return"invalid_board";const r=f(e.computer),n=f(e.player);return r&&n?"draw":r?"player_win":n?"computer_win":P(e)?"not_over":"over"}function Q(e){let t,r,n;return{c(){t=b("div"),this.h()},l(o){t=N(o,"DIV",{style:!0,class:!0}),V(t).forEach(g),this.h()},h(){p(t,"style",e[0]),p(t,"class","m-0")},m(o,i){j(o,t,i),r||(n=q(e[1].call(null,t)),r=!0)},p(o,[i]){i&1&&p(t,"style",o[0])},i:_,o:_,d(o){o&&g(t),r=!1,n()}}}function U(e,t){return t.forEach(([r,n])=>e[r]=n),e}function Y(e,t,r){let{target:n=void 0}=t,{sketch:o=void 0}=t,{parentDivStyle:i="display: block;"}=t,{debug:a=!1}=t,l;const h=x(),v={ref(){h("ref",n)},instance(){h("instance",l)}};function C(s){return r(2,n=s),{destroy(){r(2,n=void 0)}}}return z(async()=>{const s=await F(()=>import("./p5.min-7dea8225.js").then(c=>c.p),[],import.meta.url),{default:E}=s,d=Object.entries(s).filter(([c,D])=>D instanceof Function&&c[0]!=="_"&&c!=="default");a&&console.log("available p5 native classes",d),l=new E(c=>(c=U(c,d),a&&console.log("p5 instance",c),window._p5Instance=c,o(c)),n),v.ref(),v.instance()}),e.$$set=s=>{"target"in s&&r(2,n=s.target),"sketch"in s&&r(3,o=s.sketch),"parentDivStyle"in s&&r(0,i=s.parentDivStyle),"debug"in s&&r(4,a=s.debug)},[i,C,n,o,a]}class le extends I{constructor(t){super(),O(this,t,Y,Q,W,{target:2,sketch:3,parentDivStyle:0,debug:4})}}export{le as P,ae as a,se as b,u as c,B as d,T as e,R as f,ue as g,M as h,ie as i,f as j,ce as k,te as l,G as m,re as n,ne as o,S as p,X as q,oe as r,m as s};
