import{s as I,p as wt,d as Je,e as De,f as Et,c as R,h as rt,i as pe,j as St,k as ve,l as Mt,m as Ee,n as Nt,o as Ct,q as Oe,b as At,g as gt,a as It,r as st,P as Bt}from"./P5-522f2e95.js";import{S as Le,i as Xe,s as Re,k as _,q as k,a as C,l as p,m as v,r as g,h as f,c as A,b as O,D as s,B as me,n as ne,u as V,g as je,t as j,d as Ke,f as q,I as Ht,w as We,x as Fe,y as Ge,z as Ve,e as lt,J as Tt,K as $t}from"./index-0ce3b86f.js";function at(t){const{x:e,y:n}=t;if(e<0||e>2||n<0||n>2)throw new Error(`Invalid coords (${e},${n})`);return 8-(3*n+e)}function it(t){if(t<0||t>8)throw new Error("Invalid index ${i}");return{x:2-t%3,y:2-Math.floor(t/3)}}const Dt=[2,5,8,1,4,7,0,3,6];function ct(t){let e=0;return Dt.forEach((n,o)=>{I(t,o)||(e=wt(e,n))}),e}function Ye(t,e){if(e<0)throw new Error("Cant rotate a negative amount of times");if(e===0)return{...t};e=e%4;const n={...t};for(let o=0;o<e;o++)n.player=ct(n.player),n.computer=ct(n.computer);return n}function Ot(t,e){if(Je(t).length===0)throw new Error("No available moves");const r=Ze({board:t,player:e,depth:1,moves:[]});return{score:r.score,reason:r.reason,move:r.moves[0]}}function Wt(t){return t==="player_win"?{score:4,reason:t}:t==="draw"?{score:3,reason:t}:t==="over"?{score:2,reason:t}:t==="not_over"?{score:1,reason:t}:t==="computer_win"?{score:0,reason:t}:{score:-1,reason:t}}const Ft=12;function Ze(t){const e=De(t.board);if(t.depth===Ft||e!=="not_over")return{moves:t.moves,...Wt(e)};const n=Et(t.board,t.player);if(t.player===R.player){let r;for(const l of n){const a={board:l.board,player:rt(t.player),depth:t.depth+1,moves:[...t.moves,l.move]},c=Ze(a);(!r||c.score>r.score)&&(r=c)}if(!r)throw new Error("Couldnt get any best child for maximizing player");return r}let o;for(const r of n){const l={board:r.board,player:rt(t.player),depth:t.depth+1,moves:[...t.moves,r.move]},a=Ze(l);(!o||a.score<o.score)&&(o=a)}if(!o)throw new Error("Couldnt get any best child for maximizing player");return o}function _e(t,e){const n=pe(t,e);return St(n)}function et(t){return t===4}function qe(t,e,n){const o=pe(t,e),r=ve(t,e);if(n===4){const l=I(r,5)&&!I(o,3)||!I(o,5)&&I(r,3)?1:0,a=I(r,7)&&!I(o,1)||!I(o,7)&&I(r,1)?1:0,c=I(r,8)&&!I(o,0)||!I(o,8)&&I(r,0)?1:0,i=I(r,6)&&!I(o,2)||!I(o,6)&&I(r,2)?1:0;return l+a+c+i>=2}if(Ue.has(n)){const l={0:0,2:3,6:1,8:2}[n]||0,a=Ye(t,l),c=pe(a,e),i=ve(a,e),d=I(i,2)&&!I(c,1)||!I(c,2)&&I(i,1),b=I(i,6)&&!I(c,3)||!I(c,6)&&I(i,3);return d&&b}if(tt.has(n)){const l={1:0,3:1,5:3,7:2}[n]||0,a=Ye(t,l),c=pe(a,e),i=ve(a,e),d=I(i,2)&&!I(c,0)||!I(c,2)&&I(i,0),b=I(i,7)&&!I(c,4)||!I(c,7)&&I(i,4);return d&&b}return!1}function xe(t,e,n){const o=pe(t,e),l={player:ve(t,e),computer:o};return qe(l,e===R.player?R.computer:R.player,n)}function Se(t,e,n){const o=pe(t,e),r=ve(t,e);if(n===4){for(const{o:l,p:a}of Mt)if(Ee(o,a)&&Ee(r,l))return!0}if(Ue.has(n)){const l={0:0,2:3,6:1,8:2}[n]||0,a=Ye(t,l),c=pe(a,e),i=ve(a,e);for(const{o:d,p:b}of Nt)if(Ee(c,b)&&Ee(i,d))return!0}if(tt.has(n)){const l={1:0,3:1,5:3,7:2}[n]||0,a=Ye(t,l),c=pe(a,e),i=ve(a,e);for(const{o:d,p:b}of Ct)if(Ee(c,b)&&Ee(i,d))return!0}return!1}const Ue=new Set([0,2,6,8]),tt=new Set([1,3,5,7]);function ze(t,e,n){if(!Ue.has(n))return!1;const o=8-n,r=ve(t,e);return!I(r,o)}function ot(t){return Ue.has(t)}function bt(t){return tt.has(t)}function Gt(t,e){const n=Je(t);if(n.length===0)throw new Error("No available moves");let o;for(const r of n){const l={...t};Oe(l,e,r);const a=Vt(l,e,r);a.score>((o==null?void 0:o.score)??-1)&&(o=a)}if(!o)throw new Error("Error in getMoveHardcoded");return o}function Vt(t,e,n){return _e(t,e)?{score:8,reason:"win",move:n}:Se(t,e,n)?{score:7,reason:"block_opponent",move:n}:qe(t,e,n)?{score:6,reason:"create_fork",move:n}:xe(t,e,n)?{score:5,reason:"block_opponent_fork",move:n}:et(n)?{score:4,reason:"take_center",move:n}:ze(t,e,n)?{score:3,reason:"take_opposite_corner",move:n}:ot(n)?{score:2,reason:"take_corner",move:n}:bt(n)?{score:1,reason:"take_edge",move:n}:{score:0,reason:"default_choice",move:n}}function Lt(t,e){const n=Je(t);if(n.length===0)throw new Error("No available moves");let o;for(const r of n){const l={...t};Oe(l,e,r);const a=Xt(l,e,r);a.score>((o==null?void 0:o.score)??-1)&&(o=a)}if(!o)throw new Error("Error in getMoveHardcoded");return o}function Xt(t,e,n){return _e(t,R.player)?{score:8,reason:"win",move:n}:Se(t,e,n)?{score:7,reason:"block_opponent",move:n}:et(n)?{score:4,reason:"take_center",move:n}:ze(t,e,n)?{score:3,reason:"take_opposite_corner",move:n}:ot(n)?{score:2,reason:"take_corner",move:n}:bt(n)?{score:1,reason:"take_edge",move:n}:{score:0,reason:"default_choice",move:n}}function Rt(t){const e=Je(t);if(e.length===0)throw new Error("No available moves");const n=Math.floor(Math.random()*e.length);return{score:0,reason:"random",move:e[n]}}const ft={random:Rt,hardcodedRules:Lt,hardcodedRulesComplete:Gt,minmax:Ot},vo=t=>({type:"tictactoe",board:At(),currentPlayer:t??R.player,state:"not_over",moveHistory:[]});function Pt(t){t.currentPlayer=t.currentPlayer===R.player?R.computer:R.player}const mo=(t,e,n)=>{t.state==="not_over"&&(Oe(t.board,e,n),t.type==="tictactoe"&&(t.state=De(t.board)),t.type==="misere"&&(t.state=gt(t.board)),t.moveHistory.push({board:{...t.board},moveAsIndex:n,player:e,method:"manual"}),Pt(t))},ko=(t,e,n)=>{if(t.state!=="not_over")return;let o;if(t.type==="tictactoe"){const r=ft[n];o=r(t.board,e),Oe(t.board,e,o.move),t.state=De(t.board)}if(t.type==="misere"){let r;n==="random"?r=ft.random:r=It,o=r(t.board,e),Oe(t.board,e,o.move),t.state=gt(t.board)}if(!o)throw new Error("Couldnt get move");t.moveHistory.push({board:{...t.board},moveAsIndex:o.move,player:e,method:n,aiChoice:o}),Pt(t)},Yt="#FF0000",qt="#64ccfc";function ut(t,e,n){var b;const o=t.width/3,r=t.height/3,{height:l,width:a}=t,{drawSelection:c,selection:i,currentPlayer:d}=n||{};t.rectMode(t.CENTER),t.noFill(),t.stroke(255),t.strokeWeight(1),t.line(o,0,o,l),t.line(o*2,0,o*2,l),t.line(0,r,a,r),t.line(0,r*2,a,r*2),t.stroke(155),t.strokeWeight(3),t.rect(t.width/2,t.height/2,t.width,t.height),t.strokeWeight(4);for(let h=0;h<3;h++)for(let S=0;S<3;S++)((b=n==null?void 0:n.highlightCell)==null?void 0:b.x)===S&&(n==null?void 0:n.highlightCell.y)===h&&(t.noStroke(),t.fill(30,250,80,80),t.rect(S*o+o/2,h*r+r/2,o*.95,r*.95),t.noFill()),(!st(e.player,at({x:S,y:h}))||c&&d===R.player&&(i==null?void 0:i.x)===S&&(i==null?void 0:i.y)===h)&&(t.stroke(qt),t.circle(S*o+o/2,h*r+r/2,r/2)),(!st(e.computer,at({x:S,y:h}))||c&&d===R.computer&&(i==null?void 0:i.x)===S&&(i==null?void 0:i.y)===h)&&(t.stroke(Yt),t.line(S*o+o*.3,h*r+r*.3,S*o+o*.7,h*r+r*.7),t.line(S*o+o*.7,h*r+r*.3,S*o+o*.3,h*r+r*.7))}function ht(t){const{mouseX:e,mouseY:n,width:o,height:r}=t,l=Math.floor(t.map(e,0,o,0,3)),a=Math.floor(t.map(n,0,r,0,3));return{x:l,y:a}}function dt(t){let e,n,o,r,l,a=De(t[0])+"",c,i,d,b,h,S,W,T,E,u,M=t[0].player.toString(2).padStart(9,"0")+"",P,D,y,N=t[0].player+"",m,H,F,Y,G,Z=_e(t[0],R.player)?"✅":"❌",he,re,L,se,le,U,de,ke,K,ge,ae=t[0].computer.toString(2).padStart(9,"0")+"",x,ie,ee,ce=t[0].computer+"",te,be,fe,ue,Q,oe=_e(t[0],R.computer)?"✅":"❌",Pe;return{c(){e=_("div"),n=_("span"),o=k("State:"),r=C(),l=_("span"),c=k(a),i=C(),d=_("div"),b=_("span"),h=k("Player 1"),S=_("span"),W=k("Player, O"),T=C(),E=_("span"),u=k("0b"),P=k(M),D=C(),y=_("span"),m=k(N),H=C(),F=_("span"),Y=k("Wins"),G=_("span"),he=k(Z),re=C(),L=_("div"),se=_("span"),le=k("Player 2"),U=_("span"),de=k("Computer, X"),ke=C(),K=_("span"),ge=k("0b"),x=k(ae),ie=C(),ee=_("span"),te=k(ce),be=C(),fe=_("span"),ue=k("Wins"),Q=_("span"),Pe=k(oe),this.h()},l(X){e=p(X,"DIV",{class:!0});var $=v(e);n=p($,"SPAN",{});var B=v(n);o=g(B,"State:"),B.forEach(f),r=A($),l=p($,"SPAN",{});var w=v(l);c=g(w,a),w.forEach(f),i=A($),d=p($,"DIV",{class:!0});var z=v(d);b=p(z,"SPAN",{});var Me=v(b);h=g(Me,"Player 1"),Me.forEach(f),S=p(z,"SPAN",{});var Ne=v(S);W=g(Ne,"Player, O"),Ne.forEach(f),T=A(z),E=p(z,"SPAN",{});var ye=v(E);u=g(ye,"0b"),P=g(ye,M),ye.forEach(f),D=A(z),y=p(z,"SPAN",{});var Ce=v(y);m=g(Ce,N),Ce.forEach(f),H=A(z),F=p(z,"SPAN",{});var Ae=v(F);Y=g(Ae,"Wins"),Ae.forEach(f),G=p(z,"SPAN",{});var Ie=v(G);he=g(Ie,Z),Ie.forEach(f),z.forEach(f),re=A($),L=p($,"DIV",{class:!0});var J=v(L);se=p(J,"SPAN",{});var Be=v(se);le=g(Be,"Player 2"),Be.forEach(f),U=p(J,"SPAN",{});var He=v(U);de=g(He,"Computer, X"),He.forEach(f),ke=A(J),K=p(J,"SPAN",{});var we=v(K);ge=g(we,"0b"),x=g(we,ae),we.forEach(f),ie=A(J),ee=p(J,"SPAN",{});var Te=v(ee);te=g(Te,ce),Te.forEach(f),be=A(J),fe=p(J,"SPAN",{});var $e=v(fe);ue=g($e,"Wins"),$e.forEach(f),Q=p(J,"SPAN",{});var nt=v(Q);Pe=g(nt,oe),nt.forEach(f),J.forEach(f),$.forEach(f),this.h()},h(){ne(d,"class","grid2cols svelte-1lw5ne4"),ne(L,"class","grid2cols svelte-1lw5ne4"),ne(e,"class","grid2cols svelte-1lw5ne4")},m(X,$){O(X,e,$),s(e,n),s(n,o),s(e,r),s(e,l),s(l,c),s(e,i),s(e,d),s(d,b),s(b,h),s(d,S),s(S,W),s(d,T),s(d,E),s(E,u),s(E,P),s(d,D),s(d,y),s(y,m),s(d,H),s(d,F),s(F,Y),s(d,G),s(G,he),s(e,re),s(e,L),s(L,se),s(se,le),s(L,U),s(U,de),s(L,ke),s(L,K),s(K,ge),s(K,x),s(L,ie),s(L,ee),s(ee,te),s(L,be),s(L,fe),s(fe,ue),s(L,Q),s(Q,Pe)},p(X,$){$&1&&a!==(a=De(X[0])+"")&&V(c,a),$&1&&M!==(M=X[0].player.toString(2).padStart(9,"0")+"")&&V(P,M),$&1&&N!==(N=X[0].player+"")&&V(m,N),$&1&&Z!==(Z=_e(X[0],R.player)?"✅":"❌")&&V(he,Z),$&1&&ae!==(ae=X[0].computer.toString(2).padStart(9,"0")+"")&&V(x,ae),$&1&&ce!==(ce=X[0].computer+"")&&V(te,ce),$&1&&oe!==(oe=_e(X[0],R.computer)?"✅":"❌")&&V(Pe,oe)},d(X){X&&f(e)}}}function zt(t){let e,n,o,r,l=t[0]&&dt(t);return{c(){e=_("div"),n=_("h4"),o=k("Board info"),r=C(),l&&l.c()},l(a){e=p(a,"DIV",{});var c=v(e);n=p(c,"H4",{});var i=v(n);o=g(i,"Board info"),i.forEach(f),r=A(c),l&&l.l(c),c.forEach(f)},m(a,c){O(a,e,c),s(e,n),s(n,o),s(e,r),l&&l.m(e,null)},p(a,[c]){a[0]?l?l.p(a,c):(l=dt(a),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:me,o:me,d(a){a&&f(e),l&&l.d()}}}function Jt(t,e,n){let{board:o}=e;return t.$$set=r=>{"board"in r&&n(0,o=r.board)},[o]}class go extends Le{constructor(e){super(),Xe(this,e,Jt,zt,Re,{board:0})}}function jt(t){let e,n,o=JSON.stringify(t[0])+"",r;return{c(){e=_("p"),n=k("Board is undefined "),r=k(o)},l(l){e=p(l,"P",{});var a=v(e);n=g(a,"Board is undefined "),r=g(a,o),a.forEach(f)},m(l,a){O(l,e,a),s(e,n),s(e,r)},p(l,a){a&1&&o!==(o=JSON.stringify(l[0])+"")&&V(r,o)},i:me,o:me,d(l){l&&f(e)}}}function Kt(t){let e,n;return e=new Bt({props:{sketch:t[1]}}),{c(){We(e.$$.fragment)},l(o){Fe(e.$$.fragment,o)},m(o,r){Ge(e,o,r),n=!0},p:me,i(o){n||(q(e.$$.fragment,o),n=!0)},o(o){j(e.$$.fragment,o),n=!1},d(o){Ve(e,o)}}}function Ut(t){let e,n,o,r;const l=[Kt,jt],a=[];function c(i,d){return i[0]?0:1}return n=c(t),o=a[n]=l[n](t),{c(){e=_("div"),o.c()},l(i){e=p(i,"DIV",{});var d=v(e);o.l(d),d.forEach(f)},m(i,d){O(i,e,d),a[n].m(e,null),r=!0},p(i,[d]){let b=n;n=c(i),n===b?a[n].p(i,d):(je(),j(a[b],1,1,()=>{a[b]=null}),Ke(),o=a[n],o?o.p(i,d):(o=a[n]=l[n](i),o.c()),q(o,1),o.m(e,null))},i(i){r||(q(o),r=!0)},o(i){j(o),r=!1},d(i){i&&f(e),a[n].d()}}}function Qt(t,e,n){let{dimensionPx:o}=e,{board:r}=e,{highlightCell:l=void 0}=e,{highlightMouse:a=!1}=e,{noLoop:c=!1}=e,{onClick:i=()=>{}}=e,d;const b=h=>{h.setup=()=>{d=h,h.createCanvas(o.width,o.height)},h.draw=()=>{h.background(0),a?ut(h,r,{highlightCell:ht(h)}):ut(h,r,{highlightCell:l}),c&&h.noLoop()},c||(h.mousePressed=()=>{h.mouseX<0||h.mouseX>h.width||h.mouseY<0||h.mouseY>h.height||i("manual",ht(h))})};return Ht(()=>{d==null||d.remove()}),t.$$set=h=>{"dimensionPx"in h&&n(2,o=h.dimensionPx),"board"in h&&n(0,r=h.board),"highlightCell"in h&&n(3,l=h.highlightCell),"highlightMouse"in h&&n(4,a=h.highlightMouse),"noLoop"in h&&n(5,c=h.noLoop),"onClick"in h&&n(6,i=h.onClick)},[r,b,o,l,a,c,i]}class yt extends Le{constructor(e){super(),Xe(this,e,Qt,Ut,Re,{dimensionPx:2,board:0,highlightCell:3,highlightMouse:4,noLoop:5,onClick:6})}}function Qe(t){const e=t.slice(),n=e[0];return e[1]=n.moveAsIndex,e[2]=n.player,e[3]=n.board,e}function _t(t){let e,n,o,r,l,a,c,i,d,b,h,S=_e(t[3],t[2])?"✅":"❌",W,T,E,u,M,P,D=Se(t[3],t[2],t[1])?"✅":"❌",y,N,m,H,F,Y,G=qe(t[3],t[2],t[1])?"✅":"❌",Z,he,re,L,se,le,U=xe(t[3],t[2],t[1])?"✅":"❌",de,ke,K,ge,ae,x,ie=ze(t[3],t[2],t[1])?"✅":"❌",ee,ce,te,be,fe,ue,Q=Se(t[3],t[2],t[1])?"✅":"❌",oe;function Pe(B,w){return w&1&&(l=null),w&1&&(a=null),l==null&&(l=!!et(B[1])),l?eo:(a==null&&(a=!!ot(B[1])),a?xt:Zt)}let X=Pe(t,-1),$=X(t);return{c(){e=_("div"),n=_("span"),o=k("Position"),r=C(),$.c(),c=C(),i=_("span"),d=k("Player win"),b=C(),h=_("span"),W=k(S),T=C(),E=_("span"),u=k("Move blocks opponent"),M=C(),P=_("span"),y=k(D),N=C(),m=_("span"),H=k("Move creates fork"),F=C(),Y=_("span"),Z=k(G),he=C(),re=_("span"),L=k("Move blocks opponent's fork"),se=C(),le=_("span"),de=k(U),ke=C(),K=_("span"),ge=k("Took opposite corner"),ae=C(),x=_("span"),ee=k(ie),ce=C(),te=_("span"),be=k("Last move blocks opponent"),fe=C(),ue=_("span"),oe=k(Q),this.h()},l(B){e=p(B,"DIV",{class:!0});var w=v(e);n=p(w,"SPAN",{});var z=v(n);o=g(z,"Position"),z.forEach(f),r=A(w),$.l(w),c=A(w),i=p(w,"SPAN",{});var Me=v(i);d=g(Me,"Player win"),Me.forEach(f),b=A(w),h=p(w,"SPAN",{});var Ne=v(h);W=g(Ne,S),Ne.forEach(f),T=A(w),E=p(w,"SPAN",{});var ye=v(E);u=g(ye,"Move blocks opponent"),ye.forEach(f),M=A(w),P=p(w,"SPAN",{});var Ce=v(P);y=g(Ce,D),Ce.forEach(f),N=A(w),m=p(w,"SPAN",{});var Ae=v(m);H=g(Ae,"Move creates fork"),Ae.forEach(f),F=A(w),Y=p(w,"SPAN",{});var Ie=v(Y);Z=g(Ie,G),Ie.forEach(f),he=A(w),re=p(w,"SPAN",{});var J=v(re);L=g(J,"Move blocks opponent's fork"),J.forEach(f),se=A(w),le=p(w,"SPAN",{});var Be=v(le);de=g(Be,U),Be.forEach(f),ke=A(w),K=p(w,"SPAN",{});var He=v(K);ge=g(He,"Took opposite corner"),He.forEach(f),ae=A(w),x=p(w,"SPAN",{});var we=v(x);ee=g(we,ie),we.forEach(f),ce=A(w),te=p(w,"SPAN",{});var Te=v(te);be=g(Te,"Last move blocks opponent"),Te.forEach(f),fe=A(w),ue=p(w,"SPAN",{});var $e=v(ue);oe=g($e,Q),$e.forEach(f),w.forEach(f),this.h()},h(){ne(e,"class","grid2cols svelte-1lw5ne4")},m(B,w){O(B,e,w),s(e,n),s(n,o),s(e,r),$.m(e,null),s(e,c),s(e,i),s(i,d),s(e,b),s(e,h),s(h,W),s(e,T),s(e,E),s(E,u),s(e,M),s(e,P),s(P,y),s(e,N),s(e,m),s(m,H),s(e,F),s(e,Y),s(Y,Z),s(e,he),s(e,re),s(re,L),s(e,se),s(e,le),s(le,de),s(e,ke),s(e,K),s(K,ge),s(e,ae),s(e,x),s(x,ee),s(e,ce),s(e,te),s(te,be),s(e,fe),s(e,ue),s(ue,oe)},p(B,w){X!==(X=Pe(B,w))&&($.d(1),$=X(B),$&&($.c(),$.m(e,c))),w&1&&S!==(S=_e(B[3],B[2])?"✅":"❌")&&V(W,S),w&1&&D!==(D=Se(B[3],B[2],B[1])?"✅":"❌")&&V(y,D),w&1&&G!==(G=qe(B[3],B[2],B[1])?"✅":"❌")&&V(Z,G),w&1&&U!==(U=xe(B[3],B[2],B[1])?"✅":"❌")&&V(de,U),w&1&&ie!==(ie=ze(B[3],B[2],B[1])?"✅":"❌")&&V(ee,ie),w&1&&Q!==(Q=Se(B[3],B[2],B[1])?"✅":"❌")&&V(oe,Q)},d(B){B&&f(e),$.d()}}}function Zt(t){let e,n;return{c(){e=_("span"),n=k("Edge")},l(o){e=p(o,"SPAN",{});var r=v(e);n=g(r,"Edge"),r.forEach(f)},m(o,r){O(o,e,r),s(e,n)},d(o){o&&f(e)}}}function xt(t){let e,n;return{c(){e=_("span"),n=k("Corner")},l(o){e=p(o,"SPAN",{});var r=v(e);n=g(r,"Corner"),r.forEach(f)},m(o,r){O(o,e,r),s(e,n)},d(o){o&&f(e)}}}function eo(t){let e,n;return{c(){e=_("span"),n=k("Center")},l(o){e=p(o,"SPAN",{});var r=v(e);n=g(r,"Center"),r.forEach(f)},m(o,r){O(o,e,r),s(e,n)},d(o){o&&f(e)}}}function to(t){let e,n=t[0]&&_t(Qe(t));return{c(){n&&n.c(),e=lt()},l(o){n&&n.l(o),e=lt()},m(o,r){n&&n.m(o,r),O(o,e,r)},p(o,[r]){o[0]?n?n.p(Qe(o),r):(n=_t(Qe(o)),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:me,o:me,d(o){n&&n.d(o),o&&f(e)}}}function oo(t,e,n){let{historyItem:o}=e;return t.$$set=r=>{"historyItem"in r&&n(0,o=r.historyItem)},[o]}class no extends Le{constructor(e){super(),Xe(this,e,oo,to,Re,{historyItem:0})}}function pt(t,e,n){const o=t.slice();return o[2]=e[n],o}function vt(t){let e,n,o,r,l,a,c,i,d,b,h,S,W,T,E,u=t[0].length===0&&mt(),M=[...t[0]].reverse(),P=[];for(let y=0;y<M.length;y+=1)P[y]=kt(pt(t,M,y));const D=y=>j(P[y],1,1,()=>{P[y]=null});return{c(){e=_("div"),u&&u.c(),n=C(),o=_("h4"),r=k("Move"),l=C(),a=_("h4"),c=k("Selection"),i=C(),d=_("h4"),b=k("AI"),h=C(),S=_("h4"),W=k("Stats"),T=C();for(let y=0;y<P.length;y+=1)P[y].c();this.h()},l(y){e=p(y,"DIV",{class:!0});var N=v(e);u&&u.l(N),n=A(N),o=p(N,"H4",{});var m=v(o);r=g(m,"Move"),m.forEach(f),l=A(N),a=p(N,"H4",{});var H=v(a);c=g(H,"Selection"),H.forEach(f),i=A(N),d=p(N,"H4",{});var F=v(d);b=g(F,"AI"),F.forEach(f),h=A(N),S=p(N,"H4",{});var Y=v(S);W=g(Y,"Stats"),Y.forEach(f),T=A(N);for(let G=0;G<P.length;G+=1)P[G].l(N);N.forEach(f),this.h()},h(){ne(e,"class","grid4cols svelte-1ofp4bt")},m(y,N){O(y,e,N),u&&u.m(e,null),s(e,n),s(e,o),s(o,r),s(e,l),s(e,a),s(a,c),s(e,i),s(e,d),s(d,b),s(e,h),s(e,S),s(S,W),s(e,T);for(let m=0;m<P.length;m+=1)P[m].m(e,null);E=!0},p(y,N){if(y[0].length===0?u||(u=mt(),u.c(),u.m(e,n)):u&&(u.d(1),u=null),N&1){M=[...y[0]].reverse();let m;for(m=0;m<M.length;m+=1){const H=pt(y,M,m);P[m]?(P[m].p(H,N),q(P[m],1)):(P[m]=kt(H),P[m].c(),q(P[m],1),P[m].m(e,null))}for(je(),m=M.length;m<P.length;m+=1)D(m);Ke()}},i(y){if(!E){for(let N=0;N<M.length;N+=1)q(P[N]);E=!0}},o(y){P=P.filter(Boolean);for(let N=0;N<P.length;N+=1)j(P[N]);E=!1},d(y){y&&f(e),u&&u.d(),Tt(P,y)}}}function mt(t){let e,n;return{c(){e=_("p"),n=k("No move yet.")},l(o){e=p(o,"P",{});var r=v(e);n=g(r,"No move yet."),r.forEach(f)},m(o,r){O(o,e,r),s(e,n)},d(o){o&&f(e)}}}function ro(t){let e;return{c(){e=_("span"),this.h()},l(n){e=p(n,"SPAN",{class:!0}),v(e).forEach(f),this.h()},h(){ne(e,"class","item svelte-1ofp4bt")},m(n,o){O(n,e,o)},p:me,d(n){n&&f(e)}}}function so(t){let e,n=t[2].aiChoice.score+"",o,r,l=t[2].aiChoice.reason+"",a;return{c(){e=_("span"),o=k(n),r=k(" - "),a=k(l),this.h()},l(c){e=p(c,"SPAN",{class:!0});var i=v(e);o=g(i,n),r=g(i," - "),a=g(i,l),i.forEach(f),this.h()},h(){ne(e,"class","item svelte-1ofp4bt")},m(c,i){O(c,e,i),s(e,o),s(e,r),s(e,a)},p(c,i){i&1&&n!==(n=c[2].aiChoice.score+"")&&V(o,n),i&1&&l!==(l=c[2].aiChoice.reason+"")&&V(a,l)},d(c){c&&f(e)}}}function kt(t){let e,n,o,r,l=t[2].method+"",a,c,i,d,b,h,S;n=new yt({props:{board:t[2].board,dimensionPx:{width:100,height:100},highlightCell:it(t[2].moveAsIndex),noLoop:!0}});function W(u,M){return u[2].aiChoice?so:ro}let T=W(t),E=T(t);return b=new no({props:{historyItem:t[2]}}),{c(){e=_("div"),We(n.$$.fragment),o=C(),r=_("span"),a=k(l),c=C(),E.c(),i=C(),d=_("div"),We(b.$$.fragment),h=C(),this.h()},l(u){e=p(u,"DIV",{class:!0});var M=v(e);Fe(n.$$.fragment,M),M.forEach(f),o=A(u),r=p(u,"SPAN",{class:!0});var P=v(r);a=g(P,l),P.forEach(f),c=A(u),E.l(u),i=A(u),d=p(u,"DIV",{class:!0});var D=v(d);Fe(b.$$.fragment,D),h=A(D),D.forEach(f),this.h()},h(){ne(e,"class","item svelte-1ofp4bt"),ne(r,"class","item svelte-1ofp4bt"),ne(d,"class","item svelte-1ofp4bt")},m(u,M){O(u,e,M),Ge(n,e,null),O(u,o,M),O(u,r,M),s(r,a),O(u,c,M),E.m(u,M),O(u,i,M),O(u,d,M),Ge(b,d,null),s(d,h),S=!0},p(u,M){const P={};M&1&&(P.board=u[2].board),M&1&&(P.highlightCell=it(u[2].moveAsIndex)),n.$set(P),(!S||M&1)&&l!==(l=u[2].method+"")&&V(a,l),T===(T=W(u))&&E?E.p(u,M):(E.d(1),E=T(u),E&&(E.c(),E.m(i.parentNode,i)));const D={};M&1&&(D.historyItem=u[2]),b.$set(D)},i(u){S||(q(n.$$.fragment,u),q(b.$$.fragment,u),S=!0)},o(u){j(n.$$.fragment,u),j(b.$$.fragment,u),S=!1},d(u){u&&f(e),Ve(n),u&&f(o),u&&f(r),u&&f(c),E.d(u),u&&f(i),u&&f(d),Ve(b)}}}function lo(t){let e,n,o=t[1]&&vt(t);return{c(){e=_("div"),o&&o.c()},l(r){e=p(r,"DIV",{});var l=v(e);o&&o.l(l),l.forEach(f)},m(r,l){O(r,e,l),o&&o.m(e,null),n=!0},p(r,[l]){r[1]?o?(o.p(r,l),l&2&&q(o,1)):(o=vt(r),o.c(),q(o,1),o.m(e,null)):o&&(je(),j(o,1,1,()=>{o=null}),Ke())},i(r){n||(q(o),n=!0)},o(r){j(o),n=!1},d(r){r&&f(e),o&&o.d()}}}function ao(t,e,n){let{history:o}=e,{showMoveHistory:r}=e;return t.$$set=l=>{"history"in l&&n(0,o=l.history),"showMoveHistory"in l&&n(1,r=l.showMoveHistory)},[o,r]}class io extends Le{constructor(e){super(),Xe(this,e,ao,lo,Re,{history:0,showMoveHistory:1})}}function co(t){let e,n;return e=new yt({props:{board:t[0].board,dimensionPx:{width:100,height:100},noLoop:!0}}),{c(){We(e.$$.fragment)},l(o){Fe(e.$$.fragment,o)},m(o,r){Ge(e,o,r),n=!0},p(o,r){const l={};r&1&&(l.board=o[0].board),e.$set(l)},i(o){n||(q(e.$$.fragment,o),n=!0)},o(o){j(e.$$.fragment,o),n=!1},d(o){Ve(e,o)}}}function fo(t){let e,n;return e=new io({props:{history:t[0].moveHistory,showMoveHistory:t[1]}}),{c(){We(e.$$.fragment)},l(o){Fe(e.$$.fragment,o)},m(o,r){Ge(e,o,r),n=!0},p(o,r){const l={};r&1&&(l.history=o[0].moveHistory),r&2&&(l.showMoveHistory=o[1]),e.$set(l)},i(o){n||(q(e.$$.fragment,o),n=!0)},o(o){j(e.$$.fragment,o),n=!1},d(o){Ve(e,o)}}}function uo(t){let e,n,o,r,l,a=t[2](t[0])+"",c,i,d,b=t[1]?"Hide":"Show",h,S,W,T,E,u,M,P;const D=[fo,co],y=[];function N(m,H){return m[1]?0:1}return T=N(t),E=y[T]=D[T](t),{c(){e=_("div"),n=_("h4"),o=k("Game info"),r=C(),l=_("span"),c=k(a),i=C(),d=_("button"),h=k(b),S=k(" move history"),W=C(),E.c()},l(m){e=p(m,"DIV",{});var H=v(e);n=p(H,"H4",{});var F=v(n);o=g(F,"Game info"),F.forEach(f),r=A(H),l=p(H,"SPAN",{});var Y=v(l);c=g(Y,a),Y.forEach(f),i=A(H),d=p(H,"BUTTON",{});var G=v(d);h=g(G,b),S=g(G," move history"),G.forEach(f),W=A(H),E.l(H),H.forEach(f)},m(m,H){O(m,e,H),s(e,n),s(n,o),s(e,r),s(e,l),s(l,c),s(e,i),s(e,d),s(d,h),s(d,S),s(e,W),y[T].m(e,null),u=!0,M||(P=$t(d,"click",t[3]),M=!0)},p(m,[H]){(!u||H&1)&&a!==(a=m[2](m[0])+"")&&V(c,a),(!u||H&2)&&b!==(b=m[1]?"Hide":"Show")&&V(h,b);let F=T;T=N(m),T===F?y[T].p(m,H):(je(),j(y[F],1,1,()=>{y[F]=null}),Ke(),E=y[T],E?E.p(m,H):(E=y[T]=D[T](m),E.c()),q(E,1),E.m(e,null))},i(m){u||(q(E),u=!0)},o(m){j(E),u=!1},d(m){m&&f(e),y[T].d(),M=!1,P()}}}function ho(t,e,n){let{game:o}=e,r=!1;const l=c=>!c||!c.state?"N/A":c.state==="not_over"?"Turn: "+(c.currentPlayer===R.player?"Player":"Computer"):c.state==="player_win"?"Player Win":c.state==="computer_win"?"Computer Win":c.state==="draw"?"Draw":c.state==="over"?"Game Over":"Invalid Game",a=()=>n(1,r=!r);return t.$$set=c=>{"game"in c&&n(0,o=c.game)},[o,r,l,a]}class bo extends Le{constructor(e){super(),Xe(this,e,ho,uo,Re,{game:0})}}export{yt as B,bo as G,go as a,mo as b,ft as c,ut as d,vo as g,ko as m,ht as s,at as x};
