function W(t){return function(...e){var n=e.pop();return t.call(this,e,n)}}var C=typeof queueMicrotask=="function"&&queueMicrotask,G=typeof setImmediate=="function"&&setImmediate,j=typeof process=="object"&&typeof process.nextTick=="function";function D(t){setTimeout(t,0)}function F(t){return(e,...n)=>t(()=>e(...n))}var _;C?_=queueMicrotask:G?_=setImmediate:j?_=process.nextTick:_=D;var q=F(_);function H(t){return A(t)?function(...e){const n=e.pop(),r=t.apply(this,e);return B(r,n)}:W(function(e,n){var r;try{r=t.apply(this,e)}catch(f){return n(f)}if(r&&typeof r.then=="function")return B(r,n);n(null,r)})}function B(t,e){return t.then(n=>{M(e,null,n)},n=>{M(e,n&&n.message?n:new Error(n))})}function M(t,e,n){try{t(e,n)}catch(r){q(f=>{throw f},r)}}function A(t){return t[Symbol.toStringTag]==="AsyncFunction"}function J(t){return t[Symbol.toStringTag]==="AsyncGenerator"}function K(t){return typeof t[Symbol.asyncIterator]=="function"}function l(t){if(typeof t!="function")throw new Error("expected a function");return A(t)?H(t):t}function s(t,e=t.length){if(!e)throw new Error("arity is undefined");function n(...r){return typeof r[e-1]=="function"?t.apply(this,r):new Promise((f,i)=>{r[e-1]=(o,...u)=>{if(o)return i(o);f(u.length>1?u:u[0])},t.apply(this,r)})}return n}function E(t,e,n,r){e=e||[];var f=[],i=0,o=l(n);return t(e,(u,a,c)=>{var y=i++;o(u,(v,h)=>{f[y]=h,c(v)})},u=>{r(u,f)})}function g(t){return t&&typeof t.length=="number"&&t.length>=0&&t.length%1===0}const I={};function w(t){function e(...n){if(t!==null){var r=t;t=null,r.apply(this,n)}}return Object.assign(e,t),e}function U(t){return t[Symbol.iterator]&&t[Symbol.iterator]()}function X(t){var e=-1,n=t.length;return function(){return++e<n?{value:t[e],key:e}:null}}function Y(t){var e=-1;return function(){var r=t.next();return r.done?null:(e++,{value:r.value,key:e})}}function Z(t){var e=t?Object.keys(t):[],n=-1,r=e.length;return function f(){var i=e[++n];return i==="__proto__"?f():n<r?{value:t[i],key:i}:null}}function z(t){if(g(t))return X(t);var e=U(t);return e?Y(e):Z(t)}function x(t){return function(...e){if(t===null)throw new Error("Callback was already called.");var n=t;t=null,n.apply(this,e)}}function P(t,e,n,r){let f=!1,i=!1,o=!1,u=0,a=0;function c(){u>=e||o||f||(o=!0,t.next().then(({value:h,done:S})=>{if(!(i||f)){if(o=!1,S){f=!0,u<=0&&r(null);return}u++,n(h,a,y),a++,c()}}).catch(v))}function y(h,S){if(u-=1,!i){if(h)return v(h);if(h===!1){f=!0,i=!0;return}if(S===I||f&&u<=0)return f=!0,r(null);c()}}function v(h){i||(o=!1,f=!0,r(h))}c()}var p=t=>(e,n,r)=>{if(r=w(r),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return r(null);if(J(e))return P(e,t,n,r);if(K(e))return P(e[Symbol.asyncIterator](),t,n,r);var f=z(e),i=!1,o=!1,u=0,a=!1;function c(v,h){if(!o)if(u-=1,v)i=!0,r(v);else if(v===!1)i=!0,o=!0;else{if(h===I||i&&u<=0)return i=!0,r(null);a||y()}}function y(){for(a=!0;u<t&&!i;){var v=f();if(v===null){i=!0,u<=0&&r(null);return}u+=1,n(v.value,v.key,x(c))}a=!1}y()};function R(t,e,n,r){return p(e)(t,l(n),r)}var V=s(R,4);function k(t,e,n){n=w(n);var r=0,f=0,{length:i}=t,o=!1;i===0&&n(null);function u(a,c){a===!1&&(o=!0),o!==!0&&(a?n(a):(++f===i||c===I)&&n(null))}for(;r<i;r++)e(t[r],r,x(u))}function b(t,e,n){return V(t,1/0,e,n)}function tt(t,e,n){var r=g(t)?k:b;return r(t,l(e),n)}var d=s(tt,3);function et(t,e,n){return E(d,t,e,n)}var nt=s(et,3);function rt(t,e,n){return V(t,1,e,n)}var L=s(rt,3);function it(t,e,n){return E(L,t,e,n)}s(it,3);function ut(t,e,n,r){r=w(r);var f=l(n);return L(t,(i,o,u)=>{f(e,i,(a,c)=>{e=c,u(a)})},i=>r(i,e))}s(ut,4);function ft(t,e,n,r){return E(p(e),t,n,r)}var $=s(ft,4);function ot(t,e,n,r){var f=l(n);return $(t,e,(i,o)=>{f(i,(u,...a)=>u?o(u):o(u,a))},(i,o)=>{for(var u=[],a=0;a<o.length;a++)o[a]&&(u=u.concat(...o[a]));return r(i,u)})}var N=s(ot,4);function at(t,e,n){return N(t,1/0,e,n)}s(at,3);function ct(t,e,n){return N(t,1,e,n)}s(ct,3);function m(t,e){return(n,r,f,i)=>{var o=!1,u;const a=l(f);n(r,(c,y,v)=>{a(c,(h,S)=>{if(h||h===!1)return v(h);if(t(S)&&!u)return o=!0,u=e(!0,c),v(null,I);v()})},c=>{if(c)return i(c);i(null,o?u:e(!1))})}}function st(t,e,n){return m(r=>r,(r,f)=>f)(d,t,e,n)}s(st,3);function lt(t,e,n,r){return m(f=>f,(f,i)=>i)(p(e),t,n,r)}s(lt,4);function vt(t,e,n){return m(r=>r,(r,f)=>f)(p(1),t,e,n)}s(vt,3);function ht(t,e,n){n=x(n);var r=l(t),f=l(e),i;function o(a,...c){if(a)return n(a);a!==!1&&(i=c,f(...c,u))}function u(a,c){if(a)return n(a);if(a!==!1){if(!c)return n(null,...i);r(o)}}return u(null,!0)}s(ht,3);function Q(t){return(e,n,r)=>t(e,r)}function yt(t,e,n){return d(t,Q(l(e)),n)}var Jt=s(yt,3);function pt(t,e,n,r){return p(e)(t,Q(l(n)),r)}var mt=s(pt,4);function dt(t,e,n){return mt(t,1,e,n)}var wt=s(dt,3);function xt(t){return A(t)?t:function(...e){var n=e.pop(),r=!0;e.push((...f)=>{r?q(()=>n(...f)):n(...f)}),t.apply(this,e),r=!1}}function Lt(t,e,n){return m(r=>!r,r=>!r)(d,t,e,n)}s(Lt,3);function St(t,e,n,r){return m(f=>!f,f=>!f)(p(e),t,n,r)}s(St,4);function _t(t,e,n){return m(r=>!r,r=>!r)(L,t,e,n)}s(_t,3);function gt(t,e,n,r){var f=new Array(e.length);t(e,(i,o,u)=>{n(i,(a,c)=>{f[o]=!!c,u(a)})},i=>{if(i)return r(i);for(var o=[],u=0;u<e.length;u++)f[u]&&o.push(e[u]);r(null,o)})}function It(t,e,n,r){var f=[];t(e,(i,o,u)=>{n(i,(a,c)=>{if(a)return u(a);c&&f.push({index:o,value:i}),u(a)})},i=>{if(i)return r(i);r(null,f.sort((o,u)=>o.index-u.index).map(o=>o.value))})}function O(t,e,n,r){var f=g(e)?gt:It;return f(t,e,l(n),r)}function Ot(t,e,n){return O(d,t,e,n)}s(Ot,3);function At(t,e,n,r){return O(p(e),t,n,r)}s(At,4);function Et(t,e,n){return O(L,t,e,n)}s(Et,3);function $t(t,e){var n=x(e),r=l(xt(t));function f(i){if(i)return n(i);i!==!1&&r(f)}return f()}s($t,2);function Tt(t,e,n,r){var f=l(n);return $(t,e,(i,o)=>{f(i,(u,a)=>u?o(u):o(u,{key:a,val:i}))},(i,o)=>{for(var u={},{hasOwnProperty:a}=Object.prototype,c=0;c<o.length;c++)if(o[c]){var{key:y}=o[c],{val:v}=o[c];a.call(u,y)?u[y].push(v):u[y]=[v]}return r(i,u)})}s(Tt,4);function Bt(t,e,n,r){r=w(r);var f={},i=l(n);return p(e)(t,(o,u,a)=>{i(o,u,(c,y)=>{if(c)return a(c);f[u]=y,a(c)})},o=>r(o,f))}s(Bt,4);j?process.nextTick:G&&setImmediate;s((t,e,n)=>{var r=g(e)?[]:{};t(e,(f,i,o)=>{l(f)((u,...a)=>{a.length<2&&([a]=a),r[i]=a,o(u)})},f=>n(f,r))},3);function Mt(t,e){if(e=w(e),!Array.isArray(t))return e(new TypeError("First argument to race must be an array of functions"));if(!t.length)return e();for(var n=0,r=t.length;n<r;n++)l(t[n])(e)}s(Mt,2);function T(t,e,n,r){const f=l(n);return O(t,e,(i,o)=>{f(i,(u,a)=>{o(u,!a)})},r)}function Pt(t,e,n){return T(d,t,e,n)}s(Pt,3);function Gt(t,e,n,r){return T(p(e),t,n,r)}s(Gt,4);function jt(t,e,n){return T(L,t,e,n)}s(jt,3);function qt(t,e,n){return m(Boolean,r=>r)(d,t,e,n)}s(qt,3);function Vt(t,e,n,r){return m(Boolean,f=>f)(p(e),t,n,r)}s(Vt,4);function Nt(t,e,n){return m(Boolean,r=>r)(L,t,e,n)}s(Nt,3);function Qt(t,e,n){var r=l(e);return nt(t,(i,o)=>{r(i,(u,a)=>{if(u)return o(u);o(u,{value:i,criteria:a})})},(i,o)=>{if(i)return n(i);n(null,o.sort(f).map(u=>u.value))});function f(i,o){var u=i.criteria,a=o.criteria;return u<a?-1:u>a?1:0}}s(Qt,3);function Wt(t){for(var e=Array(t);t--;)e[t]=t;return e}function Ct(t,e,n,r){var f=l(n);return $(Wt(t),e,f,r)}function Kt(t,e,n){return Ct(t,1,e,n)}function Dt(t,e){var n=null,r;return wt(t,(f,i)=>{l(f)((o,...u)=>{if(o===!1)return i(o);u.length<2?[r]=u:r=u,n=o,i(o?null:{})})},()=>e(n,r))}s(Dt);function Ft(t,e,n){n=x(n);var r=l(e),f=l(t),i=[];function o(a,...c){if(a)return n(a);i=c,a!==!1&&f(u)}function u(a,c){if(a)return n(a);if(a!==!1){if(!c)return n(null,...i);r(o)}}return f(u)}s(Ft,3);function Ht(t,e){if(e=w(e),!Array.isArray(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var n=0;function r(i){var o=l(t[n++]);o(...i,x(f))}function f(i,...o){if(i!==!1){if(i||n===t.length)return e(i,...o);r(o)}}r([])}s(Ht);export{Jt as e,Kt as t};
