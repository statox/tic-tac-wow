import{S as J,i as L,s as O,k as g,l as w,m as E,h as m,n as U,I as M,b,J as T,B as $,K,q as C,a as k,r as N,c as P,G as y,u as Q,L as Te,f as v,g as z,d as q,t as S,e as re,w as H,x as R,y as j,z as F,M as Oe,N as oe,O as ke,H as Pe,P as Be,Q as He}from"../../chunks/index-780d2971.js";import{w as Re}from"../../chunks/index-341ca319.js";const se=t=>{const e=t===1?1:-1,n=[1,1,2,2,3,3].map(l=>l*e);return{player:t,pieces:n,unselectableIndexes:new Set,selectedPiece:null}},ie=t=>{const e=[];for(let l=0;l<3;l++){e.push([]);for(let r=0;r<3;r++)e[e.length-1].push([])}const n={state:{player:1,action:"select1"},grid:e,player1:se(1),player2:se(2)};return t!=null&&t.player2Start&&(n.state.player=2),n},Z=t=>{const e=t.player1.unselectableIndexes,n=t.player2.unselectableIndexes,l=JSON.parse(JSON.stringify(t));return l.player1.unselectableIndexes=new Set([...e.values()]),l.player2.unselectableIndexes=new Set([...n.values()]),l},D=t=>t.state.player===1?t.player1:t.player2,x=t=>t.state.player===1?t.player2:t.player1,je=(t,e)=>e?t.grid.map(n=>n.map(l=>l.join(",")).join("	|")).join(`
`):t.grid.map(n=>n.map(l=>l.join(",")).join("	|")).join(`
`),ce=(t,e,n)=>{e&&console.log(e),console.log(je(t,n)),console.log()},ne=(t,e,n)=>{const l=t[n][e];return l.length?l[l.length-1]:null},I=(t,e,n)=>{if(e<0||n<0||e>2||n>2)throw new Error(`Invalid coordinates ${e},${n}`);const l=ne(t,e,n);return l===null?null:l>0?1:2},Me=(t,e,n)=>{if(e<0||n<0||e>2||n>2)throw new Error(`Invalid coordinates ${e},${n}`);const l=ne(t,e,n);return l===null?0:Math.abs(l)},G=(t,e,n)=>{const l=I(t,e.x,e.y),r=I(t,n.x,n.y);return l!==null&&l===r},te=t=>{const{grid:e}=t,n=new Set;for(let l=0;l<3;l++)if(G(e,{x:0,y:l},{x:1,y:l})&&G(e,{x:0,y:l},{x:2,y:l})){const r=I(e,0,l);n.add(r)}for(let l=0;l<3;l++)if(G(e,{x:l,y:0},{x:l,y:1})&&G(e,{x:l,y:0},{x:l,y:2})){const r=I(e,l,0);n.add(r)}if(G(e,{x:0,y:0},{x:1,y:1})&&G(e,{x:0,y:0},{x:2,y:2})){const l=I(e,0,0);n.add(l)}if(G(e,{x:0,y:2},{x:1,y:1})&&G(e,{x:0,y:2},{x:2,y:0})){const l=I(e,0,2);n.add(l)}if(n.delete(null),n.size===1){t.state.player=[...n.values()][0],t.state.action="winner";return}if(n.size===2){t.state.player=1,t.state.action="draw";return}},Ce=(t,e,n)=>{if(t.state.player!==e.player||t.state.action!=="select1")throw new Error("invalid_step");if(n>=e.pieces.length||n<0)throw new Error("oob_selection_index");if(e.selectedPiece!==null)throw new Error("previous_selection_in_hand");if(e.unselectableIndexes.has(n))throw new Error("piece_already_used");e.selectedPiece={from:"hand",index:n},t.state.action="select2"},Ne=(t,e,n)=>{if(t.state.player!==e.player||t.state.action!=="select1")throw new Error("invalid_step");const{x:l,y:r}=n;if(l<0||r<0||l>2||r>2)throw new Error(`Invalid coordinates ${l},${r}`);if(e.selectedPiece!==null)throw new Error("previous_selection_in_hand");if(t.grid[r][l].length===0)throw new Error("empty_stack_selection");if(I(t.grid,l,r)!==e.player)throw new Error("opponent_owned_selection");e.selectedPiece={from:"board",position:{x:l,y:r}},t.state.action="select2"},Ie=(t,e)=>{if(t.state.action!=="select2")throw new Error("invalid_step");const n=D(t);if(n.selectedPiece===null)throw new Error("no_selection_in_hand");const{x:l,y:r}=e,s=n.selectedPiece.from==="hand"?n.pieces[n.selectedPiece.index]:ne(t.grid,n.selectedPiece.position.x,n.selectedPiece.position.y);if(s===null)throw new Error("selected_piece_is_null");if(Me(t.grid,l,r)>=Math.abs(s))throw new Error("destination_bigger_than_piece");return t.grid[e.y][e.x].push(s),n.selectedPiece.from==="hand"&&n.unselectableIndexes.add(n.selectedPiece.index),n.selectedPiece.from==="board"&&t.grid[n.selectedPiece.position.y][n.selectedPiece.position.x].pop(),n.selectedPiece=null,t.state.action="select1",t.state.player=t.state.player===1?2:1,te(t),0},B=(t,e,n)=>{n.from.from==="hand"?Ce(t,e,n.from.index):Ne(t,e,n.from.position),Ie(t,n.to)},Fe=(t,e)=>{const n=[];for(let l=0;l<3;l++)for(let r=0;r<3;r++){const s=Me(t.grid,r,l);(!s||s<Math.abs(e))&&n.push({x:r,y:l})}return n},W=(t,e)=>Ve(t,e).reduce((l,r)=>{const s=Ue(t,e,r),o=Fe(t,s);for(const i of o)l.push({from:r,to:i});return l},[]),Ve=(t,e)=>{const n=e.pieces.map((l,r)=>r).filter(l=>!e.unselectableIndexes.has(l)).map(l=>({index:l,from:"hand"}));for(let l=0;l<3;l++)for(let r=0;r<3;r++)I(t.grid,r,l)===e.player&&n.push({from:"board",position:{x:r,y:l}});return n},Ue=(t,e,n)=>{if(n.from==="board"){const l=t.grid[n.position.y][n.position.x];return l[l.length-1]}return e.pieces[n.index]},Ae=t=>{if(te(t),t.state.action==="winner")return t.state.player===1?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER;if(t.state.action==="draw")return Number.MAX_SAFE_INTEGER/2;const e=W(t,t.player1),n=W(t,t.player2);if(e.length===0&&n.length===0)return Number.MAX_SAFE_INTEGER/2;let l=0;const r=I(t.grid,1,1);return r===t.player1.player?l+=2:r===t.player2.player&&(l-=2),[I(t.grid,0,0),I(t.grid,2,0),I(t.grid,0,2),I(t.grid,2,2)].forEach(o=>{o!==null&&(l+=o!==null&&o===1?1:-1)}),l},De=(t,e)=>{const n=W(t,e);if(!n.length)throw new Error("no_move_possible");const s=[...n.reduce((o,i)=>{const f=Z(t),u=e.player===1?f.player1:f.player2;B(f,u,i);const d=Ae(f);return o.push({move:i,score:d}),o},[])].sort((o,i)=>e.player===1?i.score-o.score:o.score-i.score)[0].move;B(t,e,s)},le=(t,e,n)=>{const l=W(t,e);if(te(t),n===0||!l.length||["draw","winner"].includes(t.state.action))return{score:Ae(t),move:null};if(e.player===1){let r=Number.MIN_SAFE_INTEGER,s;for(const o of l){const i=Z(t),f=D(i),u=x(i);B(i,f,o);const d=le(i,u,n-1);(r===void 0||d.score>r)&&(r=d.score,s={score:d.score,move:o})}if(!s)throw console.error("minmax error for player 1"),ce(t),new Error("no_minmax_result");return s}else{let r=Number.MAX_SAFE_INTEGER,s;for(const o of l){const i=Z(t),f=D(i),u=x(i);B(i,f,o);const d=le(i,u,n-1);(r===void 0||d.score<r)&&(r=d.score,s={score:d.score,move:o})}if(!s)throw console.error("minmax error for player 2"),ce(t),new Error("no_minmax_result");return s}},We=(t,e)=>{const n=le(t,e,2);if(!n.move)throw new Error("no_move_possible");const l=n.move;B(t,e,l)},$e=(t,e)=>{const n=W(t,e);if(n.length===0)throw new Error("no_move_possible");const l=Math.floor(Math.random()*n.length),r=n[l];B(t,e,r)},Je=(t,e)=>{const n=W(t,e);if(!n.length)throw new Error("no_move_possible");for(const l of n){const r=Z(t),s=e.player===1?r.player1:r.player2;if(B(r,s,l),te(r),r.state.action==="winner"&&r.state.player===e.player){B(t,e,l);return}}$e(t,e)},ee={random:$e,win_or_random:Je,euristic:De,minmax:We},Le={player2Auto:!0,player2Strat:"minmax"},Y=Re(Le);function ae(t,e,n){const l=t.slice();return l[4]=e[n],l}function fe(t){let e,n=t[4]+"",l,r;return{c(){e=g("div"),l=C(n),r=k(),this.h()},l(s){e=w(s,"DIV",{class:!0});var o=E(e);l=N(o,n),r=P(o),o.forEach(m),this.h()},h(){U(e,"class","piece svelte-1bwmfvs"),M(e,"player1",t[4]>0),M(e,"player2",t[4]<0),M(e,"small-circle",Math.abs(t[4])===1),M(e,"medium-circle",Math.abs(t[4])===2),M(e,"large-circle",Math.abs(t[4])===3)},m(s,o){b(s,e,o),y(e,l),y(e,r)},p(s,o){o&1&&n!==(n=s[4]+"")&&Q(l,n),o&1&&M(e,"player1",s[4]>0),o&1&&M(e,"player2",s[4]<0),o&1&&M(e,"small-circle",Math.abs(s[4])===1),o&1&&M(e,"medium-circle",Math.abs(s[4])===2),o&1&&M(e,"large-circle",Math.abs(s[4])===3)},d(s){s&&m(e)}}}function Xe(t){let e,n,l,r=[...t[0]].reverse(),s=[];for(let o=0;o<r.length;o+=1)s[o]=fe(ae(t,r,o));return{c(){e=g("button");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=w(o,"BUTTON",{class:!0});var i=E(e);for(let f=0;f<s.length;f+=1)s[f].l(i);i.forEach(m),this.h()},h(){U(e,"class","cell svelte-1bwmfvs"),M(e,"selected",t[1]),M(e,"disabled",t[2])},m(o,i){b(o,e,i);for(let f=0;f<s.length;f+=1)s[f].m(e,null);n||(l=T(e,"click",t[3]),n=!0)},p(o,[i]){if(i&1){r=[...o[0]].reverse();let f;for(f=0;f<r.length;f+=1){const u=ae(o,r,f);s[f]?s[f].p(u,i):(s[f]=fe(u),s[f].c(),s[f].m(e,null))}for(;f<s.length;f+=1)s[f].d(1);s.length=r.length}i&2&&M(e,"selected",o[1]),i&4&&M(e,"disabled",o[2])},i:$,o:$,d(o){o&&m(e),K(s,o),n=!1,l()}}}function ze(t,e,n){let{pieces:l}=e,{selected:r=!1}=e,{disabled:s}=e;function o(i){Te.call(this,t,i)}return t.$$set=i=>{"pieces"in i&&n(0,l=i.pieces),"selected"in i&&n(1,r=i.selected),"disabled"in i&&n(2,s=i.disabled)},[l,r,s,o]}class Ge extends J{constructor(e){super(),L(this,e,ze,Xe,O,{pieces:0,selected:1,disabled:2})}}function ue(t,e,n){const l=t.slice();return l[4]=e[n],l[6]=n,l}function de(t,e,n){const l=t.slice();return l[7]=e[n],l[9]=n,l}function _e(t){let e,n;function l(){return t[3](t[9],t[6])}return e=new Ge({props:{pieces:t[7],disabled:!1,selected:t[2]({x:t[9],y:t[6]})}}),e.$on("click",l),{c(){H(e.$$.fragment)},l(r){R(e.$$.fragment,r)},m(r,s){j(e,r,s),n=!0},p(r,s){t=r;const o={};s&1&&(o.pieces=t[7]),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){F(e,r)}}}function pe(t){let e,n,l=t[4],r=[];for(let o=0;o<l.length;o+=1)r[o]=_e(de(t,l,o));const s=o=>S(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=re()},l(o){for(let i=0;i<r.length;i+=1)r[i].l(o);e=re()},m(o,i){for(let f=0;f<r.length;f+=1)r[f].m(o,i);b(o,e,i),n=!0},p(o,i){if(i&7){l=o[4];let f;for(f=0;f<l.length;f+=1){const u=de(o,l,f);r[f]?(r[f].p(u,i),v(r[f],1)):(r[f]=_e(u),r[f].c(),v(r[f],1),r[f].m(e.parentNode,e))}for(z(),f=l.length;f<r.length;f+=1)s(f);q()}},i(o){if(!n){for(let i=0;i<l.length;i+=1)v(r[i]);n=!0}},o(o){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)S(r[i]);n=!1},d(o){K(r,o),o&&m(e)}}}function qe(t){let e,n,l=JSON.stringify(t[0].state)+"",r,s,o,i,f=t[0].grid,u=[];for(let a=0;a<f.length;a+=1)u[a]=pe(ue(t,f,a));const d=a=>S(u[a],1,1,()=>{u[a]=null});return{c(){e=g("div"),n=g("div"),r=C(l),s=k(),o=g("div");for(let a=0;a<u.length;a+=1)u[a].c();this.h()},l(a){e=w(a,"DIV",{class:!0});var _=E(e);n=w(_,"DIV",{});var c=E(n);r=N(c,l),c.forEach(m),s=P(_),o=w(_,"DIV",{class:!0});var p=E(o);for(let h=0;h<u.length;h+=1)u[h].l(p);p.forEach(m),_.forEach(m),this.h()},h(){U(o,"class","overlay svelte-1n6jeyv"),U(e,"class","board svelte-1n6jeyv")},m(a,_){b(a,e,_),y(e,n),y(n,r),y(e,s),y(e,o);for(let c=0;c<u.length;c+=1)u[c].m(o,null);i=!0},p(a,[_]){if((!i||_&1)&&l!==(l=JSON.stringify(a[0].state)+"")&&Q(r,l),_&7){f=a[0].grid;let c;for(c=0;c<f.length;c+=1){const p=ue(a,f,c);u[c]?(u[c].p(p,_),v(u[c],1)):(u[c]=pe(p),u[c].c(),v(u[c],1),u[c].m(o,null))}for(z(),c=f.length;c<u.length;c+=1)d(c);q()}},i(a){if(!i){for(let _=0;_<f.length;_+=1)v(u[_]);i=!0}},o(a){u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)S(u[_]);i=!1},d(a){a&&m(e),K(u,a)}}}function Ke(t,e,n){let{game:l}=e,{onSelectCell:r}=e;const s=i=>{for(const f of[l.player1,l.player2]){const{selectedPiece:u}=f;if((u==null?void 0:u.from)==="board"&&u.position.x===i.x&&u.position.y===i.y)return!0}return!1},o=(i,f)=>r({x:i,y:f});return t.$$set=i=>{"game"in i&&n(0,l=i.game),"onSelectCell"in i&&n(1,r=i.onSelectCell)},[l,r,s,o]}class Qe extends J{constructor(e){super(),L(this,e,Ke,qe,O,{game:0,onSelectCell:1})}}function he(t,e,n){const l=t.slice();return l[3]=e[n],l}function me(t){let e,n=t[3]+"",l,r;return{c(){e=g("option"),l=C(n),r=k(),this.h()},l(s){e=w(s,"OPTION",{});var o=E(e);l=N(o,n),r=P(o),o.forEach(m),this.h()},h(){e.__value=t[3],e.value=e.__value},m(s,o){b(s,e,o),y(e,l),y(e,r)},p:$,d(s){s&&m(e)}}}function Ye(t){let e,n,l=t[0].player2Auto?"Human player 2":"Computer player 2",r,s,o,i,f,u=Object.keys(ee),d=[];for(let a=0;a<u.length;a+=1)d[a]=me(he(t,u,a));return{c(){e=g("div"),n=g("button"),r=C(l),s=k(),o=g("select");for(let a=0;a<d.length;a+=1)d[a].c();this.h()},l(a){e=w(a,"DIV",{});var _=E(e);n=w(_,"BUTTON",{});var c=E(n);r=N(c,l),c.forEach(m),s=P(_),o=w(_,"SELECT",{});var p=E(o);for(let h=0;h<d.length;h+=1)d[h].l(p);p.forEach(m),_.forEach(m),this.h()},h(){t[0].player2Strat===void 0&&Oe(()=>t[2].call(o))},m(a,_){b(a,e,_),y(e,n),y(n,r),y(e,s),y(e,o);for(let c=0;c<d.length;c+=1)d[c].m(o,null);oe(o,t[0].player2Strat),i||(f=[T(n,"click",t[1]),T(o,"change",t[2])],i=!0)},p(a,[_]){if(_&1&&l!==(l=a[0].player2Auto?"Human player 2":"Computer player 2")&&Q(r,l),_&0){u=Object.keys(ee);let c;for(c=0;c<u.length;c+=1){const p=he(a,u,c);d[c]?d[c].p(p,_):(d[c]=me(p),d[c].c(),d[c].m(o,null))}for(;c<d.length;c+=1)d[c].d(1);d.length=u.length}_&1&&oe(o,a[0].player2Strat)},i:$,o:$,d(a){a&&m(e),K(d,a),i=!1,ke(f)}}}function Ze(t,e,n){let l;Pe(t,Y,o=>n(0,l=o));const r=()=>Be(Y,l.player2Auto=!l.player2Auto,l);function s(){l.player2Strat=He(this),Y.set(l)}return[l,r,s]}class xe extends J{constructor(e){super(),L(this,e,Ze,Ye,O,{})}}function ye(t,e,n){const l=t.slice();return l[9]=e[n],l[11]=n,l}function be(t){let e,n,l,r,s,o,i,f,u,d,a,_,c;return{c(){e=g("button"),n=C("Random"),l=k(),r=g("button"),s=C("Win or random"),o=k(),i=g("button"),f=C("Euristic"),u=k(),d=g("button"),a=C("MinMax")},l(p){e=w(p,"BUTTON",{});var h=E(e);n=N(h,"Random"),h.forEach(m),l=P(p),r=w(p,"BUTTON",{});var A=E(r);s=N(A,"Win or random"),A.forEach(m),o=P(p),i=w(p,"BUTTON",{});var V=E(i);f=N(V,"Euristic"),V.forEach(m),u=P(p),d=w(p,"BUTTON",{});var X=E(d);a=N(X,"MinMax"),X.forEach(m)},m(p,h){b(p,e,h),y(e,n),b(p,l,h),b(p,r,h),y(r,s),b(p,o,h),b(p,i,h),y(i,f),b(p,u,h),b(p,d,h),y(d,a),_||(c=[T(e,"click",t[4]),T(r,"click",t[5]),T(i,"click",t[6]),T(d,"click",t[7])],_=!0)},p:$,d(p){p&&m(e),p&&m(l),p&&m(r),p&&m(o),p&&m(i),p&&m(u),p&&m(d),_=!1,ke(c)}}}function ve(t){var r;let e,n;function l(){return t[8](t[11])}return e=new Ge({props:{disabled:t[1]||t[0].unselectableIndexes.has(t[11]),pieces:[t[9]],selected:((r=t[0].selectedPiece)==null?void 0:r.from)==="hand"&&t[0].selectedPiece.index===t[11]}}),e.$on("click",l),{c(){H(e.$$.fragment)},l(s){R(e.$$.fragment,s)},m(s,o){j(e,s,o),n=!0},p(s,o){var f;t=s;const i={};o&3&&(i.disabled=t[1]||t[0].unselectableIndexes.has(t[11])),o&1&&(i.pieces=[t[9]]),o&1&&(i.selected=((f=t[0].selectedPiece)==null?void 0:f.from)==="hand"&&t[0].selectedPiece.index===t[11]),e.$set(i)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){S(e.$$.fragment,s),n=!1},d(s){F(e,s)}}}function et(t){let e,n,l=t[0].player+"",r,s,o,i,f,u=!t[1]&&be(t),d=t[0].pieces,a=[];for(let c=0;c<d.length;c+=1)a[c]=ve(ye(t,d,c));const _=c=>S(a[c],1,1,()=>{a[c]=null});return{c(){e=g("span"),n=C("Player "),r=C(l),s=k(),u&&u.c(),o=k(),i=g("div");for(let c=0;c<a.length;c+=1)a[c].c();this.h()},l(c){e=w(c,"SPAN",{});var p=E(e);n=N(p,"Player "),r=N(p,l),p.forEach(m),s=P(c),u&&u.l(c),o=P(c),i=w(c,"DIV",{class:!0});var h=E(i);for(let A=0;A<a.length;A+=1)a[A].l(h);h.forEach(m),this.h()},h(){U(i,"class","overlay svelte-rwgxl1")},m(c,p){b(c,e,p),y(e,n),y(e,r),b(c,s,p),u&&u.m(c,p),b(c,o,p),b(c,i,p);for(let h=0;h<a.length;h+=1)a[h].m(i,null);f=!0},p(c,[p]){if((!f||p&1)&&l!==(l=c[0].player+"")&&Q(r,l),c[1]?u&&(u.d(1),u=null):u?u.p(c,p):(u=be(c),u.c(),u.m(o.parentNode,o)),p&7){d=c[0].pieces;let h;for(h=0;h<d.length;h+=1){const A=ye(c,d,h);a[h]?(a[h].p(A,p),v(a[h],1)):(a[h]=ve(A),a[h].c(),v(a[h],1),a[h].m(i,null))}for(z(),h=d.length;h<a.length;h+=1)_(h);q()}},i(c){if(!f){for(let p=0;p<d.length;p+=1)v(a[p]);f=!0}},o(c){a=a.filter(Boolean);for(let p=0;p<a.length;p+=1)S(a[p]);f=!1},d(c){c&&m(e),c&&m(s),u&&u.d(c),c&&m(o),c&&m(i),K(a,c)}}}function tt(t,e,n){let{hand:l}=e,{disabled:r}=e,{onSelectPiece:s}=e,{onSelectAuto:o}=e;const i=()=>o(l,"random"),f=()=>o(l,"win_or_random"),u=()=>o(l,"euristic"),d=()=>o(l,"minmax"),a=_=>s(l,_);return t.$$set=_=>{"hand"in _&&n(0,l=_.hand),"disabled"in _&&n(1,r=_.disabled),"onSelectPiece"in _&&n(2,s=_.onSelectPiece),"onSelectAuto"in _&&n(3,o=_.onSelectAuto)},[l,r,s,o,i,f,u,d,a]}class ge extends J{constructor(e){super(),L(this,e,tt,et,O,{hand:0,disabled:1,onSelectPiece:2,onSelectAuto:3})}}function we(t){let e,n;return e=new Qe({props:{onSelectCell:t[1],game:t[0]}}),{c(){H(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,r){j(e,l,r),n=!0},p(l,r){const s={};r&1&&(s.game=l[0]),e.$set(s)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){S(e.$$.fragment,l),n=!1},d(l){F(e,l)}}}function Ee(t){let e,n,l,r,s,o,i=t[0].state.player+"",f,u,d,a,_,c;return{c(){e=g("div"),n=g("span"),l=C("Game over!"),r=k(),s=g("span"),o=C("Winner: Player "),f=C(i),u=k(),d=g("button"),a=C("Play again")},l(p){e=w(p,"DIV",{});var h=E(e);n=w(h,"SPAN",{});var A=E(n);l=N(A,"Game over!"),A.forEach(m),r=P(h),s=w(h,"SPAN",{});var V=E(s);o=N(V,"Winner: Player "),f=N(V,i),V.forEach(m),u=P(h),d=w(h,"BUTTON",{});var X=E(d);a=N(X,"Play again"),X.forEach(m),h.forEach(m)},m(p,h){b(p,e,h),y(e,n),y(n,l),y(e,r),y(e,s),y(s,o),y(s,f),y(e,u),y(e,d),y(d,a),_||(c=T(d,"click",t[4]),_=!0)},p(p,h){h&1&&i!==(i=p[0].state.player+"")&&Q(f,i)},d(p){p&&m(e),_=!1,c()}}}function Se(t){let e,n,l,r;return e=new ge({props:{onSelectAuto:t[3],onSelectPiece:t[2],hand:D(t[0]),disabled:!1}}),l=new ge({props:{onSelectAuto:t[3],onSelectPiece:t[2],hand:x(t[0]),disabled:!0}}),{c(){H(e.$$.fragment),n=k(),H(l.$$.fragment)},l(s){R(e.$$.fragment,s),n=P(s),R(l.$$.fragment,s)},m(s,o){j(e,s,o),b(s,n,o),j(l,s,o),r=!0},p(s,o){const i={};o&1&&(i.hand=D(s[0])),e.$set(i);const f={};o&1&&(f.hand=x(s[0])),l.$set(f)},i(s){r||(v(e.$$.fragment,s),v(l.$$.fragment,s),r=!0)},o(s){S(e.$$.fragment,s),S(l.$$.fragment,s),r=!1},d(s){F(e,s),s&&m(n),F(l,s)}}}function lt(t){let e,n,l,r=t[0],s,o,i=t[0],f;n=new xe({});let u=we(t),d=t[0].state.action==="winner"&&Ee(t),a=Se(t);return{c(){e=g("div"),H(n.$$.fragment),l=k(),u.c(),s=k(),d&&d.c(),o=k(),a.c(),this.h()},l(_){e=w(_,"DIV",{class:!0});var c=E(e);R(n.$$.fragment,c),l=P(c),u.l(c),s=P(c),d&&d.l(c),o=P(c),a.l(c),c.forEach(m),this.h()},h(){U(e,"class","d-flex justify-content-center")},m(_,c){b(_,e,c),j(n,e,null),y(e,l),u.m(e,null),y(e,s),d&&d.m(e,null),y(e,o),a.m(e,null),f=!0},p(_,[c]){c&1&&O(r,r=_[0])?(z(),S(u,1,1,$),q(),u=we(_),u.c(),v(u,1),u.m(e,s)):u.p(_,c),_[0].state.action==="winner"?d?d.p(_,c):(d=Ee(_),d.c(),d.m(e,o)):d&&(d.d(1),d=null),c&1&&O(i,i=_[0])?(z(),S(a,1,1,$),q(),a=Se(_),a.c(),v(a,1),a.m(e,null)):a.p(_,c)},i(_){f||(v(n.$$.fragment,_),v(u),v(a),f=!0)},o(_){S(n.$$.fragment,_),S(u),S(a),f=!1},d(_){_&&m(e),F(n),u.d(_),d&&d.d(),a.d(_)}}}function nt(t,e,n){let l;Pe(t,Y,d=>n(5,l=d));let r=ie();const s=()=>{if(["winner","select2"].includes(r.state.action)||r.state.player!==r.player2.player||!l.player2Auto)return;const d=ee[l.player2Strat];d(r,r.player2)};return[r,({x:d,y:a})=>{try{if(r.state.action==="select2"){Ie(r,{x:d,y:a})===0&&s(),n(0,r);return}const _=D(r);Ne(r,_,{x:d,y:a}),n(0,r),n(0,r)}catch(_){console.error("Could not select cell"),console.error(_),console.error("Game should be able to keep working")}},(d,a)=>{try{Ce(r,d,a)}catch(_){console.error("Could not select piece"),console.error(_),console.error("Game should be able to keep working")}n(0,r)},(d,a)=>{const _=ee[a];_(r,d),s(),n(0,r)},()=>{n(0,r=ie({player2Start:Math.random()<.5})),r.state.player===2&&l.player2Auto&&s()}]}class rt extends J{constructor(e){super(),L(this,e,nt,lt,O,{})}}function ot(t){let e,n;return e=new rt({}),{c(){H(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,r){j(e,l,r),n=!0},p:$,i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){S(e.$$.fragment,l),n=!1},d(l){F(e,l)}}}class ct extends J{constructor(e){super(),L(this,e,null,ot,O,{})}}export{ct as default};
