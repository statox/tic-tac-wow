import{S as V,i as j,s as I,k as y,l as S,m as P,h as p,n as W,I as T,b as k,J as O,B as G,K as q,q as w,a as N,r as B,c as A,D as v,u as L,L as ye,f as C,g as F,d as J,t as E,e as z,w as $,x as M,y as D,z as U,M as Se,N as ee,O as ge,H as ve,P as Pe,Q as Ce}from"../../chunks/index-a8714b72.js";import{s as K,g as le,a as Q,b as te,p as Ee,c as Ne,d as Ae}from"../../chunks/index-ed39f6af.js";import{w as Te}from"../../chunks/index-cb4b137e.js";const we={player2Auto:!0,player2Strat:"alphabeta_ordered"},R=Te(we);function ne(s,e,o){const t=s.slice();return t[5]=e[o],t}function ae(s){let e,o=s[5]+"",t,n;return{c(){e=y("div"),t=w(o),n=N(),this.h()},l(r){e=S(r,"DIV",{class:!0});var l=P(e);t=B(l,o),n=A(l),l.forEach(p),this.h()},h(){W(e,"class","piece svelte-950i0e"),T(e,"player1",s[5]>0),T(e,"player2",s[5]<0),T(e,"small-circle",Math.abs(s[5])===1),T(e,"medium-circle",Math.abs(s[5])===2),T(e,"large-circle",Math.abs(s[5])===3)},m(r,l){k(r,e,l),v(e,t),v(e,n)},p(r,l){l&1&&o!==(o=r[5]+"")&&L(t,o),l&1&&T(e,"player1",r[5]>0),l&1&&T(e,"player2",r[5]<0),l&1&&T(e,"small-circle",Math.abs(r[5])===1),l&1&&T(e,"medium-circle",Math.abs(r[5])===2),l&1&&T(e,"large-circle",Math.abs(r[5])===3)},d(r){r&&p(e)}}}function Be(s){let e,o,t,n=[...s[0]].reverse(),r=[];for(let l=0;l<n.length;l+=1)r[l]=ae(ne(s,n,l));return{c(){e=y("button");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=S(l,"BUTTON",{class:!0});var f=P(e);for(let i=0;i<r.length;i+=1)r[i].l(f);f.forEach(p),this.h()},h(){W(e,"class","cell svelte-950i0e"),T(e,"selected",s[1]),T(e,"disabledHand",s[3]),T(e,"disabledCell",s[2])},m(l,f){k(l,e,f);for(let i=0;i<r.length;i+=1)r[i].m(e,null);o||(t=O(e,"click",s[4]),o=!0)},p(l,[f]){if(f&1){n=[...l[0]].reverse();let i;for(i=0;i<n.length;i+=1){const _=ne(l,n,i);r[i]?r[i].p(_,f):(r[i]=ae(_),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}f&2&&T(e,"selected",l[1]),f&8&&T(e,"disabledHand",l[3]),f&4&&T(e,"disabledCell",l[2])},i:G,o:G,d(l){l&&p(e),q(r,l),o=!1,t()}}}function He(s,e,o){let{pieces:t}=e,{selected:n=!1}=e,{disabledCell:r=!1}=e,{disabledHand:l=!1}=e;function f(i){ye.call(this,s,i)}return s.$$set=i=>{"pieces"in i&&o(0,t=i.pieces),"selected"in i&&o(1,n=i.selected),"disabledCell"in i&&o(2,r=i.disabledCell),"disabledHand"in i&&o(3,l=i.disabledHand)},[t,n,r,l,f]}class ke extends V{constructor(e){super(),j(this,e,He,Be,I,{pieces:0,selected:1,disabledCell:2,disabledHand:3})}}function re(s,e,o){const t=s.slice();return t[4]=e[o],t[6]=o,t}function se(s,e,o){const t=s.slice();return t[7]=e[o],t[9]=o,t}function oe(s){let e,o;function t(){return s[3](s[9],s[6])}return e=new ke({props:{pieces:s[7],selected:s[2]({x:s[9],y:s[6]})}}),e.$on("click",t),{c(){$(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){D(e,n,r),o=!0},p(n,r){s=n;const l={};r&1&&(l.pieces=s[7]),e.$set(l)},i(n){o||(C(e.$$.fragment,n),o=!0)},o(n){E(e.$$.fragment,n),o=!1},d(n){U(e,n)}}}function ie(s){let e,o,t=s[4],n=[];for(let l=0;l<t.length;l+=1)n[l]=oe(se(s,t,l));const r=l=>E(n[l],1,1,()=>{n[l]=null});return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=z()},l(l){for(let f=0;f<n.length;f+=1)n[f].l(l);e=z()},m(l,f){for(let i=0;i<n.length;i+=1)n[i].m(l,f);k(l,e,f),o=!0},p(l,f){if(f&7){t=l[4];let i;for(i=0;i<t.length;i+=1){const _=se(l,t,i);n[i]?(n[i].p(_,f),C(n[i],1)):(n[i]=oe(_),n[i].c(),C(n[i],1),n[i].m(e.parentNode,e))}for(F(),i=t.length;i<n.length;i+=1)r(i);J()}},i(l){if(!o){for(let f=0;f<t.length;f+=1)C(n[f]);o=!0}},o(l){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)E(n[f]);o=!1},d(l){q(n,l),l&&p(e)}}}function Oe(s){let e,o,t=JSON.stringify(s[0].state)+"",n,r,l,f,i=s[0].grid,_=[];for(let c=0;c<i.length;c+=1)_[c]=ie(re(s,i,c));const h=c=>E(_[c],1,1,()=>{_[c]=null});return{c(){e=y("div"),o=y("div"),n=w(t),r=N(),l=y("div");for(let c=0;c<_.length;c+=1)_[c].c();this.h()},l(c){e=S(c,"DIV",{class:!0});var d=P(e);o=S(d,"DIV",{});var a=P(o);n=B(a,t),a.forEach(p),r=A(d),l=S(d,"DIV",{class:!0});var m=P(l);for(let u=0;u<_.length;u+=1)_[u].l(m);m.forEach(p),d.forEach(p),this.h()},h(){W(l,"class","overlay svelte-1n6jeyv"),W(e,"class","board svelte-1n6jeyv")},m(c,d){k(c,e,d),v(e,o),v(o,n),v(e,r),v(e,l);for(let a=0;a<_.length;a+=1)_[a].m(l,null);f=!0},p(c,[d]){if((!f||d&1)&&t!==(t=JSON.stringify(c[0].state)+"")&&L(n,t),d&7){i=c[0].grid;let a;for(a=0;a<i.length;a+=1){const m=re(c,i,a);_[a]?(_[a].p(m,d),C(_[a],1)):(_[a]=ie(m),_[a].c(),C(_[a],1),_[a].m(l,null))}for(F(),a=i.length;a<_.length;a+=1)h(a);J()}},i(c){if(!f){for(let d=0;d<i.length;d+=1)C(_[d]);f=!0}},o(c){_=_.filter(Boolean);for(let d=0;d<_.length;d+=1)E(_[d]);f=!1},d(c){c&&p(e),q(_,c)}}}function Ge(s,e,o){let{game:t}=e,{onSelectCell:n}=e;const r=f=>{for(const i of[t.player1,t.player2]){const{selectedPiece:_}=i;if((_==null?void 0:_.from)==="board"&&_.position.x===f.x&&_.position.y===f.y)return!0}return!1},l=(f,i)=>n({x:f,y:i});return s.$$set=f=>{"game"in f&&o(0,t=f.game),"onSelectCell"in f&&o(1,n=f.onSelectCell)},[t,n,r,l]}class Ie extends V{constructor(e){super(),j(this,e,Ge,Oe,I,{game:0,onSelectCell:1})}}function ce(s,e,o){const t=s.slice();return t[3]=e[o],t}function fe(s){let e,o=s[3]+"",t,n;return{c(){e=y("option"),t=w(o),n=N(),this.h()},l(r){e=S(r,"OPTION",{});var l=P(e);t=B(l,o),n=A(l),l.forEach(p),this.h()},h(){e.__value=s[3],e.value=e.__value},m(r,l){k(r,e,l),v(e,t),v(e,n)},p:G,d(r){r&&p(e)}}}function $e(s){let e,o,t=s[0].player2Auto?"Human player 2":"Computer player 2",n,r,l,f,i,_=Object.keys(K),h=[];for(let c=0;c<_.length;c+=1)h[c]=fe(ce(s,_,c));return{c(){e=y("div"),o=y("button"),n=w(t),r=N(),l=y("select");for(let c=0;c<h.length;c+=1)h[c].c();this.h()},l(c){e=S(c,"DIV",{});var d=P(e);o=S(d,"BUTTON",{});var a=P(o);n=B(a,t),a.forEach(p),r=A(d),l=S(d,"SELECT",{});var m=P(l);for(let u=0;u<h.length;u+=1)h[u].l(m);m.forEach(p),d.forEach(p),this.h()},h(){s[0].player2Strat===void 0&&Se(()=>s[2].call(l))},m(c,d){k(c,e,d),v(e,o),v(o,n),v(e,r),v(e,l);for(let a=0;a<h.length;a+=1)h[a].m(l,null);ee(l,s[0].player2Strat),f||(i=[O(o,"click",s[1]),O(l,"change",s[2])],f=!0)},p(c,[d]){if(d&1&&t!==(t=c[0].player2Auto?"Human player 2":"Computer player 2")&&L(n,t),d&0){_=Object.keys(K);let a;for(a=0;a<_.length;a+=1){const m=ce(c,_,a);h[a]?h[a].p(m,d):(h[a]=fe(m),h[a].c(),h[a].m(l,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=_.length}d&1&&ee(l,c[0].player2Strat)},i:G,o:G,d(c){c&&p(e),q(h,c),f=!1,ge(i)}}}function Me(s,e,o){let t;ve(s,R,l=>o(0,t=l));const n=()=>Pe(R,t.player2Auto=!t.player2Auto,t);function r(){t.player2Strat=Ce(this),R.set(t)}return[t,n,r]}class De extends V{constructor(e){super(),j(this,e,Me,$e,I,{})}}function ue(s,e,o){const t=s.slice();return t[10]=e[o],t[12]=o,t}function _e(s){let e,o,t,n,r,l,f,i,_,h,c,d,a,m,u,g;return{c(){e=y("button"),o=w("Random"),t=N(),n=y("button"),r=w("Win or random"),l=N(),f=y("button"),i=w("Euristic"),_=N(),h=y("button"),c=w("MinMax"),d=N(),a=y("button"),m=w("AlphaBeta ordered")},l(b){e=S(b,"BUTTON",{});var H=P(e);o=B(H,"Random"),H.forEach(p),t=A(b),n=S(b,"BUTTON",{});var X=P(n);r=B(X,"Win or random"),X.forEach(p),l=A(b),f=S(b,"BUTTON",{});var Y=P(f);i=B(Y,"Euristic"),Y.forEach(p),_=A(b),h=S(b,"BUTTON",{});var Z=P(h);c=B(Z,"MinMax"),Z.forEach(p),d=A(b),a=S(b,"BUTTON",{});var x=P(a);m=B(x,"AlphaBeta ordered"),x.forEach(p)},m(b,H){k(b,e,H),v(e,o),k(b,t,H),k(b,n,H),v(n,r),k(b,l,H),k(b,f,H),v(f,i),k(b,_,H),k(b,h,H),v(h,c),k(b,d,H),k(b,a,H),v(a,m),u||(g=[O(e,"click",s[4]),O(n,"click",s[5]),O(f,"click",s[6]),O(h,"click",s[7]),O(a,"click",s[8])],u=!0)},p:G,d(b){b&&p(e),b&&p(t),b&&p(n),b&&p(l),b&&p(f),b&&p(_),b&&p(h),b&&p(d),b&&p(a),u=!1,ge(g)}}}function de(s){var n;let e,o;function t(){return s[9](s[12])}return e=new ke({props:{disabledHand:s[1],disabledCell:s[0].unselectableIndexes.has(s[12]),pieces:[s[10]],selected:((n=s[0].selectedPiece)==null?void 0:n.from)==="hand"&&s[0].selectedPiece.index===s[12]}}),e.$on("click",t),{c(){$(e.$$.fragment)},l(r){M(e.$$.fragment,r)},m(r,l){D(e,r,l),o=!0},p(r,l){var i;s=r;const f={};l&2&&(f.disabledHand=s[1]),l&1&&(f.disabledCell=s[0].unselectableIndexes.has(s[12])),l&1&&(f.pieces=[s[10]]),l&1&&(f.selected=((i=s[0].selectedPiece)==null?void 0:i.from)==="hand"&&s[0].selectedPiece.index===s[12]),e.$set(f)},i(r){o||(C(e.$$.fragment,r),o=!0)},o(r){E(e.$$.fragment,r),o=!1},d(r){U(e,r)}}}function Ue(s){let e,o,t=s[0].player+"",n,r,l,f,i,_=!s[1]&&_e(s),h=s[0].pieces,c=[];for(let a=0;a<h.length;a+=1)c[a]=de(ue(s,h,a));const d=a=>E(c[a],1,1,()=>{c[a]=null});return{c(){e=y("span"),o=w("Player "),n=w(t),r=N(),_&&_.c(),l=N(),f=y("div");for(let a=0;a<c.length;a+=1)c[a].c();this.h()},l(a){e=S(a,"SPAN",{});var m=P(e);o=B(m,"Player "),n=B(m,t),m.forEach(p),r=A(a),_&&_.l(a),l=A(a),f=S(a,"DIV",{class:!0});var u=P(f);for(let g=0;g<c.length;g+=1)c[g].l(u);u.forEach(p),this.h()},h(){W(f,"class","overlay svelte-rwgxl1")},m(a,m){k(a,e,m),v(e,o),v(e,n),k(a,r,m),_&&_.m(a,m),k(a,l,m),k(a,f,m);for(let u=0;u<c.length;u+=1)c[u].m(f,null);i=!0},p(a,[m]){if((!i||m&1)&&t!==(t=a[0].player+"")&&L(n,t),a[1]?_&&(_.d(1),_=null):_?_.p(a,m):(_=_e(a),_.c(),_.m(l.parentNode,l)),m&7){h=a[0].pieces;let u;for(u=0;u<h.length;u+=1){const g=ue(a,h,u);c[u]?(c[u].p(g,m),C(c[u],1)):(c[u]=de(g),c[u].c(),C(c[u],1),c[u].m(f,null))}for(F(),u=h.length;u<c.length;u+=1)d(u);J()}},i(a){if(!i){for(let m=0;m<h.length;m+=1)C(c[m]);i=!0}},o(a){c=c.filter(Boolean);for(let m=0;m<c.length;m+=1)E(c[m]);i=!1},d(a){a&&p(e),a&&p(r),_&&_.d(a),a&&p(l),a&&p(f),q(c,a)}}}function Ve(s,e,o){let{hand:t}=e,{disabled:n}=e,{onSelectPiece:r}=e,{onSelectAuto:l}=e;const f=()=>l(t,"random"),i=()=>l(t,"win_or_random"),_=()=>l(t,"euristic"),h=()=>l(t,"minmax"),c=()=>l(t,"alphabeta_ordered"),d=a=>r(t,a);return s.$$set=a=>{"hand"in a&&o(0,t=a.hand),"disabled"in a&&o(1,n=a.disabled),"onSelectPiece"in a&&o(2,r=a.onSelectPiece),"onSelectAuto"in a&&o(3,l=a.onSelectAuto)},[t,n,r,l,f,i,_,h,c,d]}class me extends V{constructor(e){super(),j(this,e,Ve,Ue,I,{hand:0,disabled:1,onSelectPiece:2,onSelectAuto:3})}}function he(s){let e,o;return e=new Ie({props:{onSelectCell:s[1],game:s[0]}}),{c(){$(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,n){D(e,t,n),o=!0},p(t,n){const r={};n&1&&(r.game=t[0]),e.$set(r)},i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){E(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}function pe(s){let e,o,t,n,r,l,f=s[0].state.player+"",i,_,h,c,d,a;return{c(){e=y("div"),o=y("span"),t=w("Game over!"),n=N(),r=y("span"),l=w("Winner: Player "),i=w(f),_=N(),h=y("button"),c=w("Play again")},l(m){e=S(m,"DIV",{});var u=P(e);o=S(u,"SPAN",{});var g=P(o);t=B(g,"Game over!"),g.forEach(p),n=A(u),r=S(u,"SPAN",{});var b=P(r);l=B(b,"Winner: Player "),i=B(b,f),b.forEach(p),_=A(u),h=S(u,"BUTTON",{});var H=P(h);c=B(H,"Play again"),H.forEach(p),u.forEach(p)},m(m,u){k(m,e,u),v(e,o),v(o,t),v(e,n),v(e,r),v(r,l),v(r,i),v(e,_),v(e,h),v(h,c),d||(a=O(h,"click",s[4]),d=!0)},p(m,u){u&1&&f!==(f=m[0].state.player+"")&&L(i,f)},d(m){m&&p(e),d=!1,a()}}}function be(s){let e,o,t,n;return e=new me({props:{onSelectAuto:s[3],onSelectPiece:s[2],hand:Q(s[0]),disabled:!1}}),t=new me({props:{onSelectAuto:s[3],onSelectPiece:s[2],hand:te(s[0]),disabled:!0}}),{c(){$(e.$$.fragment),o=N(),$(t.$$.fragment)},l(r){M(e.$$.fragment,r),o=A(r),M(t.$$.fragment,r)},m(r,l){D(e,r,l),k(r,o,l),D(t,r,l),n=!0},p(r,l){const f={};l&1&&(f.hand=Q(r[0])),e.$set(f);const i={};l&1&&(i.hand=te(r[0])),t.$set(i)},i(r){n||(C(e.$$.fragment,r),C(t.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),E(t.$$.fragment,r),n=!1},d(r){U(e,r),r&&p(o),U(t,r)}}}function je(s){let e,o,t,n,r,l=s[0],f,i,_=s[0],h,c;n=new De({});let d=he(s),a=s[0].state.action==="winner"&&pe(s),m=be(s);return{c(){e=y("h2"),o=w("Game"),t=N(),$(n.$$.fragment),r=N(),d.c(),f=N(),a&&a.c(),i=N(),m.c(),h=z()},l(u){e=S(u,"H2",{});var g=P(e);o=B(g,"Game"),g.forEach(p),t=A(u),M(n.$$.fragment,u),r=A(u),d.l(u),f=A(u),a&&a.l(u),i=A(u),m.l(u),h=z()},m(u,g){k(u,e,g),v(e,o),k(u,t,g),D(n,u,g),k(u,r,g),d.m(u,g),k(u,f,g),a&&a.m(u,g),k(u,i,g),m.m(u,g),k(u,h,g),c=!0},p(u,[g]){g&1&&I(l,l=u[0])?(F(),E(d,1,1,G),J(),d=he(u),d.c(),C(d,1),d.m(f.parentNode,f)):d.p(u,g),u[0].state.action==="winner"?a?a.p(u,g):(a=pe(u),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null),g&1&&I(_,_=u[0])?(F(),E(m,1,1,G),J(),m=be(u),m.c(),C(m,1),m.m(h.parentNode,h)):m.p(u,g)},i(u){c||(C(n.$$.fragment,u),C(d),C(m),c=!0)},o(u){E(n.$$.fragment,u),E(d),E(m),c=!1},d(u){u&&p(e),u&&p(t),U(n,u),u&&p(r),d.d(u),u&&p(f),a&&a.d(u),u&&p(i),u&&p(h),m.d(u)}}}function We(s,e,o){let t;ve(s,R,c=>o(6,t=c));let n=le(),r=0;const l=()=>{if(["winner","select2"].includes(n.state.action)||n.state.player!==n.player2.player||!t.player2Auto)return;const c=K[t.player2Strat];setTimeout(()=>{c(n,n.player2),o(0,n)},500)};return[n,({x:c,y:d})=>{try{if(n.state.action==="select2"){Ee(n,{x:c,y:d})===0&&l(),o(0,n);return}const a=Q(n);Ne(n,a,{x:c,y:d}),o(0,n),o(0,n)}catch(a){console.error("Could not select cell"),console.error(a),console.error("Game should be able to keep working")}},(c,d)=>{try{Ae(n,c,d)}catch(a){console.error("Could not select piece"),console.error(a),console.error("Game should be able to keep working")}o(0,n)},(c,d)=>{const a=K[d];a(n,c),l(),o(0,n)},()=>{r++;const c=r%2===1;o(0,n=le({player2Start:c})),c&&t.player2Auto&&l()}]}class Fe extends V{constructor(e){super(),j(this,e,We,je,I,{})}}function Je(s){let e,o;return e=new Fe({}),{c(){$(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,n){D(e,t,n),o=!0},p:G,i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){E(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}class ze extends V{constructor(e){super(),j(this,e,null,Je,I,{})}}export{ze as default};
