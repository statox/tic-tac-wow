import{S as y,i as Y,s as x,k as M,q as C,a as L,w as O,l as $,m as w,r as S,h as P,c as U,x as R,n as W,b as _,D as N,y as d,B as v,f as A,t as k,z as D,U as V}from"../../../chunks/index-e565ab33.js";import{P as p}from"../../../chunks/P5-94ccbc05.js";var a=(e=>(e[e.EMPTY=0]="EMPTY",e[e.PLAYER=1]="PLAYER",e[e.COMPUTER=-1]="COMPUTER",e))(a||{}),m=(e=>(e[e.NOT_OVER=0]="NOT_OVER",e[e.PLAYER=1]="PLAYER",e[e.COMPUTER=-1]="COMPUTER",e[e.DRAW=2]="DRAW",e))(m||{});function H(e,n){const t=e.width/3,r=e.height/3,{height:f,width:l}=e;e.noFill(),e.stroke(255),e.line(t,0,t,f),e.line(t*2,0,t*2,f),e.line(0,r,l,r),e.line(0,r*2,l,r*2);for(let o=0;o<3;o++)for(let s=0;s<3;s++)n[o][s]===1&&(e.stroke("blue"),e.circle(s*t+t/2,o*r+r/2,r/2)),n[o][s]===-1&&(e.stroke("red"),e.line(s*t+t*.3,o*r+r*.3,s*t+t*.7,o*r+r*.7),e.line(s*t+t*.7,o*r+r*.3,s*t+t*.3,o*r+r*.7))}function X(e,n,t,r,f,l,o){const s=Math.floor(e.map(n,0,r,0,l)),c=Math.floor(e.map(t,0,f,0,o));return{x:s,y:c}}function q(){const e=[];for(let n=0;n<3;n++){e.push([]);for(let t=0;t<3;t++)e[e.length-1].push(a.EMPTY)}return e}function F(e){for(let n=0;n<3;n++)for(let t=0;t<3;t++)if(e[n][t]===a.EMPTY)return!0;return!1}function I(e){let n=!1;for(let t=0;t<3;t++)if(e[t][0]===a.EMPTY)n=!0;else if(e[t][0]===e[t][1]&&e[t][0]===e[t][2])return e[t][0];for(let t=0;t<3;t++)if(e[0][t]===a.EMPTY)n=!0;else if(e[0][t]===e[1][t]&&e[0][t]===e[2][t])return e[0][t];if(e[1][1]===a.EMPTY)n=!0;else if(e[0][0]===e[1][1]&&e[0][0]===e[2][2])return e[0][0];return e[0][2]!==a.EMPTY&&e[0][2]===e[1][1]&&e[0][2]===e[2][0]?e[0][2]:n?m.NOT_OVER:m.DRAW}function j(e){let n,t,r,f,l,o;return l=new p({props:{sketch:e[0]}}),{c(){n=M("h2"),t=C("Tic Tac Toe"),r=L(),f=M("div"),O(l.$$.fragment),this.h()},l(s){n=$(s,"H2",{});var c=w(n);t=S(c,"Tic Tac Toe"),c.forEach(P),r=U(s),f=$(s,"DIV",{class:!0});var i=w(f);R(l.$$.fragment,i),i.forEach(P),this.h()},h(){W(f,"class","d-flex justify-content-center")},m(s,c){_(s,n,c),N(n,t),_(s,r,c),_(s,f,c),d(l,f,null),o=!0},p:v,i(s){o||(A(l.$$.fragment,s),o=!0)},o(s){k(l.$$.fragment,s),o=!1},d(s){s&&P(n),s&&P(r),s&&P(f),D(l)}}}function z(e){let n,t,r,f=!1;function l(i,u){t[u][i]===a.EMPTY&&(t[u][i]=a.PLAYER)}function o(){const i=[];for(let h=0;h<3;h++)for(let T=0;T<3;T++)t[h][T]===0&&i.push({x:T,y:h});if(i.length===0)throw new Error("Can't play on a filled board");const u=Math.floor(Math.random()*i.length),{x:g,y:E}=i[u];t[E][g]=a.COMPUTER}function s(){r&&r.html(""),f=!1,t=q(),Math.random()<.5&&o()}const c=i=>{i.setup=()=>{n=i,i.createCanvas(400,400),r=i.createSpan(""),s()},i.draw=()=>{i.background(0),H(i,t)},i.mousePressed=()=>{if(f||i.mouseX<0||i.mouseY<0||i.mouseX>i.width||i.mouseY>i.height)return;const{x:u,y:g}=X(i,i.mouseX,i.mouseY,i.width,i.height,t[0].length,t.length);l(u,g),F(t)&&o();let E=I(t);if(E!==m.NOT_OVER){if(E===m.DRAW)r.html("Draw. Game will reset in 4 seconds");else{const h=E===m.PLAYER?"Player":" Computer";r.html(h+" wins. Game will reset in 4 seconds")}f=!0,setTimeout(s,4e3)}}};return V(()=>{n==null||n.remove()}),[c]}class J extends y{constructor(n){super(),Y(this,n,z,j,x,{})}}function K(e){let n,t;return n=new J({}),{c(){O(n.$$.fragment)},l(r){R(n.$$.fragment,r)},m(r,f){d(n,r,f),t=!0},p:v,i(r){t||(A(n.$$.fragment,r),t=!0)},o(r){k(n.$$.fragment,r),t=!1},d(r){D(n,r)}}}class B extends y{constructor(n){super(),Y(this,n,null,K,x,{})}}export{B as default};
