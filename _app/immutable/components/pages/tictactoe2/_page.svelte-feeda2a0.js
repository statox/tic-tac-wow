import{S as ne,i as re,s as se,C as dt,k as $,l as b,m as g,h as c,n as V,b as D,N as ve,E as _t,F as mt,G as ht,f as X,t as H,H as $e,a0 as qn,o as Hn,j as jn,W as tn,I as Sn,a1 as Rn,A as Kn,$ as Jn,g as Qn,d as Zn,q as y,a as w,r as P,c as E,D as a,B as jt,u as G,w as j,x as K,y as J,z as Q,P as xn}from"../../../chunks/index-1d785069.js";import{w as qe}from"../../../chunks/index-c5a64178.js";import{P as Wn}from"../../../chunks/P5-76a6b36f.js";let er=1;function Fn(){return`svelte-tabs-${er++}`}function tr(t){let e,r,n,s;const l=t[4].default,f=dt(l,t,t[3],null);return{c(){e=$("div"),f&&f.c(),this.h()},l(o){e=b(o,"DIV",{class:!0});var i=g(e);f&&f.l(i),i.forEach(c),this.h()},h(){V(e,"class","svelte-tabs")},m(o,i){D(o,e,i),f&&f.m(e,null),r=!0,n||(s=ve(e,"keydown",t[1]),n=!0)},p(o,[i]){f&&f.p&&(!r||i&8)&&_t(f,l,o,o[3],r?ht(l,o[3],i,null):mt(o[3]),null)},i(o){r||(X(f,o),r=!0)},o(o){H(f,o),r=!1},d(o){o&&c(e),f&&f.d(o),n=!1,s()}}}const nn={};function nr(t,e,r){const n=t.indexOf(e);t.splice(n,1),r.update(s=>s===e?t[n]||t[t.length-1]:s)}function rr(t,e,r){let n,{$$slots:s={},$$scope:l}=e,{initialSelectedIndex:f=0}=e;const o=[],i=[],p=[],d=qe({}),v=qe({}),k=qe(null);$e(t,k,u=>r(5,n=u));const N=qe(null);function I(u,h,M){u.push(h),M.update(L=>L||h),tn(()=>nr(u,h,M))}function m(u){const h=i.indexOf(u);k.set(u),N.set(p[h])}qn(nn,{registerTab(u){I(i,u,k)},registerTabElement(u){o.push(u)},registerPanel(u){I(p,u,N)},selectTab:m,selectedTab:k,selectedPanel:N,controls:d,labeledBy:v}),Hn(()=>{m(i[f])}),jn(()=>{for(let u=0;u<i.length;u++)d.update(h=>({...h,[i[u].id]:p[u].id})),v.update(h=>({...h,[p[u].id]:i[u].id}))});async function _(u){if(u.target.classList.contains("svelte-tabs__tab")){let h=i.indexOf(n);switch(u.key){case"ArrowRight":h+=1,h>i.length-1&&(h=0),m(i[h]),o[h].focus();break;case"ArrowLeft":h-=1,h<0&&(h=i.length-1),m(i[h]),o[h].focus()}}}return t.$$set=u=>{"initialSelectedIndex"in u&&r(2,f=u.initialSelectedIndex),"$$scope"in u&&r(3,l=u.$$scope)},[k,_,f,l,s]}class sr extends ne{constructor(e){super(),re(this,e,rr,tr,se,{initialSelectedIndex:2})}}function lr(t){let e,r,n,s,l,f;const o=t[9].default,i=dt(o,t,t[8],null);return{c(){e=$("li"),i&&i.c(),this.h()},l(p){e=b(p,"LI",{role:!0,id:!0,"aria-controls":!0,"aria-selected":!0,tabindex:!0,class:!0});var d=g(e);i&&i.l(d),d.forEach(c),this.h()},h(){V(e,"role","tab"),V(e,"id",t[3].id),V(e,"aria-controls",r=t[2][t[3].id]),V(e,"aria-selected",t[1]),V(e,"tabindex",n=t[1]?0:-1),V(e,"class","svelte-tabs__tab svelte-1fbofsd"),Sn(e,"svelte-tabs__selected",t[1])},m(p,d){D(p,e,d),i&&i.m(e,null),t[10](e),s=!0,l||(f=ve(e,"click",t[11]),l=!0)},p(p,[d]){i&&i.p&&(!s||d&256)&&_t(i,o,p,p[8],s?ht(o,p[8],d,null):mt(p[8]),null),(!s||d&4&&r!==(r=p[2][p[3].id]))&&V(e,"aria-controls",r),(!s||d&2)&&V(e,"aria-selected",p[1]),(!s||d&2&&n!==(n=p[1]?0:-1))&&V(e,"tabindex",n),(!s||d&2)&&Sn(e,"svelte-tabs__selected",p[1])},i(p){s||(X(i,p),s=!0)},o(p){H(i,p),s=!1},d(p){p&&c(e),i&&i.d(p),t[10](null),l=!1,f()}}}function or(t,e,r){let n,s,{$$slots:l={},$$scope:f}=e,o;const i={id:Fn()},{registerTab:p,registerTabElement:d,selectTab:v,selectedTab:k,controls:N}=Rn(nn);$e(t,k,u=>r(7,n=u)),$e(t,N,u=>r(2,s=u));let I;p(i),Hn(async()=>{await Kn(),d(o)});function m(u){Jn[u?"unshift":"push"](()=>{o=u,r(0,o)})}const _=()=>v(i);return t.$$set=u=>{"$$scope"in u&&r(8,f=u.$$scope)},t.$$.update=()=>{t.$$.dirty&128&&r(1,I=n===i)},[o,I,s,i,v,k,N,n,f,l,m,_]}class In extends ne{constructor(e){super(),re(this,e,or,lr,se,{})}}function ar(t){let e,r;const n=t[1].default,s=dt(n,t,t[0],null);return{c(){e=$("ul"),s&&s.c(),this.h()},l(l){e=b(l,"UL",{role:!0,class:!0});var f=g(e);s&&s.l(f),f.forEach(c),this.h()},h(){V(e,"role","tablist"),V(e,"class","svelte-tabs__tab-list svelte-12yby2a")},m(l,f){D(l,e,f),s&&s.m(e,null),r=!0},p(l,[f]){s&&s.p&&(!r||f&1)&&_t(s,n,l,l[0],r?ht(n,l[0],f,null):mt(l[0]),null)},i(l){r||(X(s,l),r=!0)},o(l){H(s,l),r=!1},d(l){l&&c(e),s&&s.d(l)}}}function ir(t,e,r){let{$$slots:n={},$$scope:s}=e;return t.$$set=l=>{"$$scope"in l&&r(0,s=l.$$scope)},[s,n]}class fr extends ne{constructor(e){super(),re(this,e,ir,ar,se,{})}}function An(t){let e;const r=t[6].default,n=dt(r,t,t[5],null);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,l){n&&n.m(s,l),e=!0},p(s,l){n&&n.p&&(!e||l&32)&&_t(n,r,s,s[5],e?ht(r,s[5],l,null):mt(s[5]),null)},i(s){e||(X(n,s),e=!0)},o(s){H(n,s),e=!1},d(s){n&&n.d(s)}}}function ur(t){let e,r,n,s=t[1]===t[2]&&An(t);return{c(){e=$("div"),s&&s.c(),this.h()},l(l){e=b(l,"DIV",{id:!0,"aria-labelledby":!0,class:!0,role:!0});var f=g(e);s&&s.l(f),f.forEach(c),this.h()},h(){V(e,"id",t[2].id),V(e,"aria-labelledby",r=t[0][t[2].id]),V(e,"class","svelte-tabs__tab-panel svelte-epfyet"),V(e,"role","tabpanel")},m(l,f){D(l,e,f),s&&s.m(e,null),n=!0},p(l,[f]){l[1]===l[2]?s?(s.p(l,f),f&2&&X(s,1)):(s=An(l),s.c(),X(s,1),s.m(e,null)):s&&(Qn(),H(s,1,1,()=>{s=null}),Zn()),(!n||f&1&&r!==(r=l[0][l[2].id]))&&V(e,"aria-labelledby",r)},i(l){n||(X(s),n=!0)},o(l){H(s),n=!1},d(l){l&&c(e),s&&s.d()}}}function cr(t,e,r){let n,s,{$$slots:l={},$$scope:f}=e;const o={id:Fn()},{registerPanel:i,selectedPanel:p,labeledBy:d}=Rn(nn);return $e(t,p,v=>r(1,s=v)),$e(t,d,v=>r(0,n=v)),i(o),t.$$set=v=>{"$$scope"in v&&r(5,f=v.$$scope)},[n,s,o,p,d,f,l]}class Tn extends ne{constructor(e){super(),re(this,e,cr,ur,se,{})}}function fe(t){const{x:e,y:r}=t;if(e<0||e>2||r<0||r>2)throw new Error(`Invalid coords (${e},${r})`);return 8-(3*r+e)}function pr(t){if(t<0||t>8)throw new Error("Invalid index ${i}");return{x:2-t%3,y:2-Math.floor(t/3)}}const dr=[448,56,7,292,146,73,273,84],_r=[{p:16,o:40},{p:16,o:130}],mr=[{p:1,o:6},{p:1,o:72}],hr=[{p:2,o:5},{p:2,o:144}],ce=(t,e)=>(t&e)===e;function Nn(t){let e=t,r=0;for(;e;)r+=e&1,e>>=1;return r}function Mn(t,e){const r=fe(e);return Ze(t,r)}function Ze(t,e){return!(t&1<<e)}function Kt(t,e){return t+2**e}const Jt=t=>{for(const e of dr)if(ce(t,e))return!0;return!1};var S=(t=>(t[t.player=1]="player",t[t.computer=2]="computer",t))(S||{});function Gn(){return{player:0,computer:0,toString:function(){return`player ${this.player.toString(2).padStart(9,"0")} computer ${this.computer.toString(2).padStart(9,"0")}`}}}function ut(t,e){return e===S.player?t.player:t.computer}function ct(t,e){return e===S.player?t.computer:t.player}function Qe(t,e){if(!e&&!vr(t))return"invalid_board";const r=Jt(t.player),n=Jt(t.computer);return r&&n?"draw":r?"player_win":n?"computer_win":br(t)?"not_over":"over"}function pt(t,e,r){if(!$r(t,r))throw new Error(`Impossible move. player: ${t==null?void 0:t.player}, computer: ${t==null?void 0:t.computer}, index ${r} `);e===S.player?t.player=Kt(t.player,r):t.computer=Kt(t.computer,r)}function vr(t){if(t.player&t.computer)return!1;const e=Nn(t.player),r=Nn(t.computer);return!(Math.abs(e-r)>1)}function $r(t,e){return Ze(t.player,e)&&Ze(t.computer,e)}function br(t){return(t.player|t.computer)!==511}function gr(t){let e=t.player|t.computer;if(e===0)return[0,1,2,3,4,5,6,7,8];if(e===511)return[];const r=[];let n=0;for(;n<9;)e&1||r.push(n),n++,e>>=1;return r}function Un(t,e,r){const n=t.width/3,s=t.height/3,{height:l,width:f}=t,{drawSelection:o,selection:i,currentPlayer:p}=r||{};t.noFill(),t.stroke(255),t.line(n,0,n,l),t.line(n*2,0,n*2,l),t.line(0,s,f,s),t.line(0,s*2,f,s*2);for(let d=0;d<3;d++)for(let v=0;v<3;v++)(!Mn(e.player,{x:v,y:d})||o&&p===S.player&&(i==null?void 0:i.x)===v&&(i==null?void 0:i.y)===d)&&(t.stroke("blue"),t.circle(v*n+n/2,d*s+s/2,s/2)),(!Mn(e.computer,{x:v,y:d})||o&&p===S.computer&&(i==null?void 0:i.x)===v&&(i==null?void 0:i.y)===d)&&(t.stroke("red"),t.line(v*n+n*.3,d*s+s*.3,v*n+n*.7,d*s+s*.7),t.line(v*n+n*.7,d*s+s*.3,v*n+n*.3,d*s+s*.7))}function Qt(t){const{mouseX:e,mouseY:r,width:n,height:s}=t,l=Math.floor(t.map(e,0,n,0,3)),f=Math.floor(t.map(r,0,s,0,3));return{x:l,y:f}}const yr=[2,5,8,1,4,7,0,3,6];function Bn(t){let e=0;return yr.forEach((r,n)=>{Ze(t,n)||(e=Kt(e,r))}),e}function Cn(t,e){if(e<0)throw new Error("Cant rotate a negative amount of times");if(e===0)return{...t};e=e%4;const r={...t};for(let n=0;n<e;n++)r.player=Bn(r.player),r.computer=Bn(r.computer);return r}function je(t,e){const r=ut(t,e);return Jt(r)}function Zt(t){return(t==null?void 0:t.y)===1&&(t==null?void 0:t.x)===1}function Ke(t,e,r){const n=fe(r),s=ut(t,e),l=ct(t,e);for(const{o:f,p:o}of _r)if(ce(s,o)&&ce(l,f))return!0;if(rn.has(n)){const f={0:0,2:3,6:1,8:2}[n]||0,o=Cn(t,f),i=ut(o,e),p=ct(o,e);for(const{o:d,p:v}of mr)if(ce(i,v)&&ce(p,d))return!0}if(zn.has(n)){const f={1:0,3:1,5:3,7:2}[n]||0,o=Cn(t,f),i=ut(o,e),p=ct(o,e);for(const{o:d,p:v}of hr)if(ce(i,v)&&ce(p,d))return!0}return!1}const rn=new Set([0,2,6,8]),zn=new Set([1,3,5,7]);function Je(t,e,r){const n=fe(r);if(!rn.has(n))return!1;const s=8-n,l=ct(t,e);return!Ze(l,s)}function xt(t){const e=fe(t);return rn.has(e)}function en(t){const e=fe(t);return zn.has(e)}function Ln(t){var sn,ln;let e,r,n,s,l,f=Qe(t[0])+"",o,i,p,d,v,k,N,I=((sn=t[1])==null?void 0:sn.x)+"",m,_,u=((ln=t[1])==null?void 0:ln.y)+"",h,M,L,F,te=Zt(t[1])?"✅":"❌",x,ue,ee,Z,q=xt(t[1])?"✅":"❌",le,pe,T,U,z=en(t[1])?"✅":"❌",Y,de,C,oe,_e,ae,vt,$t,me,bt,be=t[0].player.toString(2).padStart(9,"0")+"",xe,gt,ge,ye=t[0].player+"",et,yt,Pe,Pt,we,Ee=je(t[0],S.player)?"✅":"❌",tt,wt,ke,Et,kt,Se,Ie=Je(t[0],S.player,t[1])?"✅":"❌",nt,St,Ae,It,At,Te,Ne=Ke(t[0],S.player,t[1])?"✅":"❌",rt,Tt,O,Me,Nt,Be,Mt,Bt,he,Ct,Ce=t[0].computer.toString(2).padStart(9,"0")+"",st,Lt,Le,Oe=t[0].computer+"",lt,Ot,De,Dt,Ve,Xe=je(t[0],S.computer)?"✅":"❌",ot,Vt,He,Xt,Ht,Re,We=Je(t[0],S.computer,t[1])?"✅":"❌",at,Rt,Fe,Wt,Ft,Ge,Ue=Ke(t[0],S.computer,t[1])?"✅":"❌",it;return{c(){e=$("div"),r=$("span"),n=y("State:"),s=w(),l=$("span"),o=y(f),i=w(),p=$("span"),d=y("Last move"),v=w(),k=$("ul"),N=$("li"),m=y(I),_=y(","),h=y(u),M=w(),L=$("li"),F=y("center "),x=y(te),ue=w(),ee=$("li"),Z=y("corner "),le=y(q),pe=w(),T=$("li"),U=y("side "),Y=y(z),de=w(),C=$("div"),oe=$("span"),_e=y("Player 1"),ae=$("span"),vt=y("Player, O"),$t=w(),me=$("span"),bt=y("0b"),xe=y(be),gt=w(),ge=$("span"),et=y(ye),yt=w(),Pe=$("span"),Pt=y("Wins"),we=$("span"),tt=y(Ee),wt=w(),ke=$("span"),Et=y("Last move took opposite corner"),kt=w(),Se=$("span"),nt=y(Ie),St=w(),Ae=$("span"),It=y("Last move blocks opponent"),At=w(),Te=$("span"),rt=y(Ne),Tt=w(),O=$("div"),Me=$("span"),Nt=y("Player 2"),Be=$("span"),Mt=y("Computer, X"),Bt=w(),he=$("span"),Ct=y("0b"),st=y(Ce),Lt=w(),Le=$("span"),lt=y(Oe),Ot=w(),De=$("span"),Dt=y("Wins"),Ve=$("span"),ot=y(Xe),Vt=w(),He=$("span"),Xt=y("Last move took opposite corner"),Ht=w(),Re=$("span"),at=y(We),Rt=w(),Fe=$("span"),Wt=y("Last move blocks opponent"),Ft=w(),Ge=$("span"),it=y(Ue),this.h()},l(B){e=b(B,"DIV",{class:!0});var A=g(e);r=b(A,"SPAN",{});var ze=g(r);n=P(ze,"State:"),ze.forEach(c),s=E(A),l=b(A,"SPAN",{});var Ye=g(l);o=P(Ye,f),Ye.forEach(c),i=E(A),p=b(A,"SPAN",{});var on=g(p);d=P(on,"Last move"),on.forEach(c),v=E(A),k=b(A,"UL",{});var ie=g(k);N=b(ie,"LI",{});var ft=g(N);m=P(ft,I),_=P(ft,","),h=P(ft,u),ft.forEach(c),M=E(ie),L=b(ie,"LI",{});var Gt=g(L);F=P(Gt,"center "),x=P(Gt,te),Gt.forEach(c),ue=E(ie),ee=b(ie,"LI",{});var Ut=g(ee);Z=P(Ut,"corner "),le=P(Ut,q),Ut.forEach(c),pe=E(ie),T=b(ie,"LI",{});var zt=g(T);U=P(zt,"side "),Y=P(zt,z),zt.forEach(c),ie.forEach(c),de=E(A),C=b(A,"DIV",{class:!0});var R=g(C);oe=b(R,"SPAN",{});var an=g(oe);_e=P(an,"Player 1"),an.forEach(c),ae=b(R,"SPAN",{});var fn=g(ae);vt=P(fn,"Player, O"),fn.forEach(c),$t=E(R),me=b(R,"SPAN",{});var Yt=g(me);bt=P(Yt,"0b"),xe=P(Yt,be),Yt.forEach(c),gt=E(R),ge=b(R,"SPAN",{});var un=g(ge);et=P(un,ye),un.forEach(c),yt=E(R),Pe=b(R,"SPAN",{});var cn=g(Pe);Pt=P(cn,"Wins"),cn.forEach(c),we=b(R,"SPAN",{});var pn=g(we);tt=P(pn,Ee),pn.forEach(c),wt=E(R),ke=b(R,"SPAN",{});var dn=g(ke);Et=P(dn,"Last move took opposite corner"),dn.forEach(c),kt=E(R),Se=b(R,"SPAN",{});var _n=g(Se);nt=P(_n,Ie),_n.forEach(c),St=E(R),Ae=b(R,"SPAN",{});var mn=g(Ae);It=P(mn,"Last move blocks opponent"),mn.forEach(c),At=E(R),Te=b(R,"SPAN",{});var hn=g(Te);rt=P(hn,Ne),hn.forEach(c),R.forEach(c),Tt=E(A),O=b(A,"DIV",{class:!0});var W=g(O);Me=b(W,"SPAN",{});var vn=g(Me);Nt=P(vn,"Player 2"),vn.forEach(c),Be=b(W,"SPAN",{});var $n=g(Be);Mt=P($n,"Computer, X"),$n.forEach(c),Bt=E(W),he=b(W,"SPAN",{});var qt=g(he);Ct=P(qt,"0b"),st=P(qt,Ce),qt.forEach(c),Lt=E(W),Le=b(W,"SPAN",{});var bn=g(Le);lt=P(bn,Oe),bn.forEach(c),Ot=E(W),De=b(W,"SPAN",{});var gn=g(De);Dt=P(gn,"Wins"),gn.forEach(c),Ve=b(W,"SPAN",{});var yn=g(Ve);ot=P(yn,Xe),yn.forEach(c),Vt=E(W),He=b(W,"SPAN",{});var Pn=g(He);Xt=P(Pn,"Last move took opposite corner"),Pn.forEach(c),Ht=E(W),Re=b(W,"SPAN",{});var wn=g(Re);at=P(wn,We),wn.forEach(c),Rt=E(W),Fe=b(W,"SPAN",{});var En=g(Fe);Wt=P(En,"Last move blocks opponent"),En.forEach(c),Ft=E(W),Ge=b(W,"SPAN",{});var kn=g(Ge);it=P(kn,Ue),kn.forEach(c),W.forEach(c),A.forEach(c),this.h()},h(){V(C,"class","grid2cols svelte-1lw5ne4"),V(O,"class","grid2cols svelte-1lw5ne4"),V(e,"class","grid2cols svelte-1lw5ne4")},m(B,A){D(B,e,A),a(e,r),a(r,n),a(e,s),a(e,l),a(l,o),a(e,i),a(e,p),a(p,d),a(e,v),a(e,k),a(k,N),a(N,m),a(N,_),a(N,h),a(k,M),a(k,L),a(L,F),a(L,x),a(k,ue),a(k,ee),a(ee,Z),a(ee,le),a(k,pe),a(k,T),a(T,U),a(T,Y),a(e,de),a(e,C),a(C,oe),a(oe,_e),a(C,ae),a(ae,vt),a(C,$t),a(C,me),a(me,bt),a(me,xe),a(C,gt),a(C,ge),a(ge,et),a(C,yt),a(C,Pe),a(Pe,Pt),a(C,we),a(we,tt),a(C,wt),a(C,ke),a(ke,Et),a(C,kt),a(C,Se),a(Se,nt),a(C,St),a(C,Ae),a(Ae,It),a(C,At),a(C,Te),a(Te,rt),a(e,Tt),a(e,O),a(O,Me),a(Me,Nt),a(O,Be),a(Be,Mt),a(O,Bt),a(O,he),a(he,Ct),a(he,st),a(O,Lt),a(O,Le),a(Le,lt),a(O,Ot),a(O,De),a(De,Dt),a(O,Ve),a(Ve,ot),a(O,Vt),a(O,He),a(He,Xt),a(O,Ht),a(O,Re),a(Re,at),a(O,Rt),a(O,Fe),a(Fe,Wt),a(O,Ft),a(O,Ge),a(Ge,it)},p(B,A){var ze,Ye;A&1&&f!==(f=Qe(B[0])+"")&&G(o,f),A&2&&I!==(I=((ze=B[1])==null?void 0:ze.x)+"")&&G(m,I),A&2&&u!==(u=((Ye=B[1])==null?void 0:Ye.y)+"")&&G(h,u),A&2&&te!==(te=Zt(B[1])?"✅":"❌")&&G(x,te),A&2&&q!==(q=xt(B[1])?"✅":"❌")&&G(le,q),A&2&&z!==(z=en(B[1])?"✅":"❌")&&G(Y,z),A&1&&be!==(be=B[0].player.toString(2).padStart(9,"0")+"")&&G(xe,be),A&1&&ye!==(ye=B[0].player+"")&&G(et,ye),A&1&&Ee!==(Ee=je(B[0],S.player)?"✅":"❌")&&G(tt,Ee),A&3&&Ie!==(Ie=Je(B[0],S.player,B[1])?"✅":"❌")&&G(nt,Ie),A&3&&Ne!==(Ne=Ke(B[0],S.player,B[1])?"✅":"❌")&&G(rt,Ne),A&1&&Ce!==(Ce=B[0].computer.toString(2).padStart(9,"0")+"")&&G(st,Ce),A&1&&Oe!==(Oe=B[0].computer+"")&&G(lt,Oe),A&1&&Xe!==(Xe=je(B[0],S.computer)?"✅":"❌")&&G(ot,Xe),A&3&&We!==(We=Je(B[0],S.computer,B[1])?"✅":"❌")&&G(at,We),A&3&&Ue!==(Ue=Ke(B[0],S.computer,B[1])?"✅":"❌")&&G(it,Ue)},d(B){B&&c(e)}}}function Pr(t){var f,o;let e,r,n,s,l=t[0]&&((f=t[1])==null?void 0:f.x)!==-1&&((o=t[1])==null?void 0:o.y)!==-1&&Ln(t);return{c(){e=$("div"),r=$("h4"),n=y("Board info"),s=w(),l&&l.c()},l(i){e=b(i,"DIV",{});var p=g(e);r=b(p,"H4",{});var d=g(r);n=P(d,"Board info"),d.forEach(c),s=E(p),l&&l.l(p),p.forEach(c)},m(i,p){D(i,e,p),a(e,r),a(r,n),a(e,s),l&&l.m(e,null)},p(i,[p]){var d,v;i[0]&&((d=i[1])==null?void 0:d.x)!==-1&&((v=i[1])==null?void 0:v.y)!==-1?l?l.p(i,p):(l=Ln(i),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:jt,o:jt,d(i){i&&c(e),l&&l.d()}}}function wr(t,e,r){let{board:n}=e,{lastMove:s}=e;return t.$$set=l=>{"board"in l&&r(0,n=l.board),"lastMove"in l&&r(1,s=l.lastMove)},[n,s]}class Yn extends ne{constructor(e){super(),re(this,e,wr,Pr,se,{board:0,lastMove:1})}}function Er(t,e){const r=gr(t);if(r.length===0)throw new Error("No available moves");let n=0,s;for(const l of r){const f={...t},o=pr(l);pt(f,e,l);const i=kr(f,e,o);i>n&&(n=i,s=o)}if(!s)throw new Error("Error in getMoveHardcoded");return s}function kr(t,e,r){return je(t,S.player)?8:Ke(t,e,r)?7:Zt(r)?4:Je(t,e,r)?3:xt(r)?2:en(r)?1:0}function On(t){let e,r;return{c(){e=$("span"),r=y("Player wins!")},l(n){e=b(n,"SPAN",{});var s=g(e);r=P(s,"Player wins!"),s.forEach(c)},m(n,s){D(n,e,s),a(e,r)},d(n){n&&c(e)}}}function Dn(t){let e,r;return{c(){e=$("span"),r=y("Computer wins!")},l(n){e=b(n,"SPAN",{});var s=g(e);r=P(s,"Computer wins!"),s.forEach(c)},m(n,s){D(n,e,s),a(e,r)},d(n){n&&c(e)}}}function Vn(t){let e,r;return{c(){e=$("span"),r=y("Draw")},l(n){e=b(n,"SPAN",{});var s=g(e);r=P(s,"Draw"),s.forEach(c)},m(n,s){D(n,e,s),a(e,r)},d(n){n&&c(e)}}}function Xn(t){let e,r,n,s;return{c(){e=$("span"),r=y("Restarting in "),n=y(t[2]),s=y(" seconds")},l(l){e=b(l,"SPAN",{});var f=g(e);r=P(f,"Restarting in "),n=P(f,t[2]),s=P(f," seconds"),f.forEach(c)},m(l,f){D(l,e,f),a(e,r),a(e,n),a(e,s)},p(l,f){f&4&&G(n,l[2])},d(l){l&&c(e)}}}function Sr(t){let e,r,n,s,l,f,o,i,p,d,v,k,N;l=new Wn({props:{sketch:t[5]}});let I=t[3]==="player_win"&&On(),m=t[3]==="computer_win"&&Dn(),_=t[3]==="draw"&&Vn(),u=t[2]>0&&Xn(t);return k=new Yn({props:{board:t[0],lastMove:t[1]}}),{c(){e=$("h2"),r=y("Game"),n=w(),s=$("div"),j(l.$$.fragment),f=w(),o=$("div"),I&&I.c(),i=w(),m&&m.c(),p=w(),_&&_.c(),d=w(),u&&u.c(),v=w(),j(k.$$.fragment)},l(h){e=b(h,"H2",{});var M=g(e);r=P(M,"Game"),M.forEach(c),n=E(h),s=b(h,"DIV",{});var L=g(s);K(l.$$.fragment,L),f=E(L),o=b(L,"DIV",{});var F=g(o);I&&I.l(F),i=E(F),m&&m.l(F),p=E(F),_&&_.l(F),d=E(F),u&&u.l(F),F.forEach(c),v=E(L),K(k.$$.fragment,L),L.forEach(c)},m(h,M){D(h,e,M),a(e,r),D(h,n,M),D(h,s,M),J(l,s,null),a(s,f),a(s,o),I&&I.m(o,null),a(o,i),m&&m.m(o,null),a(o,p),_&&_.m(o,null),a(o,d),u&&u.m(o,null),a(s,v),J(k,s,null),N=!0},p(h,[M]){h[3]==="player_win"?I||(I=On(),I.c(),I.m(o,i)):I&&(I.d(1),I=null),h[3]==="computer_win"?m||(m=Dn(),m.c(),m.m(o,p)):m&&(m.d(1),m=null),h[3]==="draw"?_||(_=Vn(),_.c(),_.m(o,d)):_&&(_.d(1),_=null),h[2]>0?u?u.p(h,M):(u=Xn(h),u.c(),u.m(o,null)):u&&(u.d(1),u=null);const L={};M&1&&(L.board=h[0]),M&2&&(L.lastMove=h[1]),k.$set(L)},i(h){N||(X(l.$$.fragment,h),X(k.$$.fragment,h),N=!0)},o(h){H(l.$$.fragment,h),H(k.$$.fragment,h),N=!1},d(h){h&&c(e),h&&c(n),h&&c(s),Q(l),I&&I.d(),m&&m.d(),_&&_.d(),u&&u.d(),Q(k)}}}function Ir(t,e,r){let n,s,l,f,o;const i=qe();$e(t,i,_=>r(3,n=_));let p=0,d=!0;function v(_,u){n==="not_over"&&(pt(l,_,fe(u)),r(1,o=u),r(0,l),i.set(Qe(l)),N())}function k(_){n==="not_over"&&setTimeout(()=>{const u=Er(l,_);r(1,o=u),pt(l,_,fe(u)),r(0,l),i.set(Qe(l)),N()},500)}function N(){f=f===S.player?S.computer:S.player}function I(){r(0,l=Gn()),d=!d,f=d?S.computer:S.player,i.set(Qe(l)),r(1,o={x:-1,y:-1}),d&&k(S.computer)}const m=_=>{_.setup=()=>{s=_,_.createCanvas(400,400),I()},_.draw=()=>{_.background(0),Un(_,l)},_.mousePressed=()=>{if(!(_.mouseX<0||_.mouseX>_.width||_.mouseY<0||_.mouseY>_.height)&&f===S.player){const u=Qt(_);v(S.player,u),k(S.computer)}}};return i.subscribe(_=>{if(!_||_==="not_over")return;r(2,p=4);const u=setInterval(()=>{r(2,p--,p),p===0&&(I(),clearInterval(u))},1e3)}),tn(()=>{s==null||s.remove()}),[l,o,p,n,i,m]}class Ar extends ne{constructor(e){super(),re(this,e,Ir,Sr,se,{})}}function Tr(t){let e,r,n,s,l,f,o,i,p,d,v,k,N,I,m,_,u,h,M,L,F,te,x,ue,ee,Z,q,le,pe;return l=new Wn({props:{sketch:t[6]}}),Z=new Yn({props:{board:t[1],lastMove:t[3]}}),{c(){e=$("h2"),r=y("Analyzer"),n=w(),s=$("div"),j(l.$$.fragment),f=w(),o=$("div"),i=$("h4"),p=y("Controls"),d=w(),v=$("button"),k=y("Play O"),I=w(),m=$("button"),_=y("Play X"),h=w(),M=$("button"),L=y("Previous"),te=w(),x=$("button"),ue=y("Reset"),ee=w(),j(Z.$$.fragment),this.h()},l(T){e=b(T,"H2",{});var U=g(e);r=P(U,"Analyzer"),U.forEach(c),n=E(T),s=b(T,"DIV",{});var z=g(s);K(l.$$.fragment,z),f=E(z),o=b(z,"DIV",{});var Y=g(o);i=b(Y,"H4",{});var de=g(i);p=P(de,"Controls"),de.forEach(c),d=E(Y),v=b(Y,"BUTTON",{});var C=g(v);k=P(C,"Play O"),C.forEach(c),I=E(Y),m=b(Y,"BUTTON",{});var oe=g(m);_=P(oe,"Play X"),oe.forEach(c),h=E(Y),M=b(Y,"BUTTON",{});var _e=g(M);L=P(_e,"Previous"),_e.forEach(c),te=E(Y),x=b(Y,"BUTTON",{});var ae=g(x);ue=P(ae,"Reset"),ae.forEach(c),Y.forEach(c),ee=E(z),K(Z.$$.fragment,z),z.forEach(c),this.h()},h(){v.disabled=N=t[2]===S.player,m.disabled=u=t[2]===S.computer,M.disabled=F=(t[0]||[]).length<2},m(T,U){D(T,e,U),a(e,r),D(T,n,U),D(T,s,U),J(l,s,null),a(s,f),a(s,o),a(o,i),a(i,p),a(o,d),a(o,v),a(v,k),a(o,I),a(o,m),a(m,_),a(o,h),a(o,M),a(M,L),a(o,te),a(o,x),a(x,ue),a(s,ee),J(Z,s,null),q=!0,le||(pe=[ve(v,"click",t[7]),ve(m,"click",t[8]),ve(M,"click",t[5]),ve(x,"click",t[4])],le=!0)},p(T,[U]){(!q||U&4&&N!==(N=T[2]===S.player))&&(v.disabled=N),(!q||U&4&&u!==(u=T[2]===S.computer))&&(m.disabled=u),(!q||U&1&&F!==(F=(T[0]||[]).length<2))&&(M.disabled=F);const z={};U&2&&(z.board=T[1]),U&8&&(z.lastMove=T[3]),Z.$set(z)},i(T){q||(X(l.$$.fragment,T),X(Z.$$.fragment,T),q=!0)},o(T){H(l.$$.fragment,T),H(Z.$$.fragment,T),q=!1},d(T){T&&c(e),T&&c(n),T&&c(s),Q(l),Q(Z),le=!1,xn(pe)}}}function Nr(t,e,r){let n,s,l,f=S.player,o;function i(m,_){pt(l,m,fe(_)),r(3,o=_),r(1,l),s.push({...l}),r(0,s),p()}function p(){r(2,f=f===S.player?S.computer:S.player)}function d(){r(1,l=Gn()),r(0,s=[{...l}]),r(3,o={x:-1,y:-1})}function v(){s.length<=1||(s.pop(),r(0,s),r(1,l={...s[s.length-1]}))}const k=m=>{m.setup=()=>{n=m,m.createCanvas(400,400),d()},m.draw=()=>{m.background(0),Un(m,l,{drawSelection:!0,selection:Qt(m),currentPlayer:f})},m.mousePressed=()=>{if(m.mouseX<0||m.mouseX>m.width||m.mouseY<0||m.mouseY>m.height)return;const _=Qt(m);i(f,_)}};return tn(()=>{n==null||n.remove()}),[s,l,f,o,d,v,k,()=>r(2,f=S.player),()=>r(2,f=S.computer)]}class Mr extends ne{constructor(e){super(),re(this,e,Nr,Tr,se,{})}}function Br(t){let e;return{c(){e=y("Game")},l(r){e=P(r,"Game")},m(r,n){D(r,e,n)},d(r){r&&c(e)}}}function Cr(t){let e;return{c(){e=y("Analyzer")},l(r){e=P(r,"Analyzer")},m(r,n){D(r,e,n)},d(r){r&&c(e)}}}function Lr(t){let e,r,n,s;return e=new In({props:{$$slots:{default:[Br]},$$scope:{ctx:t}}}),n=new In({props:{$$slots:{default:[Cr]},$$scope:{ctx:t}}}),{c(){j(e.$$.fragment),r=w(),j(n.$$.fragment)},l(l){K(e.$$.fragment,l),r=E(l),K(n.$$.fragment,l)},m(l,f){J(e,l,f),D(l,r,f),J(n,l,f),s=!0},p(l,f){const o={};f&1&&(o.$$scope={dirty:f,ctx:l}),e.$set(o);const i={};f&1&&(i.$$scope={dirty:f,ctx:l}),n.$set(i)},i(l){s||(X(e.$$.fragment,l),X(n.$$.fragment,l),s=!0)},o(l){H(e.$$.fragment,l),H(n.$$.fragment,l),s=!1},d(l){Q(e,l),l&&c(r),Q(n,l)}}}function Or(t){let e,r;return e=new Ar({}),{c(){j(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,s){J(e,n,s),r=!0},i(n){r||(X(e.$$.fragment,n),r=!0)},o(n){H(e.$$.fragment,n),r=!1},d(n){Q(e,n)}}}function Dr(t){let e,r;return e=new Mr({}),{c(){j(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,s){J(e,n,s),r=!0},i(n){r||(X(e.$$.fragment,n),r=!0)},o(n){H(e.$$.fragment,n),r=!1},d(n){Q(e,n)}}}function Vr(t){let e,r,n,s,l,f;return e=new fr({props:{$$slots:{default:[Lr]},$$scope:{ctx:t}}}),n=new Tn({props:{$$slots:{default:[Or]},$$scope:{ctx:t}}}),l=new Tn({props:{$$slots:{default:[Dr]},$$scope:{ctx:t}}}),{c(){j(e.$$.fragment),r=w(),j(n.$$.fragment),s=w(),j(l.$$.fragment)},l(o){K(e.$$.fragment,o),r=E(o),K(n.$$.fragment,o),s=E(o),K(l.$$.fragment,o)},m(o,i){J(e,o,i),D(o,r,i),J(n,o,i),D(o,s,i),J(l,o,i),f=!0},p(o,i){const p={};i&1&&(p.$$scope={dirty:i,ctx:o}),e.$set(p);const d={};i&1&&(d.$$scope={dirty:i,ctx:o}),n.$set(d);const v={};i&1&&(v.$$scope={dirty:i,ctx:o}),l.$set(v)},i(o){f||(X(e.$$.fragment,o),X(n.$$.fragment,o),X(l.$$.fragment,o),f=!0)},o(o){H(e.$$.fragment,o),H(n.$$.fragment,o),H(l.$$.fragment,o),f=!1},d(o){Q(e,o),o&&c(r),Q(n,o),o&&c(s),Q(l,o)}}}function Xr(t){let e,r;return e=new sr({props:{$$slots:{default:[Vr]},$$scope:{ctx:t}}}),{c(){j(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,s){J(e,n,s),r=!0},p(n,[s]){const l={};s&1&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){r||(X(e.$$.fragment,n),r=!0)},o(n){H(e.$$.fragment,n),r=!1},d(n){Q(e,n)}}}class Hr extends ne{constructor(e){super(),re(this,e,null,Xr,se,{})}}function Rr(t){let e,r;return e=new Hr({}),{c(){j(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,s){J(e,n,s),r=!0},p:jt,i(n){r||(X(e.$$.fragment,n),r=!0)},o(n){H(e.$$.fragment,n),r=!1},d(n){Q(e,n)}}}class Ur extends ne{constructor(e){super(),re(this,e,null,Rr,se,{})}}export{Ur as default};
