import{S as R,i as U,s as T,k as v,l as g,m as w,h as m,n as F,I as S,b as k,J as O,B as A,K as z,q as M,a as E,r as C,c as I,G as y,u as X,L as Ge,f as b,g as W,d as j,t as P,e as le,w as B,x as H,y as V,z as D,M as Te,N as ne,O as ke,H as Pe,P as Oe,Q as Be}from"../../chunks/index-780d2971.js";import{w as He}from"../../chunks/index-341ca319.js";const re=t=>{const e=t===1?1:-1,n=[1,1,2,2,3,3].map(l=>l*e);return{player:t,pieces:n,unselectableIndexes:new Set,selectedPiece:null}},se=()=>{const t=[];for(let n=0;n<3;n++){t.push([]);for(let l=0;l<3;l++)t[t.length-1].push([])}return{state:{player:1,action:"select1"},grid:t,player1:re(1),player2:re(2)}},Se=t=>{const e=t.player1.unselectableIndexes,n=t.player2.unselectableIndexes,l=JSON.parse(JSON.stringify(t));return l.player1.unselectableIndexes=new Set([...e.values()]),l.player2.unselectableIndexes=new Set([...n.values()]),l},K=t=>t.state.player===1?t.player1:t.player2,oe=t=>t.state.player===1?t.player2:t.player1,Z=(t,e,n)=>{const l=t[n][e];return l.length?l[l.length-1]:null},$=(t,e,n)=>{if(e<0||n<0||e>2||n>2)throw new Error(`Invalid coordinates ${e},${n}`);const l=Z(t,e,n);return l===null?null:l>0?1:2},Ee=(t,e,n)=>{if(e<0||n<0||e>2||n>2)throw new Error(`Invalid coordinates ${e},${n}`);const l=Z(t,e,n);return l===null?0:Math.abs(l)},G=(t,e,n)=>{const l=$(t,e.x,e.y),r=$(t,n.x,n.y);return l!==null&&l===r},x=t=>{const{grid:e}=t,n=new Set;for(let l=0;l<3;l++)if(G(e,{x:0,y:l},{x:1,y:l})&&G(e,{x:0,y:l},{x:2,y:l})){const r=$(e,0,l);n.add(r)}for(let l=0;l<3;l++)if(G(e,{x:l,y:0},{x:l,y:1})&&G(e,{x:l,y:0},{x:l,y:2})){const r=$(e,l,0);n.add(r)}if(G(e,{x:0,y:0},{x:1,y:1})&&G(e,{x:0,y:0},{x:2,y:2})){const l=$(e,0,0);n.add(l)}if(G(e,{x:0,y:2},{x:1,y:1})&&G(e,{x:0,y:2},{x:2,y:0})){const l=$(e,0,2);n.add(l)}if(n.delete(null),n.size===1){t.state.player=[...n.values()][0],t.state.action="winner";return}if(n.size===2){t.state.player=1,t.state.action="draw";return}},Ie=(t,e,n)=>{if(t.state.player!==e.player||t.state.action!=="select1")throw new Error("invalid_step");if(n>=e.pieces.length||n<0)throw new Error("oob_selection_index");if(e.selectedPiece!==null)throw new Error("previous_selection_in_hand");if(e.unselectableIndexes.has(n))throw new Error("piece_already_used");e.selectedPiece={from:"hand",index:n},t.state.action="select2"},$e=(t,e,n)=>{if(t.state.player!==e.player||t.state.action!=="select1")throw new Error("invalid_step");const{x:l,y:r}=n;if(l<0||r<0||l>2||r>2)throw new Error(`Invalid coordinates ${l},${r}`);if(e.selectedPiece!==null)throw new Error("previous_selection_in_hand");if(t.grid[r][l].length===0)throw new Error("empty_stack_selection");if($(t.grid,l,r)!==e.player)throw new Error("opponent_owned_selection");e.selectedPiece={from:"board",position:{x:l,y:r}},t.state.action="select2"},Me=(t,e)=>{if(t.state.action!=="select2")throw new Error("invalid_step");const n=K(t);if(n.selectedPiece===null)throw new Error("no_selection_in_hand");const{x:l,y:r}=e,o=n.selectedPiece.from==="hand"?n.pieces[n.selectedPiece.index]:Z(t.grid,n.selectedPiece.position.x,n.selectedPiece.position.y);if(o===null)throw new Error("selected_piece_is_null");if(Ee(t.grid,l,r)>=Math.abs(o))throw new Error("destination_bigger_than_piece");return t.grid[e.y][e.x].push(o),n.selectedPiece.from==="hand"&&n.unselectableIndexes.add(n.selectedPiece.index),n.selectedPiece.from==="board"&&t.grid[n.selectedPiece.position.y][n.selectedPiece.position.x].pop(),n.selectedPiece=null,t.state.action="select1",t.state.player=t.state.player===1?2:1,x(t),0},J=(t,e,n)=>{n.from.from==="hand"?Ie(t,e,n.from.index):$e(t,e,n.from.position),Me(t,n.to)},Ve=(t,e)=>{const n=[];for(let l=0;l<3;l++)for(let r=0;r<3;r++){const o=Ee(t.grid,r,l);(!o||o<Math.abs(e))&&n.push({x:r,y:l})}return n},L=(t,e)=>De(t,e).reduce((l,r)=>{const o=Fe(t,e,r),s=Ve(t,o);for(const a of s)l.push({from:r,to:a});return l},[]),De=(t,e)=>{const n=e.pieces.map((l,r)=>r).filter(l=>!e.unselectableIndexes.has(l)).map(l=>({index:l,from:"hand"}));for(let l=0;l<3;l++)for(let r=0;r<3;r++)$(t.grid,r,l)===e.player&&n.push({from:"board",position:{x:r,y:l}});return n},Fe=(t,e,n)=>{if(n.from==="board"){const l=t.grid[n.position.y][n.position.x];return l[l.length-1]}return e.pieces[n.index]},Re=t=>{if(x(t),t.state.action==="winner")return t.state.player===1?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER;if(t.state.action==="draw")return Number.MAX_SAFE_INTEGER/2;const e=L(t,t.player1),n=L(t,t.player2);if(e.length===0&&n.length===0)return Number.MAX_SAFE_INTEGER/2;let l=0;const r=$(t.grid,1,1);return r===t.player1.player?l+=2:r===t.player2.player&&(l-=2),[$(t.grid,0,0),$(t.grid,2,0),$(t.grid,0,2),$(t.grid,2,2)].forEach(s=>{s!==null&&(l+=s!==null&&s===1?1:-1)}),l},Ce=(t,e)=>{const n=L(t,e);if(!n.length)throw new Error("no_move_possible");const o=[...n.reduce((s,a)=>{const f=Se(t),u=e.player===1?f.player1:f.player2;J(f,u,a);const _=Re(f);return s.push({move:a,score:_}),s},[])].sort((s,a)=>e.player===1?a.score-s.score:s.score-a.score)[0].move;J(t,e,o)},ee=(t,e)=>{const n=L(t,e);if(n.length===0)throw new Error("no_move_possible");const l=Math.floor(Math.random()*n.length),r=n[l];J(t,e,r)},Ne=(t,e)=>{const n=L(t,e);if(!n.length)throw new Error("no_move_possible");for(const l of n){const r=Se(t),o=e.player===1?r.player1:r.player2;if(J(r,o,l),x(r),r.state.action==="winner"&&r.state.player===e.player){J(t,e,l);return}}ee(t,e)},Y={random:ee,win_or_random:Ne,euristic:Ce},Ue={player2Auto:!0,player2Strat:"euristic"},q=He(Ue);function ie(t,e,n){const l=t.slice();return l[4]=e[n],l}function ce(t){let e,n=t[4]+"",l,r;return{c(){e=v("div"),l=M(n),r=E(),this.h()},l(o){e=g(o,"DIV",{class:!0});var s=w(e);l=C(s,n),r=I(s),s.forEach(m),this.h()},h(){F(e,"class","piece svelte-1bwmfvs"),S(e,"player1",t[4]>0),S(e,"player2",t[4]<0),S(e,"small-circle",Math.abs(t[4])===1),S(e,"medium-circle",Math.abs(t[4])===2),S(e,"large-circle",Math.abs(t[4])===3)},m(o,s){k(o,e,s),y(e,l),y(e,r)},p(o,s){s&1&&n!==(n=o[4]+"")&&X(l,n),s&1&&S(e,"player1",o[4]>0),s&1&&S(e,"player2",o[4]<0),s&1&&S(e,"small-circle",Math.abs(o[4])===1),s&1&&S(e,"medium-circle",Math.abs(o[4])===2),s&1&&S(e,"large-circle",Math.abs(o[4])===3)},d(o){o&&m(e)}}}function We(t){let e,n,l,r=[...t[0]].reverse(),o=[];for(let s=0;s<r.length;s+=1)o[s]=ce(ie(t,r,s));return{c(){e=v("button");for(let s=0;s<o.length;s+=1)o[s].c();this.h()},l(s){e=g(s,"BUTTON",{class:!0});var a=w(e);for(let f=0;f<o.length;f+=1)o[f].l(a);a.forEach(m),this.h()},h(){F(e,"class","cell svelte-1bwmfvs"),S(e,"selected",t[1]),S(e,"disabled",t[2])},m(s,a){k(s,e,a);for(let f=0;f<o.length;f+=1)o[f].m(e,null);n||(l=O(e,"click",t[3]),n=!0)},p(s,[a]){if(a&1){r=[...s[0]].reverse();let f;for(f=0;f<r.length;f+=1){const u=ie(s,r,f);o[f]?o[f].p(u,a):(o[f]=ce(u),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}a&2&&S(e,"selected",s[1]),a&4&&S(e,"disabled",s[2])},i:A,o:A,d(s){s&&m(e),z(o,s),n=!1,l()}}}function je(t,e,n){let{pieces:l}=e,{selected:r=!1}=e,{disabled:o}=e;function s(a){Ge.call(this,t,a)}return t.$$set=a=>{"pieces"in a&&n(0,l=a.pieces),"selected"in a&&n(1,r=a.selected),"disabled"in a&&n(2,o=a.disabled)},[l,r,o,s]}class Ae extends R{constructor(e){super(),U(this,e,je,We,T,{pieces:0,selected:1,disabled:2})}}function ae(t,e,n){const l=t.slice();return l[4]=e[n],l[6]=n,l}function fe(t,e,n){const l=t.slice();return l[7]=e[n],l[9]=n,l}function ue(t){let e,n;function l(){return t[3](t[9],t[6])}return e=new Ae({props:{pieces:t[7],disabled:!1,selected:t[2]({x:t[9],y:t[6]})}}),e.$on("click",l),{c(){B(e.$$.fragment)},l(r){H(e.$$.fragment,r)},m(r,o){V(e,r,o),n=!0},p(r,o){t=r;const s={};o&1&&(s.pieces=t[7]),e.$set(s)},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){P(e.$$.fragment,r),n=!1},d(r){D(e,r)}}}function de(t){let e,n,l=t[4],r=[];for(let s=0;s<l.length;s+=1)r[s]=ue(fe(t,l,s));const o=s=>P(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=le()},l(s){for(let a=0;a<r.length;a+=1)r[a].l(s);e=le()},m(s,a){for(let f=0;f<r.length;f+=1)r[f].m(s,a);k(s,e,a),n=!0},p(s,a){if(a&7){l=s[4];let f;for(f=0;f<l.length;f+=1){const u=fe(s,l,f);r[f]?(r[f].p(u,a),b(r[f],1)):(r[f]=ue(u),r[f].c(),b(r[f],1),r[f].m(e.parentNode,e))}for(W(),f=l.length;f<r.length;f+=1)o(f);j()}},i(s){if(!n){for(let a=0;a<l.length;a+=1)b(r[a]);n=!0}},o(s){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)P(r[a]);n=!1},d(s){z(r,s),s&&m(e)}}}function Je(t){let e,n,l=JSON.stringify(t[0].state)+"",r,o,s,a,f=t[0].grid,u=[];for(let i=0;i<f.length;i+=1)u[i]=de(ae(t,f,i));const _=i=>P(u[i],1,1,()=>{u[i]=null});return{c(){e=v("div"),n=v("div"),r=M(l),o=E(),s=v("div");for(let i=0;i<u.length;i+=1)u[i].c();this.h()},l(i){e=g(i,"DIV",{class:!0});var d=w(e);n=g(d,"DIV",{});var c=w(n);r=C(c,l),c.forEach(m),o=I(d),s=g(d,"DIV",{class:!0});var h=w(s);for(let p=0;p<u.length;p+=1)u[p].l(h);h.forEach(m),d.forEach(m),this.h()},h(){F(s,"class","overlay svelte-1n6jeyv"),F(e,"class","board svelte-1n6jeyv")},m(i,d){k(i,e,d),y(e,n),y(n,r),y(e,o),y(e,s);for(let c=0;c<u.length;c+=1)u[c].m(s,null);a=!0},p(i,[d]){if((!a||d&1)&&l!==(l=JSON.stringify(i[0].state)+"")&&X(r,l),d&7){f=i[0].grid;let c;for(c=0;c<f.length;c+=1){const h=ae(i,f,c);u[c]?(u[c].p(h,d),b(u[c],1)):(u[c]=de(h),u[c].c(),b(u[c],1),u[c].m(s,null))}for(W(),c=f.length;c<u.length;c+=1)_(c);j()}},i(i){if(!a){for(let d=0;d<f.length;d+=1)b(u[d]);a=!0}},o(i){u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)P(u[d]);a=!1},d(i){i&&m(e),z(u,i)}}}function Le(t,e,n){let{game:l}=e,{onSelectCell:r}=e;const o=a=>{for(const f of[l.player1,l.player2]){const{selectedPiece:u}=f;if((u==null?void 0:u.from)==="board"&&u.position.x===a.x&&u.position.y===a.y)return!0}return!1},s=(a,f)=>r({x:a,y:f});return t.$$set=a=>{"game"in a&&n(0,l=a.game),"onSelectCell"in a&&n(1,r=a.onSelectCell)},[l,r,o,s]}class ze extends R{constructor(e){super(),U(this,e,Le,Je,T,{game:0,onSelectCell:1})}}function _e(t,e,n){const l=t.slice();return l[3]=e[n],l}function he(t){let e,n=t[3]+"",l,r;return{c(){e=v("option"),l=M(n),r=E(),this.h()},l(o){e=g(o,"OPTION",{});var s=w(e);l=C(s,n),r=I(s),s.forEach(m),this.h()},h(){e.__value=t[3],e.value=e.__value},m(o,s){k(o,e,s),y(e,l),y(e,r)},p:A,d(o){o&&m(e)}}}function Xe(t){let e,n,l=t[0].player2Auto?"Human player 2":"Computer player 2",r,o,s,a,f,u=Object.keys(Y),_=[];for(let i=0;i<u.length;i+=1)_[i]=he(_e(t,u,i));return{c(){e=v("div"),n=v("button"),r=M(l),o=E(),s=v("select");for(let i=0;i<_.length;i+=1)_[i].c();this.h()},l(i){e=g(i,"DIV",{});var d=w(e);n=g(d,"BUTTON",{});var c=w(n);r=C(c,l),c.forEach(m),o=I(d),s=g(d,"SELECT",{});var h=w(s);for(let p=0;p<_.length;p+=1)_[p].l(h);h.forEach(m),d.forEach(m),this.h()},h(){t[0].player2Strat===void 0&&Te(()=>t[2].call(s))},m(i,d){k(i,e,d),y(e,n),y(n,r),y(e,o),y(e,s);for(let c=0;c<_.length;c+=1)_[c].m(s,null);ne(s,t[0].player2Strat),a||(f=[O(n,"click",t[1]),O(s,"change",t[2])],a=!0)},p(i,[d]){if(d&1&&l!==(l=i[0].player2Auto?"Human player 2":"Computer player 2")&&X(r,l),d&0){u=Object.keys(Y);let c;for(c=0;c<u.length;c+=1){const h=_e(i,u,c);_[c]?_[c].p(h,d):(_[c]=he(h),_[c].c(),_[c].m(s,null))}for(;c<_.length;c+=1)_[c].d(1);_.length=u.length}d&1&&ne(s,i[0].player2Strat)},i:A,o:A,d(i){i&&m(e),z(_,i),a=!1,ke(f)}}}function qe(t,e,n){let l;Pe(t,q,s=>n(0,l=s));const r=()=>Oe(q,l.player2Auto=!l.player2Auto,l);function o(){l.player2Strat=Be(this),q.set(l)}return[l,r,o]}class Ke extends R{constructor(e){super(),U(this,e,qe,Xe,T,{})}}function pe(t,e,n){const l=t.slice();return l[8]=e[n],l[10]=n,l}function me(t){let e,n,l,r,o,s,a,f,u,_;return{c(){e=v("button"),n=M("Random"),l=E(),r=v("button"),o=M("Win or random"),s=E(),a=v("button"),f=M("Euristic")},l(i){e=g(i,"BUTTON",{});var d=w(e);n=C(d,"Random"),d.forEach(m),l=I(i),r=g(i,"BUTTON",{});var c=w(r);o=C(c,"Win or random"),c.forEach(m),s=I(i),a=g(i,"BUTTON",{});var h=w(a);f=C(h,"Euristic"),h.forEach(m)},m(i,d){k(i,e,d),y(e,n),k(i,l,d),k(i,r,d),y(r,o),k(i,s,d),k(i,a,d),y(a,f),u||(_=[O(e,"click",t[4]),O(r,"click",t[5]),O(a,"click",t[6])],u=!0)},p:A,d(i){i&&m(e),i&&m(l),i&&m(r),i&&m(s),i&&m(a),u=!1,ke(_)}}}function ye(t){var r;let e,n;function l(){return t[7](t[10])}return e=new Ae({props:{disabled:t[1]||t[0].unselectableIndexes.has(t[10]),pieces:[t[8]],selected:((r=t[0].selectedPiece)==null?void 0:r.from)==="hand"&&t[0].selectedPiece.index===t[10]}}),e.$on("click",l),{c(){B(e.$$.fragment)},l(o){H(e.$$.fragment,o)},m(o,s){V(e,o,s),n=!0},p(o,s){var f;t=o;const a={};s&3&&(a.disabled=t[1]||t[0].unselectableIndexes.has(t[10])),s&1&&(a.pieces=[t[8]]),s&1&&(a.selected=((f=t[0].selectedPiece)==null?void 0:f.from)==="hand"&&t[0].selectedPiece.index===t[10]),e.$set(a)},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){P(e.$$.fragment,o),n=!1},d(o){D(e,o)}}}function Qe(t){let e,n,l=t[0].player+"",r,o,s,a,f,u=!t[1]&&me(t),_=t[0].pieces,i=[];for(let c=0;c<_.length;c+=1)i[c]=ye(pe(t,_,c));const d=c=>P(i[c],1,1,()=>{i[c]=null});return{c(){e=v("span"),n=M("Player "),r=M(l),o=E(),u&&u.c(),s=E(),a=v("div");for(let c=0;c<i.length;c+=1)i[c].c();this.h()},l(c){e=g(c,"SPAN",{});var h=w(e);n=C(h,"Player "),r=C(h,l),h.forEach(m),o=I(c),u&&u.l(c),s=I(c),a=g(c,"DIV",{class:!0});var p=w(a);for(let N=0;N<i.length;N+=1)i[N].l(p);p.forEach(m),this.h()},h(){F(a,"class","overlay svelte-rwgxl1")},m(c,h){k(c,e,h),y(e,n),y(e,r),k(c,o,h),u&&u.m(c,h),k(c,s,h),k(c,a,h);for(let p=0;p<i.length;p+=1)i[p].m(a,null);f=!0},p(c,[h]){if((!f||h&1)&&l!==(l=c[0].player+"")&&X(r,l),c[1]?u&&(u.d(1),u=null):u?u.p(c,h):(u=me(c),u.c(),u.m(s.parentNode,s)),h&7){_=c[0].pieces;let p;for(p=0;p<_.length;p+=1){const N=pe(c,_,p);i[p]?(i[p].p(N,h),b(i[p],1)):(i[p]=ye(N),i[p].c(),b(i[p],1),i[p].m(a,null))}for(W(),p=_.length;p<i.length;p+=1)d(p);j()}},i(c){if(!f){for(let h=0;h<_.length;h+=1)b(i[h]);f=!0}},o(c){i=i.filter(Boolean);for(let h=0;h<i.length;h+=1)P(i[h]);f=!1},d(c){c&&m(e),c&&m(o),u&&u.d(c),c&&m(s),c&&m(a),z(i,c)}}}function Ye(t,e,n){let{hand:l}=e,{disabled:r}=e,{onSelectPiece:o}=e,{onSelectAuto:s}=e;const a=()=>s(l,"random"),f=()=>s(l,"win_or_random"),u=()=>s(l,"euristic"),_=i=>o(l,i);return t.$$set=i=>{"hand"in i&&n(0,l=i.hand),"disabled"in i&&n(1,r=i.disabled),"onSelectPiece"in i&&n(2,o=i.onSelectPiece),"onSelectAuto"in i&&n(3,s=i.onSelectAuto)},[l,r,o,s,a,f,u,_]}class be extends R{constructor(e){super(),U(this,e,Ye,Qe,T,{hand:0,disabled:1,onSelectPiece:2,onSelectAuto:3})}}function ve(t){let e,n;return e=new ze({props:{onSelectCell:t[1],game:t[0]}}),{c(){B(e.$$.fragment)},l(l){H(e.$$.fragment,l)},m(l,r){V(e,l,r),n=!0},p(l,r){const o={};r&1&&(o.game=l[0]),e.$set(o)},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){P(e.$$.fragment,l),n=!1},d(l){D(e,l)}}}function ge(t){let e,n,l,r,o,s,a=t[0].state.player+"",f,u,_,i,d,c;return{c(){e=v("div"),n=v("span"),l=M("Game over!"),r=E(),o=v("span"),s=M("Winner: Player "),f=M(a),u=E(),_=v("button"),i=M("Play again")},l(h){e=g(h,"DIV",{});var p=w(e);n=g(p,"SPAN",{});var N=w(n);l=C(N,"Game over!"),N.forEach(m),r=I(p),o=g(p,"SPAN",{});var Q=w(o);s=C(Q,"Winner: Player "),f=C(Q,a),Q.forEach(m),u=I(p),_=g(p,"BUTTON",{});var te=w(_);i=C(te,"Play again"),te.forEach(m),p.forEach(m)},m(h,p){k(h,e,p),y(e,n),y(n,l),y(e,r),y(e,o),y(o,s),y(o,f),y(e,u),y(e,_),y(_,i),d||(c=O(_,"click",t[4]),d=!0)},p(h,p){p&1&&a!==(a=h[0].state.player+"")&&X(f,a)},d(h){h&&m(e),d=!1,c()}}}function we(t){let e,n,l,r;return e=new be({props:{onSelectAuto:t[3],onSelectPiece:t[2],hand:K(t[0]),disabled:!1}}),l=new be({props:{onSelectAuto:t[3],onSelectPiece:t[2],hand:oe(t[0]),disabled:!0}}),{c(){B(e.$$.fragment),n=E(),B(l.$$.fragment)},l(o){H(e.$$.fragment,o),n=I(o),H(l.$$.fragment,o)},m(o,s){V(e,o,s),k(o,n,s),V(l,o,s),r=!0},p(o,s){const a={};s&1&&(a.hand=K(o[0])),e.$set(a);const f={};s&1&&(f.hand=oe(o[0])),l.$set(f)},i(o){r||(b(e.$$.fragment,o),b(l.$$.fragment,o),r=!0)},o(o){P(e.$$.fragment,o),P(l.$$.fragment,o),r=!1},d(o){D(e,o),o&&m(n),D(l,o)}}}function Ze(t){let e,n,l,r=t[0],o,s,a=t[0],f;n=new Ke({});let u=ve(t),_=t[0].state.action==="winner"&&ge(t),i=we(t);return{c(){e=v("div"),B(n.$$.fragment),l=E(),u.c(),o=E(),_&&_.c(),s=E(),i.c(),this.h()},l(d){e=g(d,"DIV",{class:!0});var c=w(e);H(n.$$.fragment,c),l=I(c),u.l(c),o=I(c),_&&_.l(c),s=I(c),i.l(c),c.forEach(m),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(d,c){k(d,e,c),V(n,e,null),y(e,l),u.m(e,null),y(e,o),_&&_.m(e,null),y(e,s),i.m(e,null),f=!0},p(d,[c]){c&1&&T(r,r=d[0])?(W(),P(u,1,1,A),j(),u=ve(d),u.c(),b(u,1),u.m(e,o)):u.p(d,c),d[0].state.action==="winner"?_?_.p(d,c):(_=ge(d),_.c(),_.m(e,s)):_&&(_.d(1),_=null),c&1&&T(a,a=d[0])?(W(),P(i,1,1,A),j(),i=we(d),i.c(),b(i,1),i.m(e,null)):i.p(d,c)},i(d){f||(b(n.$$.fragment,d),b(u),b(i),f=!0)},o(d){P(n.$$.fragment,d),P(u),P(i),f=!1},d(d){d&&m(e),D(n),u.d(d),_&&_.d(),i.d(d)}}}function xe(t,e,n){let l;Pe(t,q,_=>n(5,l=_));let r=se();const o=()=>{if(["winner","select2"].includes(r.state.action)||r.state.player!==r.player2.player||!l.player2Auto)return;const _=Y[l.player2Strat];_(r,r.player2)};return[r,({x:_,y:i})=>{try{if(r.state.action==="select2"){Me(r,{x:_,y:i})===0&&o(),n(0,r);return}const d=K(r);$e(r,d,{x:_,y:i}),n(0,r),n(0,r)}catch(d){console.error("Could not select cell"),console.error(d),console.error("Game should be able to keep working")}},(_,i)=>{try{Ie(r,_,i)}catch(d){console.error("Could not select piece"),console.error(d),console.error("Game should be able to keep working")}n(0,r)},(_,i)=>{i==="random"&&ee(r,_),i==="win_or_random"&&Ne(r,_),i==="euristic"&&Ce(r,_),o(),n(0,r)},()=>n(0,r=se())]}class et extends R{constructor(e){super(),U(this,e,xe,Ze,T,{})}}function tt(t){let e,n;return e=new et({}),{c(){B(e.$$.fragment)},l(l){H(e.$$.fragment,l)},m(l,r){V(e,l,r),n=!0},p:A,i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){P(e.$$.fragment,l),n=!1},d(l){D(e,l)}}}class rt extends R{constructor(e){super(),U(this,e,null,tt,T,{})}}export{rt as default};
