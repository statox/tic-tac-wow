import{S as R,i as U,s as T,k as v,l as g,m as w,h as m,n as F,I as P,b as S,J as O,B as N,K as z,q as $,a as E,r as A,c as I,G as y,u as X,L as Ge,f as b,g as W,d as j,t as k,e as le,w as B,x as H,y as V,z as D,M as Te,N as ne,O as Se,H as ke,P as Oe,Q as Be}from"../../chunks/index-780d2971.js";import{w as He}from"../../chunks/index-341ca319.js";const re=l=>{const e=l===1?1:-1,n=[1,1,2,2,3,3].map(t=>t*e);return{player:l,pieces:n,unselectableIndexes:new Set,selectedPiece:null}},oe=l=>{const e=[];for(let t=0;t<3;t++){e.push([]);for(let r=0;r<3;r++)e[e.length-1].push([])}const n={state:{player:1,action:"select1"},grid:e,player1:re(1),player2:re(2)};return l!=null&&l.player2Start&&(n.state.player=2),n},Pe=l=>{const e=l.player1.unselectableIndexes,n=l.player2.unselectableIndexes,t=JSON.parse(JSON.stringify(l));return t.player1.unselectableIndexes=new Set([...e.values()]),t.player2.unselectableIndexes=new Set([...n.values()]),t},K=l=>l.state.player===1?l.player1:l.player2,se=l=>l.state.player===1?l.player2:l.player1,Z=(l,e,n)=>{const t=l[n][e];return t.length?t[t.length-1]:null},M=(l,e,n)=>{if(e<0||n<0||e>2||n>2)throw new Error(`Invalid coordinates ${e},${n}`);const t=Z(l,e,n);return t===null?null:t>0?1:2},Ee=(l,e,n)=>{if(e<0||n<0||e>2||n>2)throw new Error(`Invalid coordinates ${e},${n}`);const t=Z(l,e,n);return t===null?0:Math.abs(t)},G=(l,e,n)=>{const t=M(l,e.x,e.y),r=M(l,n.x,n.y);return t!==null&&t===r},x=l=>{const{grid:e}=l,n=new Set;for(let t=0;t<3;t++)if(G(e,{x:0,y:t},{x:1,y:t})&&G(e,{x:0,y:t},{x:2,y:t})){const r=M(e,0,t);n.add(r)}for(let t=0;t<3;t++)if(G(e,{x:t,y:0},{x:t,y:1})&&G(e,{x:t,y:0},{x:t,y:2})){const r=M(e,t,0);n.add(r)}if(G(e,{x:0,y:0},{x:1,y:1})&&G(e,{x:0,y:0},{x:2,y:2})){const t=M(e,0,0);n.add(t)}if(G(e,{x:0,y:2},{x:1,y:1})&&G(e,{x:0,y:2},{x:2,y:0})){const t=M(e,0,2);n.add(t)}if(n.delete(null),n.size===1){l.state.player=[...n.values()][0],l.state.action="winner";return}if(n.size===2){l.state.player=1,l.state.action="draw";return}},Ie=(l,e,n)=>{if(l.state.player!==e.player||l.state.action!=="select1")throw new Error("invalid_step");if(n>=e.pieces.length||n<0)throw new Error("oob_selection_index");if(e.selectedPiece!==null)throw new Error("previous_selection_in_hand");if(e.unselectableIndexes.has(n))throw new Error("piece_already_used");e.selectedPiece={from:"hand",index:n},l.state.action="select2"},Me=(l,e,n)=>{if(l.state.player!==e.player||l.state.action!=="select1")throw new Error("invalid_step");const{x:t,y:r}=n;if(t<0||r<0||t>2||r>2)throw new Error(`Invalid coordinates ${t},${r}`);if(e.selectedPiece!==null)throw new Error("previous_selection_in_hand");if(l.grid[r][t].length===0)throw new Error("empty_stack_selection");if(M(l.grid,t,r)!==e.player)throw new Error("opponent_owned_selection");e.selectedPiece={from:"board",position:{x:t,y:r}},l.state.action="select2"},$e=(l,e)=>{if(l.state.action!=="select2")throw new Error("invalid_step");const n=K(l);if(n.selectedPiece===null)throw new Error("no_selection_in_hand");const{x:t,y:r}=e,s=n.selectedPiece.from==="hand"?n.pieces[n.selectedPiece.index]:Z(l.grid,n.selectedPiece.position.x,n.selectedPiece.position.y);if(s===null)throw new Error("selected_piece_is_null");if(Ee(l.grid,t,r)>=Math.abs(s))throw new Error("destination_bigger_than_piece");return l.grid[e.y][e.x].push(s),n.selectedPiece.from==="hand"&&n.unselectableIndexes.add(n.selectedPiece.index),n.selectedPiece.from==="board"&&l.grid[n.selectedPiece.position.y][n.selectedPiece.position.x].pop(),n.selectedPiece=null,l.state.action="select1",l.state.player=l.state.player===1?2:1,x(l),0},J=(l,e,n)=>{n.from.from==="hand"?Ie(l,e,n.from.index):Me(l,e,n.from.position),$e(l,n.to)},Ve=(l,e)=>{const n=[];for(let t=0;t<3;t++)for(let r=0;r<3;r++){const s=Ee(l.grid,r,t);(!s||s<Math.abs(e))&&n.push({x:r,y:t})}return n},L=(l,e)=>De(l,e).reduce((t,r)=>{const s=Fe(l,e,r),o=Ve(l,s);for(const a of o)t.push({from:r,to:a});return t},[]),De=(l,e)=>{const n=e.pieces.map((t,r)=>r).filter(t=>!e.unselectableIndexes.has(t)).map(t=>({index:t,from:"hand"}));for(let t=0;t<3;t++)for(let r=0;r<3;r++)M(l.grid,r,t)===e.player&&n.push({from:"board",position:{x:r,y:t}});return n},Fe=(l,e,n)=>{if(n.from==="board"){const t=l.grid[n.position.y][n.position.x];return t[t.length-1]}return e.pieces[n.index]},Re=l=>{if(x(l),l.state.action==="winner")return l.state.player===1?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER;if(l.state.action==="draw")return Number.MAX_SAFE_INTEGER/2;const e=L(l,l.player1),n=L(l,l.player2);if(e.length===0&&n.length===0)return Number.MAX_SAFE_INTEGER/2;let t=0;const r=M(l.grid,1,1);return r===l.player1.player?t+=2:r===l.player2.player&&(t-=2),[M(l.grid,0,0),M(l.grid,2,0),M(l.grid,0,2),M(l.grid,2,2)].forEach(o=>{o!==null&&(t+=o!==null&&o===1?1:-1)}),t},Ae=(l,e)=>{const n=L(l,e);if(!n.length)throw new Error("no_move_possible");const s=[...n.reduce((o,a)=>{const f=Pe(l),u=e.player===1?f.player1:f.player2;J(f,u,a);const _=Re(f);return o.push({move:a,score:_}),o},[])].sort((o,a)=>e.player===1?a.score-o.score:o.score-a.score)[0].move;J(l,e,s)},ee=(l,e)=>{const n=L(l,e);if(n.length===0)throw new Error("no_move_possible");const t=Math.floor(Math.random()*n.length),r=n[t];J(l,e,r)},Ce=(l,e)=>{const n=L(l,e);if(!n.length)throw new Error("no_move_possible");for(const t of n){const r=Pe(l),s=e.player===1?r.player1:r.player2;if(J(r,s,t),x(r),r.state.action==="winner"&&r.state.player===e.player){J(l,e,t);return}}ee(l,e)},Y={random:ee,win_or_random:Ce,euristic:Ae},Ue={player2Auto:!0,player2Strat:"euristic"},q=He(Ue);function ie(l,e,n){const t=l.slice();return t[4]=e[n],t}function ce(l){let e,n=l[4]+"",t,r;return{c(){e=v("div"),t=$(n),r=E(),this.h()},l(s){e=g(s,"DIV",{class:!0});var o=w(e);t=A(o,n),r=I(o),o.forEach(m),this.h()},h(){F(e,"class","piece svelte-1bwmfvs"),P(e,"player1",l[4]>0),P(e,"player2",l[4]<0),P(e,"small-circle",Math.abs(l[4])===1),P(e,"medium-circle",Math.abs(l[4])===2),P(e,"large-circle",Math.abs(l[4])===3)},m(s,o){S(s,e,o),y(e,t),y(e,r)},p(s,o){o&1&&n!==(n=s[4]+"")&&X(t,n),o&1&&P(e,"player1",s[4]>0),o&1&&P(e,"player2",s[4]<0),o&1&&P(e,"small-circle",Math.abs(s[4])===1),o&1&&P(e,"medium-circle",Math.abs(s[4])===2),o&1&&P(e,"large-circle",Math.abs(s[4])===3)},d(s){s&&m(e)}}}function We(l){let e,n,t,r=[...l[0]].reverse(),s=[];for(let o=0;o<r.length;o+=1)s[o]=ce(ie(l,r,o));return{c(){e=v("button");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=g(o,"BUTTON",{class:!0});var a=w(e);for(let f=0;f<s.length;f+=1)s[f].l(a);a.forEach(m),this.h()},h(){F(e,"class","cell svelte-1bwmfvs"),P(e,"selected",l[1]),P(e,"disabled",l[2])},m(o,a){S(o,e,a);for(let f=0;f<s.length;f+=1)s[f].m(e,null);n||(t=O(e,"click",l[3]),n=!0)},p(o,[a]){if(a&1){r=[...o[0]].reverse();let f;for(f=0;f<r.length;f+=1){const u=ie(o,r,f);s[f]?s[f].p(u,a):(s[f]=ce(u),s[f].c(),s[f].m(e,null))}for(;f<s.length;f+=1)s[f].d(1);s.length=r.length}a&2&&P(e,"selected",o[1]),a&4&&P(e,"disabled",o[2])},i:N,o:N,d(o){o&&m(e),z(s,o),n=!1,t()}}}function je(l,e,n){let{pieces:t}=e,{selected:r=!1}=e,{disabled:s}=e;function o(a){Ge.call(this,l,a)}return l.$$set=a=>{"pieces"in a&&n(0,t=a.pieces),"selected"in a&&n(1,r=a.selected),"disabled"in a&&n(2,s=a.disabled)},[t,r,s,o]}class Ne extends R{constructor(e){super(),U(this,e,je,We,T,{pieces:0,selected:1,disabled:2})}}function ae(l,e,n){const t=l.slice();return t[4]=e[n],t[6]=n,t}function fe(l,e,n){const t=l.slice();return t[7]=e[n],t[9]=n,t}function ue(l){let e,n;function t(){return l[3](l[9],l[6])}return e=new Ne({props:{pieces:l[7],disabled:!1,selected:l[2]({x:l[9],y:l[6]})}}),e.$on("click",t),{c(){B(e.$$.fragment)},l(r){H(e.$$.fragment,r)},m(r,s){V(e,r,s),n=!0},p(r,s){l=r;const o={};s&1&&(o.pieces=l[7]),e.$set(o)},i(r){n||(b(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){D(e,r)}}}function de(l){let e,n,t=l[4],r=[];for(let o=0;o<t.length;o+=1)r[o]=ue(fe(l,t,o));const s=o=>k(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=le()},l(o){for(let a=0;a<r.length;a+=1)r[a].l(o);e=le()},m(o,a){for(let f=0;f<r.length;f+=1)r[f].m(o,a);S(o,e,a),n=!0},p(o,a){if(a&7){t=o[4];let f;for(f=0;f<t.length;f+=1){const u=fe(o,t,f);r[f]?(r[f].p(u,a),b(r[f],1)):(r[f]=ue(u),r[f].c(),b(r[f],1),r[f].m(e.parentNode,e))}for(W(),f=t.length;f<r.length;f+=1)s(f);j()}},i(o){if(!n){for(let a=0;a<t.length;a+=1)b(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)k(r[a]);n=!1},d(o){z(r,o),o&&m(e)}}}function Je(l){let e,n,t=JSON.stringify(l[0].state)+"",r,s,o,a,f=l[0].grid,u=[];for(let i=0;i<f.length;i+=1)u[i]=de(ae(l,f,i));const _=i=>k(u[i],1,1,()=>{u[i]=null});return{c(){e=v("div"),n=v("div"),r=$(t),s=E(),o=v("div");for(let i=0;i<u.length;i+=1)u[i].c();this.h()},l(i){e=g(i,"DIV",{class:!0});var d=w(e);n=g(d,"DIV",{});var c=w(n);r=A(c,t),c.forEach(m),s=I(d),o=g(d,"DIV",{class:!0});var p=w(o);for(let h=0;h<u.length;h+=1)u[h].l(p);p.forEach(m),d.forEach(m),this.h()},h(){F(o,"class","overlay svelte-1n6jeyv"),F(e,"class","board svelte-1n6jeyv")},m(i,d){S(i,e,d),y(e,n),y(n,r),y(e,s),y(e,o);for(let c=0;c<u.length;c+=1)u[c].m(o,null);a=!0},p(i,[d]){if((!a||d&1)&&t!==(t=JSON.stringify(i[0].state)+"")&&X(r,t),d&7){f=i[0].grid;let c;for(c=0;c<f.length;c+=1){const p=ae(i,f,c);u[c]?(u[c].p(p,d),b(u[c],1)):(u[c]=de(p),u[c].c(),b(u[c],1),u[c].m(o,null))}for(W(),c=f.length;c<u.length;c+=1)_(c);j()}},i(i){if(!a){for(let d=0;d<f.length;d+=1)b(u[d]);a=!0}},o(i){u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)k(u[d]);a=!1},d(i){i&&m(e),z(u,i)}}}function Le(l,e,n){let{game:t}=e,{onSelectCell:r}=e;const s=a=>{for(const f of[t.player1,t.player2]){const{selectedPiece:u}=f;if((u==null?void 0:u.from)==="board"&&u.position.x===a.x&&u.position.y===a.y)return!0}return!1},o=(a,f)=>r({x:a,y:f});return l.$$set=a=>{"game"in a&&n(0,t=a.game),"onSelectCell"in a&&n(1,r=a.onSelectCell)},[t,r,s,o]}class ze extends R{constructor(e){super(),U(this,e,Le,Je,T,{game:0,onSelectCell:1})}}function _e(l,e,n){const t=l.slice();return t[3]=e[n],t}function pe(l){let e,n=l[3]+"",t,r;return{c(){e=v("option"),t=$(n),r=E(),this.h()},l(s){e=g(s,"OPTION",{});var o=w(e);t=A(o,n),r=I(o),o.forEach(m),this.h()},h(){e.__value=l[3],e.value=e.__value},m(s,o){S(s,e,o),y(e,t),y(e,r)},p:N,d(s){s&&m(e)}}}function Xe(l){let e,n,t=l[0].player2Auto?"Human player 2":"Computer player 2",r,s,o,a,f,u=Object.keys(Y),_=[];for(let i=0;i<u.length;i+=1)_[i]=pe(_e(l,u,i));return{c(){e=v("div"),n=v("button"),r=$(t),s=E(),o=v("select");for(let i=0;i<_.length;i+=1)_[i].c();this.h()},l(i){e=g(i,"DIV",{});var d=w(e);n=g(d,"BUTTON",{});var c=w(n);r=A(c,t),c.forEach(m),s=I(d),o=g(d,"SELECT",{});var p=w(o);for(let h=0;h<_.length;h+=1)_[h].l(p);p.forEach(m),d.forEach(m),this.h()},h(){l[0].player2Strat===void 0&&Te(()=>l[2].call(o))},m(i,d){S(i,e,d),y(e,n),y(n,r),y(e,s),y(e,o);for(let c=0;c<_.length;c+=1)_[c].m(o,null);ne(o,l[0].player2Strat),a||(f=[O(n,"click",l[1]),O(o,"change",l[2])],a=!0)},p(i,[d]){if(d&1&&t!==(t=i[0].player2Auto?"Human player 2":"Computer player 2")&&X(r,t),d&0){u=Object.keys(Y);let c;for(c=0;c<u.length;c+=1){const p=_e(i,u,c);_[c]?_[c].p(p,d):(_[c]=pe(p),_[c].c(),_[c].m(o,null))}for(;c<_.length;c+=1)_[c].d(1);_.length=u.length}d&1&&ne(o,i[0].player2Strat)},i:N,o:N,d(i){i&&m(e),z(_,i),a=!1,Se(f)}}}function qe(l,e,n){let t;ke(l,q,o=>n(0,t=o));const r=()=>Oe(q,t.player2Auto=!t.player2Auto,t);function s(){t.player2Strat=Be(this),q.set(t)}return[t,r,s]}class Ke extends R{constructor(e){super(),U(this,e,qe,Xe,T,{})}}function he(l,e,n){const t=l.slice();return t[8]=e[n],t[10]=n,t}function me(l){let e,n,t,r,s,o,a,f,u,_;return{c(){e=v("button"),n=$("Random"),t=E(),r=v("button"),s=$("Win or random"),o=E(),a=v("button"),f=$("Euristic")},l(i){e=g(i,"BUTTON",{});var d=w(e);n=A(d,"Random"),d.forEach(m),t=I(i),r=g(i,"BUTTON",{});var c=w(r);s=A(c,"Win or random"),c.forEach(m),o=I(i),a=g(i,"BUTTON",{});var p=w(a);f=A(p,"Euristic"),p.forEach(m)},m(i,d){S(i,e,d),y(e,n),S(i,t,d),S(i,r,d),y(r,s),S(i,o,d),S(i,a,d),y(a,f),u||(_=[O(e,"click",l[4]),O(r,"click",l[5]),O(a,"click",l[6])],u=!0)},p:N,d(i){i&&m(e),i&&m(t),i&&m(r),i&&m(o),i&&m(a),u=!1,Se(_)}}}function ye(l){var r;let e,n;function t(){return l[7](l[10])}return e=new Ne({props:{disabled:l[1]||l[0].unselectableIndexes.has(l[10]),pieces:[l[8]],selected:((r=l[0].selectedPiece)==null?void 0:r.from)==="hand"&&l[0].selectedPiece.index===l[10]}}),e.$on("click",t),{c(){B(e.$$.fragment)},l(s){H(e.$$.fragment,s)},m(s,o){V(e,s,o),n=!0},p(s,o){var f;l=s;const a={};o&3&&(a.disabled=l[1]||l[0].unselectableIndexes.has(l[10])),o&1&&(a.pieces=[l[8]]),o&1&&(a.selected=((f=l[0].selectedPiece)==null?void 0:f.from)==="hand"&&l[0].selectedPiece.index===l[10]),e.$set(a)},i(s){n||(b(e.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),n=!1},d(s){D(e,s)}}}function Qe(l){let e,n,t=l[0].player+"",r,s,o,a,f,u=!l[1]&&me(l),_=l[0].pieces,i=[];for(let c=0;c<_.length;c+=1)i[c]=ye(he(l,_,c));const d=c=>k(i[c],1,1,()=>{i[c]=null});return{c(){e=v("span"),n=$("Player "),r=$(t),s=E(),u&&u.c(),o=E(),a=v("div");for(let c=0;c<i.length;c+=1)i[c].c();this.h()},l(c){e=g(c,"SPAN",{});var p=w(e);n=A(p,"Player "),r=A(p,t),p.forEach(m),s=I(c),u&&u.l(c),o=I(c),a=g(c,"DIV",{class:!0});var h=w(a);for(let C=0;C<i.length;C+=1)i[C].l(h);h.forEach(m),this.h()},h(){F(a,"class","overlay svelte-rwgxl1")},m(c,p){S(c,e,p),y(e,n),y(e,r),S(c,s,p),u&&u.m(c,p),S(c,o,p),S(c,a,p);for(let h=0;h<i.length;h+=1)i[h].m(a,null);f=!0},p(c,[p]){if((!f||p&1)&&t!==(t=c[0].player+"")&&X(r,t),c[1]?u&&(u.d(1),u=null):u?u.p(c,p):(u=me(c),u.c(),u.m(o.parentNode,o)),p&7){_=c[0].pieces;let h;for(h=0;h<_.length;h+=1){const C=he(c,_,h);i[h]?(i[h].p(C,p),b(i[h],1)):(i[h]=ye(C),i[h].c(),b(i[h],1),i[h].m(a,null))}for(W(),h=_.length;h<i.length;h+=1)d(h);j()}},i(c){if(!f){for(let p=0;p<_.length;p+=1)b(i[p]);f=!0}},o(c){i=i.filter(Boolean);for(let p=0;p<i.length;p+=1)k(i[p]);f=!1},d(c){c&&m(e),c&&m(s),u&&u.d(c),c&&m(o),c&&m(a),z(i,c)}}}function Ye(l,e,n){let{hand:t}=e,{disabled:r}=e,{onSelectPiece:s}=e,{onSelectAuto:o}=e;const a=()=>o(t,"random"),f=()=>o(t,"win_or_random"),u=()=>o(t,"euristic"),_=i=>s(t,i);return l.$$set=i=>{"hand"in i&&n(0,t=i.hand),"disabled"in i&&n(1,r=i.disabled),"onSelectPiece"in i&&n(2,s=i.onSelectPiece),"onSelectAuto"in i&&n(3,o=i.onSelectAuto)},[t,r,s,o,a,f,u,_]}class be extends R{constructor(e){super(),U(this,e,Ye,Qe,T,{hand:0,disabled:1,onSelectPiece:2,onSelectAuto:3})}}function ve(l){let e,n;return e=new ze({props:{onSelectCell:l[1],game:l[0]}}),{c(){B(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&1&&(s.game=t[0]),e.$set(s)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function ge(l){let e,n,t,r,s,o,a=l[0].state.player+"",f,u,_,i,d,c;return{c(){e=v("div"),n=v("span"),t=$("Game over!"),r=E(),s=v("span"),o=$("Winner: Player "),f=$(a),u=E(),_=v("button"),i=$("Play again")},l(p){e=g(p,"DIV",{});var h=w(e);n=g(h,"SPAN",{});var C=w(n);t=A(C,"Game over!"),C.forEach(m),r=I(h),s=g(h,"SPAN",{});var Q=w(s);o=A(Q,"Winner: Player "),f=A(Q,a),Q.forEach(m),u=I(h),_=g(h,"BUTTON",{});var te=w(_);i=A(te,"Play again"),te.forEach(m),h.forEach(m)},m(p,h){S(p,e,h),y(e,n),y(n,t),y(e,r),y(e,s),y(s,o),y(s,f),y(e,u),y(e,_),y(_,i),d||(c=O(_,"click",l[4]),d=!0)},p(p,h){h&1&&a!==(a=p[0].state.player+"")&&X(f,a)},d(p){p&&m(e),d=!1,c()}}}function we(l){let e,n,t,r;return e=new be({props:{onSelectAuto:l[3],onSelectPiece:l[2],hand:K(l[0]),disabled:!1}}),t=new be({props:{onSelectAuto:l[3],onSelectPiece:l[2],hand:se(l[0]),disabled:!0}}),{c(){B(e.$$.fragment),n=E(),B(t.$$.fragment)},l(s){H(e.$$.fragment,s),n=I(s),H(t.$$.fragment,s)},m(s,o){V(e,s,o),S(s,n,o),V(t,s,o),r=!0},p(s,o){const a={};o&1&&(a.hand=K(s[0])),e.$set(a);const f={};o&1&&(f.hand=se(s[0])),t.$set(f)},i(s){r||(b(e.$$.fragment,s),b(t.$$.fragment,s),r=!0)},o(s){k(e.$$.fragment,s),k(t.$$.fragment,s),r=!1},d(s){D(e,s),s&&m(n),D(t,s)}}}function Ze(l){let e,n,t,r=l[0],s,o,a=l[0],f;n=new Ke({});let u=ve(l),_=l[0].state.action==="winner"&&ge(l),i=we(l);return{c(){e=v("div"),B(n.$$.fragment),t=E(),u.c(),s=E(),_&&_.c(),o=E(),i.c(),this.h()},l(d){e=g(d,"DIV",{class:!0});var c=w(e);H(n.$$.fragment,c),t=I(c),u.l(c),s=I(c),_&&_.l(c),o=I(c),i.l(c),c.forEach(m),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(d,c){S(d,e,c),V(n,e,null),y(e,t),u.m(e,null),y(e,s),_&&_.m(e,null),y(e,o),i.m(e,null),f=!0},p(d,[c]){c&1&&T(r,r=d[0])?(W(),k(u,1,1,N),j(),u=ve(d),u.c(),b(u,1),u.m(e,s)):u.p(d,c),d[0].state.action==="winner"?_?_.p(d,c):(_=ge(d),_.c(),_.m(e,o)):_&&(_.d(1),_=null),c&1&&T(a,a=d[0])?(W(),k(i,1,1,N),j(),i=we(d),i.c(),b(i,1),i.m(e,null)):i.p(d,c)},i(d){f||(b(n.$$.fragment,d),b(u),b(i),f=!0)},o(d){k(n.$$.fragment,d),k(u),k(i),f=!1},d(d){d&&m(e),D(n),u.d(d),_&&_.d(),i.d(d)}}}function xe(l,e,n){let t;ke(l,q,_=>n(5,t=_));let r=oe();const s=()=>{if(["winner","select2"].includes(r.state.action)||r.state.player!==r.player2.player||!t.player2Auto)return;const _=Y[t.player2Strat];_(r,r.player2)};return[r,({x:_,y:i})=>{try{if(r.state.action==="select2"){$e(r,{x:_,y:i})===0&&s(),n(0,r);return}const d=K(r);Me(r,d,{x:_,y:i}),n(0,r),n(0,r)}catch(d){console.error("Could not select cell"),console.error(d),console.error("Game should be able to keep working")}},(_,i)=>{try{Ie(r,_,i)}catch(d){console.error("Could not select piece"),console.error(d),console.error("Game should be able to keep working")}n(0,r)},(_,i)=>{i==="random"&&ee(r,_),i==="win_or_random"&&Ce(r,_),i==="euristic"&&Ae(r,_),s(),n(0,r)},()=>{n(0,r=oe({player2Start:Math.random()<.5})),r.state.player===2&&t.player2Auto&&s()}]}class et extends R{constructor(e){super(),U(this,e,xe,Ze,T,{})}}function tt(l){let e,n;return e=new et({}),{c(){B(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:N,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}class rt extends R{constructor(e){super(),U(this,e,null,tt,T,{})}}export{rt as default};
