import{S as ee,i as te,s as K,k as S,l as W,m as O,h as b,n as B,I as T,b as w,N as D,B as G,J as ie,q as I,a as H,r as M,c as A,D as v,u as ae,R as Nt,f as k,g as Y,d as Z,t as E,e as z,w as F,x as R,y as j,z as J,K as Ne,M as Qe,P as Ae,H as yt,T as Ht,Q as At,U as It,C as Mt,E as Dt,F as Gt,G as Lt,V as Vt,W as Ut,o as Ft,X as jt,v as ke,Y as q,Z as pe,_ as we,$ as Te,a0 as Jt,a1 as Kt}from"../../../chunks/index-1d785069.js";import{s as Ce,g as Xe,d as He,e as xe,f as Rt,h as qt,i as Yt}from"../../../chunks/service-a0b0a97b.js";import{w as Zt}from"../../../chunks/index-c5a64178.js";const zt={player2Auto:!0,player2Strat:"alphabeta_ordered"},ve=Zt(zt);function $e(s,e,l){const t=s.slice();return t[5]=e[l],t}function et(s){let e,l=s[5]+"",t,o;return{c(){e=S("div"),t=I(l),o=H(),this.h()},l(i){e=W(i,"DIV",{class:!0});var n=O(e);t=M(n,l),o=A(n),n.forEach(b),this.h()},h(){B(e,"class","piece svelte-950i0e"),T(e,"player1",s[5]>0),T(e,"player2",s[5]<0),T(e,"small-circle",Math.abs(s[5])===1),T(e,"medium-circle",Math.abs(s[5])===2),T(e,"large-circle",Math.abs(s[5])===3)},m(i,n){w(i,e,n),v(e,t),v(e,o)},p(i,n){n&1&&l!==(l=i[5]+"")&&ae(t,l),n&1&&T(e,"player1",i[5]>0),n&1&&T(e,"player2",i[5]<0),n&1&&T(e,"small-circle",Math.abs(i[5])===1),n&1&&T(e,"medium-circle",Math.abs(i[5])===2),n&1&&T(e,"large-circle",Math.abs(i[5])===3)},d(i){i&&b(e)}}}function Qt(s){let e,l,t,o=[...s[0]].reverse(),i=[];for(let n=0;n<o.length;n+=1)i[n]=et($e(s,o,n));return{c(){e=S("button");for(let n=0;n<i.length;n+=1)i[n].c();this.h()},l(n){e=W(n,"BUTTON",{class:!0});var r=O(e);for(let a=0;a<i.length;a+=1)i[a].l(r);r.forEach(b),this.h()},h(){B(e,"class","cell svelte-950i0e"),T(e,"selected",s[1]),T(e,"disabledHand",s[3]),T(e,"disabledCell",s[2])},m(n,r){w(n,e,r);for(let a=0;a<i.length;a+=1)i[a].m(e,null);l||(t=D(e,"click",s[4]),l=!0)},p(n,[r]){if(r&1){o=[...n[0]].reverse();let a;for(a=0;a<o.length;a+=1){const c=$e(n,o,a);i[a]?i[a].p(c,r):(i[a]=et(c),i[a].c(),i[a].m(e,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=o.length}r&2&&T(e,"selected",n[1]),r&8&&T(e,"disabledHand",n[3]),r&4&&T(e,"disabledCell",n[2])},i:G,o:G,d(n){n&&b(e),ie(i,n),l=!1,t()}}}function Xt(s,e,l){let{pieces:t}=e,{selected:o=!1}=e,{disabledCell:i=!1}=e,{disabledHand:n=!1}=e;function r(a){Nt.call(this,s,a)}return s.$$set=a=>{"pieces"in a&&l(0,t=a.pieces),"selected"in a&&l(1,o=a.selected),"disabledCell"in a&&l(2,i=a.disabledCell),"disabledHand"in a&&l(3,n=a.disabledHand)},[t,o,i,n,r]}class pt extends ee{constructor(e){super(),te(this,e,Xt,Qt,K,{pieces:0,selected:1,disabledCell:2,disabledHand:3})}}function tt(s,e,l){const t=s.slice();return t[4]=e[l],t[6]=l,t}function lt(s,e,l){const t=s.slice();return t[7]=e[l],t[9]=l,t}function nt(s){let e,l;function t(){return s[3](s[9],s[6])}return e=new pt({props:{pieces:s[7],selected:s[2]({x:s[9],y:s[6]})}}),e.$on("click",t),{c(){F(e.$$.fragment)},l(o){R(e.$$.fragment,o)},m(o,i){j(e,o,i),l=!0},p(o,i){s=o;const n={};i&1&&(n.pieces=s[7]),e.$set(n)},i(o){l||(k(e.$$.fragment,o),l=!0)},o(o){E(e.$$.fragment,o),l=!1},d(o){J(e,o)}}}function st(s){let e,l,t=s[4],o=[];for(let n=0;n<t.length;n+=1)o[n]=nt(lt(s,t,n));const i=n=>E(o[n],1,1,()=>{o[n]=null});return{c(){for(let n=0;n<o.length;n+=1)o[n].c();e=z()},l(n){for(let r=0;r<o.length;r+=1)o[r].l(n);e=z()},m(n,r){for(let a=0;a<o.length;a+=1)o[a].m(n,r);w(n,e,r),l=!0},p(n,r){if(r&7){t=n[4];let a;for(a=0;a<t.length;a+=1){const c=lt(n,t,a);o[a]?(o[a].p(c,r),k(o[a],1)):(o[a]=nt(c),o[a].c(),k(o[a],1),o[a].m(e.parentNode,e))}for(Y(),a=t.length;a<o.length;a+=1)i(a);Z()}},i(n){if(!l){for(let r=0;r<t.length;r+=1)k(o[r]);l=!0}},o(n){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)E(o[r]);l=!1},d(n){ie(o,n),n&&b(e)}}}function xt(s){let e,l,t=JSON.stringify(s[0].state)+"",o,i,n,r,a=s[0].grid,c=[];for(let u=0;u<a.length;u+=1)c[u]=st(tt(s,a,u));const g=u=>E(c[u],1,1,()=>{c[u]=null});return{c(){e=S("div"),l=S("div"),o=I(t),i=H(),n=S("div");for(let u=0;u<c.length;u+=1)c[u].c();this.h()},l(u){e=W(u,"DIV",{class:!0});var y=O(e);l=W(y,"DIV",{});var f=O(l);o=M(f,t),f.forEach(b),i=A(y),n=W(y,"DIV",{class:!0});var h=O(n);for(let m=0;m<c.length;m+=1)c[m].l(h);h.forEach(b),y.forEach(b),this.h()},h(){B(n,"class","overlay svelte-1n6jeyv"),B(e,"class","board svelte-1n6jeyv")},m(u,y){w(u,e,y),v(e,l),v(l,o),v(e,i),v(e,n);for(let f=0;f<c.length;f+=1)c[f].m(n,null);r=!0},p(u,[y]){if((!r||y&1)&&t!==(t=JSON.stringify(u[0].state)+"")&&ae(o,t),y&7){a=u[0].grid;let f;for(f=0;f<a.length;f+=1){const h=tt(u,a,f);c[f]?(c[f].p(h,y),k(c[f],1)):(c[f]=st(h),c[f].c(),k(c[f],1),c[f].m(n,null))}for(Y(),f=a.length;f<c.length;f+=1)g(f);Z()}},i(u){if(!r){for(let y=0;y<a.length;y+=1)k(c[y]);r=!0}},o(u){c=c.filter(Boolean);for(let y=0;y<c.length;y+=1)E(c[y]);r=!1},d(u){u&&b(e),ie(c,u)}}}function $t(s,e,l){let{game:t}=e,{onSelectCell:o}=e;const i=r=>{for(const a of[t.player1,t.player2]){const{selectedPiece:c}=a;if((c==null?void 0:c.from)==="board"&&c.position.x===r.x&&c.position.y===r.y)return!0}return!1},n=(r,a)=>o({x:r,y:a});return s.$$set=r=>{"game"in r&&l(0,t=r.game),"onSelectCell"in r&&l(1,o=r.onSelectCell)},[t,o,i,n]}class el extends ee{constructor(e){super(),te(this,e,$t,xt,K,{game:0,onSelectCell:1})}}function ot(s,e,l){const t=s.slice();return t[3]=e[l],t}function it(s){let e,l=s[3]+"",t,o;return{c(){e=S("option"),t=I(l),o=H(),this.h()},l(i){e=W(i,"OPTION",{});var n=O(e);t=M(n,l),o=A(n),n.forEach(b),this.h()},h(){e.__value=s[3],e.value=e.__value},m(i,n){w(i,e,n),v(e,t),v(e,o)},p:G,d(i){i&&b(e)}}}function tl(s){let e,l,t=s[0].player2Auto?"Human player 2":"Computer player 2",o,i,n,r,a,c=Object.keys(Ce),g=[];for(let u=0;u<c.length;u+=1)g[u]=it(ot(s,c,u));return{c(){e=S("div"),l=S("button"),o=I(t),i=H(),n=S("select");for(let u=0;u<g.length;u+=1)g[u].c();this.h()},l(u){e=W(u,"DIV",{});var y=O(e);l=W(y,"BUTTON",{});var f=O(l);o=M(f,t),f.forEach(b),i=A(y),n=W(y,"SELECT",{});var h=O(n);for(let m=0;m<g.length;m+=1)g[m].l(h);h.forEach(b),y.forEach(b),this.h()},h(){s[0].player2Strat===void 0&&Ne(()=>s[2].call(n))},m(u,y){w(u,e,y),v(e,l),v(l,o),v(e,i),v(e,n);for(let f=0;f<g.length;f+=1)g[f].m(n,null);Qe(n,s[0].player2Strat),r||(a=[D(l,"click",s[1]),D(n,"change",s[2])],r=!0)},p(u,[y]){if(y&1&&t!==(t=u[0].player2Auto?"Human player 2":"Computer player 2")&&ae(o,t),y&0){c=Object.keys(Ce);let f;for(f=0;f<c.length;f+=1){const h=ot(u,c,f);g[f]?g[f].p(h,y):(g[f]=it(h),g[f].c(),g[f].m(n,null))}for(;f<g.length;f+=1)g[f].d(1);g.length=c.length}y&1&&Qe(n,u[0].player2Strat)},i:G,o:G,d(u){u&&b(e),ie(g,u),r=!1,Ae(a)}}}function ll(s,e,l){let t;yt(s,ve,n=>l(0,t=n));const o=()=>Ht(ve,t.player2Auto=!t.player2Auto,t);function i(){t.player2Strat=At(this),ve.set(t)}return[t,o,i]}class nl extends ee{constructor(e){super(),te(this,e,ll,tl,K,{})}}function at(s,e,l){const t=s.slice();return t[10]=e[l],t[12]=l,t}function rt(s){let e,l,t,o,i,n,r,a,c,g,u,y,f,h,m,C;return{c(){e=S("button"),l=I("Random"),t=H(),o=S("button"),i=I("Win or random"),n=H(),r=S("button"),a=I("Euristic"),c=H(),g=S("button"),u=I("MinMax"),y=H(),f=S("button"),h=I("AlphaBeta ordered")},l(_){e=W(_,"BUTTON",{});var p=O(e);l=M(p,"Random"),p.forEach(b),t=A(_),o=W(_,"BUTTON",{});var L=O(o);i=M(L,"Win or random"),L.forEach(b),n=A(_),r=W(_,"BUTTON",{});var Q=O(r);a=M(Q,"Euristic"),Q.forEach(b),c=A(_),g=W(_,"BUTTON",{});var N=O(g);u=M(N,"MinMax"),N.forEach(b),y=A(_),f=W(_,"BUTTON",{});var P=O(f);h=M(P,"AlphaBeta ordered"),P.forEach(b)},m(_,p){w(_,e,p),v(e,l),w(_,t,p),w(_,o,p),v(o,i),w(_,n,p),w(_,r,p),v(r,a),w(_,c,p),w(_,g,p),v(g,u),w(_,y,p),w(_,f,p),v(f,h),m||(C=[D(e,"click",s[4]),D(o,"click",s[5]),D(r,"click",s[6]),D(g,"click",s[7]),D(f,"click",s[8])],m=!0)},p:G,d(_){_&&b(e),_&&b(t),_&&b(o),_&&b(n),_&&b(r),_&&b(c),_&&b(g),_&&b(y),_&&b(f),m=!1,Ae(C)}}}function ct(s){var o;let e,l;function t(){return s[9](s[12])}return e=new pt({props:{disabledHand:s[1],disabledCell:s[0].unselectableIndexes.has(s[12]),pieces:[s[10]],selected:((o=s[0].selectedPiece)==null?void 0:o.from)==="hand"&&s[0].selectedPiece.index===s[12]}}),e.$on("click",t),{c(){F(e.$$.fragment)},l(i){R(e.$$.fragment,i)},m(i,n){j(e,i,n),l=!0},p(i,n){var a;s=i;const r={};n&2&&(r.disabledHand=s[1]),n&1&&(r.disabledCell=s[0].unselectableIndexes.has(s[12])),n&1&&(r.pieces=[s[10]]),n&1&&(r.selected=((a=s[0].selectedPiece)==null?void 0:a.from)==="hand"&&s[0].selectedPiece.index===s[12]),e.$set(r)},i(i){l||(k(e.$$.fragment,i),l=!0)},o(i){E(e.$$.fragment,i),l=!1},d(i){J(e,i)}}}function sl(s){let e,l,t=s[0].player+"",o,i,n,r,a,c=!s[1]&&rt(s),g=s[0].pieces,u=[];for(let f=0;f<g.length;f+=1)u[f]=ct(at(s,g,f));const y=f=>E(u[f],1,1,()=>{u[f]=null});return{c(){e=S("span"),l=I("Player "),o=I(t),i=H(),c&&c.c(),n=H(),r=S("div");for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){e=W(f,"SPAN",{});var h=O(e);l=M(h,"Player "),o=M(h,t),h.forEach(b),i=A(f),c&&c.l(f),n=A(f),r=W(f,"DIV",{class:!0});var m=O(r);for(let C=0;C<u.length;C+=1)u[C].l(m);m.forEach(b),this.h()},h(){B(r,"class","overlay svelte-rwgxl1")},m(f,h){w(f,e,h),v(e,l),v(e,o),w(f,i,h),c&&c.m(f,h),w(f,n,h),w(f,r,h);for(let m=0;m<u.length;m+=1)u[m].m(r,null);a=!0},p(f,[h]){if((!a||h&1)&&t!==(t=f[0].player+"")&&ae(o,t),f[1]?c&&(c.d(1),c=null):c?c.p(f,h):(c=rt(f),c.c(),c.m(n.parentNode,n)),h&7){g=f[0].pieces;let m;for(m=0;m<g.length;m+=1){const C=at(f,g,m);u[m]?(u[m].p(C,h),k(u[m],1)):(u[m]=ct(C),u[m].c(),k(u[m],1),u[m].m(r,null))}for(Y(),m=g.length;m<u.length;m+=1)y(m);Z()}},i(f){if(!a){for(let h=0;h<g.length;h+=1)k(u[h]);a=!0}},o(f){u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)E(u[h]);a=!1},d(f){f&&b(e),f&&b(i),c&&c.d(f),f&&b(n),f&&b(r),ie(u,f)}}}function ol(s,e,l){let{hand:t}=e,{disabled:o}=e,{onSelectPiece:i}=e,{onSelectAuto:n}=e;const r=()=>n(t,"random"),a=()=>n(t,"win_or_random"),c=()=>n(t,"euristic"),g=()=>n(t,"minmax"),u=()=>n(t,"alphabeta_ordered"),y=f=>i(t,f);return s.$$set=f=>{"hand"in f&&l(0,t=f.hand),"disabled"in f&&l(1,o=f.disabled),"onSelectPiece"in f&&l(2,i=f.onSelectPiece),"onSelectAuto"in f&&l(3,n=f.onSelectAuto)},[t,o,i,n,r,a,c,g,u,y]}class ft extends ee{constructor(e){super(),te(this,e,ol,sl,K,{hand:0,disabled:1,onSelectPiece:2,onSelectAuto:3})}}function il(s,{delay:e=0,duration:l=400,easing:t=It}={}){const o=+getComputedStyle(s).opacity;return{delay:e,duration:l,easing:t,css:i=>`opacity: ${i*o}`}}const{window:al}=jt;function ut(s){let e,l,t,o,i,n,r,a,c,g,u,y,f,h,m,C,_,p=s[1].closeButton&&dt(s);var L=s[2];function Q(N){return{}}return L&&(n=ke(L,Q())),{c(){e=S("div"),l=S("div"),t=S("div"),p&&p.c(),o=H(),i=S("div"),n&&F(n.$$.fragment),this.h()},l(N){e=W(N,"DIV",{class:!0,style:!0});var P=O(e);l=W(P,"DIV",{class:!0,style:!0});var X=O(l);t=W(X,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-label":!0,"aria-labelledby":!0,style:!0});var le=O(t);p&&p.l(le),o=A(le),i=W(le,"DIV",{class:!0,style:!0});var ne=O(i);n&&R(n.$$.fragment,ne),ne.forEach(b),le.forEach(b),X.forEach(b),P.forEach(b),this.h()},h(){B(i,"class",r=q(s[1].classContent)+" svelte-n7cvum"),B(i,"style",s[9]),T(i,"content",!s[0]),B(t,"class",a=q(s[1].classWindow)+" svelte-n7cvum"),B(t,"role","dialog"),B(t,"aria-modal","true"),B(t,"aria-label",c=s[1].ariaLabelledBy?null:s[1].ariaLabel||null),B(t,"aria-labelledby",g=s[1].ariaLabelledBy||null),B(t,"style",s[8]),T(t,"window",!s[0]),B(l,"class",y=q(s[1].classWindowWrap)+" svelte-n7cvum"),B(l,"style",s[7]),T(l,"wrap",!s[0]),B(e,"class",f=q(s[1].classBg)+" svelte-n7cvum"),B(e,"style",s[6]),T(e,"bg",!s[0])},m(N,P){w(N,e,P),v(e,l),v(l,t),p&&p.m(t,null),v(t,o),v(t,i),n&&j(n,i,null),s[49](t),s[50](l),s[51](e),m=!0,C||(_=[D(t,"introstart",function(){pe(s[13])&&s[13].apply(this,arguments)}),D(t,"outrostart",function(){pe(s[14])&&s[14].apply(this,arguments)}),D(t,"introend",function(){pe(s[15])&&s[15].apply(this,arguments)}),D(t,"outroend",function(){pe(s[16])&&s[16].apply(this,arguments)}),D(e,"mousedown",s[20]),D(e,"mouseup",s[21])],C=!0)},p(N,P){if(s=N,s[1].closeButton?p?(p.p(s,P),P[0]&2&&k(p,1)):(p=dt(s),p.c(),k(p,1),p.m(t,o)):p&&(Y(),E(p,1,1,()=>{p=null}),Z()),L!==(L=s[2])){if(n){Y();const X=n;E(X.$$.fragment,1,0,()=>{J(X,1)}),Z()}L?(n=ke(L,Q()),F(n.$$.fragment),k(n.$$.fragment,1),j(n,i,null)):n=null}(!m||P[0]&2&&r!==(r=q(s[1].classContent)+" svelte-n7cvum"))&&B(i,"class",r),(!m||P[0]&512)&&B(i,"style",s[9]),(!m||P[0]&3)&&T(i,"content",!s[0]),(!m||P[0]&2&&a!==(a=q(s[1].classWindow)+" svelte-n7cvum"))&&B(t,"class",a),(!m||P[0]&2&&c!==(c=s[1].ariaLabelledBy?null:s[1].ariaLabel||null))&&B(t,"aria-label",c),(!m||P[0]&2&&g!==(g=s[1].ariaLabelledBy||null))&&B(t,"aria-labelledby",g),(!m||P[0]&256)&&B(t,"style",s[8]),(!m||P[0]&3)&&T(t,"window",!s[0]),(!m||P[0]&2&&y!==(y=q(s[1].classWindowWrap)+" svelte-n7cvum"))&&B(l,"class",y),(!m||P[0]&128)&&B(l,"style",s[7]),(!m||P[0]&3)&&T(l,"wrap",!s[0]),(!m||P[0]&2&&f!==(f=q(s[1].classBg)+" svelte-n7cvum"))&&B(e,"class",f),(!m||P[0]&64)&&B(e,"style",s[6]),(!m||P[0]&3)&&T(e,"bg",!s[0])},i(N){m||(k(p),n&&k(n.$$.fragment,N),Ne(()=>{u||(u=we(t,s[12],s[1].transitionWindowProps,!0)),u.run(1)}),Ne(()=>{h||(h=we(e,s[11],s[1].transitionBgProps,!0)),h.run(1)}),m=!0)},o(N){E(p),n&&E(n.$$.fragment,N),u||(u=we(t,s[12],s[1].transitionWindowProps,!1)),u.run(0),h||(h=we(e,s[11],s[1].transitionBgProps,!1)),h.run(0),m=!1},d(N){N&&b(e),p&&p.d(),n&&J(n),s[49](null),N&&u&&u.end(),s[50](null),s[51](null),N&&h&&h.end(),C=!1,Ae(_)}}}function dt(s){let e,l,t,o,i;const n=[cl,rl],r=[];function a(c,g){return g[0]&2&&(e=null),e==null&&(e=!!c[17](c[1].closeButton)),e?0:1}return l=a(s,[-1,-1,-1]),t=r[l]=n[l](s),{c(){t.c(),o=z()},l(c){t.l(c),o=z()},m(c,g){r[l].m(c,g),w(c,o,g),i=!0},p(c,g){let u=l;l=a(c,g),l===u?r[l].p(c,g):(Y(),E(r[u],1,1,()=>{r[u]=null}),Z(),t=r[l],t?t.p(c,g):(t=r[l]=n[l](c),t.c()),k(t,1),t.m(o.parentNode,o))},i(c){i||(k(t),i=!0)},o(c){E(t),i=!1},d(c){r[l].d(c),c&&b(o)}}}function rl(s){let e,l,t,o;return{c(){e=S("button"),this.h()},l(i){e=W(i,"BUTTON",{class:!0,"aria-label":!0,style:!0,type:!0}),O(e).forEach(b),this.h()},h(){B(e,"class",l=q(s[1].classCloseButton)+" svelte-n7cvum"),B(e,"aria-label","Close modal"),B(e,"style",s[10]),B(e,"type","button"),T(e,"close",!s[0])},m(i,n){w(i,e,n),t||(o=D(e,"click",s[18]),t=!0)},p(i,n){n[0]&2&&l!==(l=q(i[1].classCloseButton)+" svelte-n7cvum")&&B(e,"class",l),n[0]&1024&&B(e,"style",i[10]),n[0]&3&&T(e,"close",!i[0])},i:G,o:G,d(i){i&&b(e),t=!1,o()}}}function cl(s){let e,l,t;var o=s[1].closeButton;function i(n){return{props:{onClose:n[18]}}}return o&&(e=ke(o,i(s))),{c(){e&&F(e.$$.fragment),l=z()},l(n){e&&R(e.$$.fragment,n),l=z()},m(n,r){e&&j(e,n,r),w(n,l,r),t=!0},p(n,r){if(o!==(o=n[1].closeButton)){if(e){Y();const a=e;E(a.$$.fragment,1,0,()=>{J(a,1)}),Z()}o?(e=ke(o,i(n)),F(e.$$.fragment),k(e.$$.fragment,1),j(e,l.parentNode,l)):e=null}},i(n){t||(e&&k(e.$$.fragment,n),t=!0)},o(n){e&&E(e.$$.fragment,n),t=!1},d(n){n&&b(l),e&&J(e,n)}}}function fl(s){let e,l,t,o,i=s[2]&&ut(s);const n=s[48].default,r=Mt(n,s,s[47],null);return{c(){i&&i.c(),e=H(),r&&r.c()},l(a){i&&i.l(a),e=A(a),r&&r.l(a)},m(a,c){i&&i.m(a,c),w(a,e,c),r&&r.m(a,c),l=!0,t||(o=D(al,"keydown",s[19]),t=!0)},p(a,c){a[2]?i?(i.p(a,c),c[0]&4&&k(i,1)):(i=ut(a),i.c(),k(i,1),i.m(e.parentNode,e)):i&&(Y(),E(i,1,1,()=>{i=null}),Z()),r&&r.p&&(!l||c[1]&65536)&&Dt(r,n,a,a[47],l?Lt(n,a[47],c,null):Gt(a[47]),null)},i(a){l||(k(i),k(r,a),l=!0)},o(a){E(i),E(r,a),l=!1},d(a){i&&i.d(a),a&&b(e),r&&r.d(a),t=!1,o()}}}function ul(s,e={}){return function(t){return new s({...t,props:{...e,...t.props}})}}function dl(s,e,l){let{$$slots:t={},$$scope:o}=e;const i=Vt(),n=Jt,r=d=>d.tabIndex>=0&&!d.hidden&&!d.disabled&&d.style.display!=="none"&&d.type!=="hidden"&&Boolean(d.offsetWidth||d.offsetHeight||d.getClientRects().length);let{isTabbable:a=r}=e,{show:c=null}=e,{key:g="simple-modal"}=e,{ariaLabel:u=null}=e,{ariaLabelledBy:y=null}=e,{closeButton:f=!0}=e,{closeOnEsc:h=!0}=e,{closeOnOuterClick:m=!0}=e,{styleBg:C={}}=e,{styleWindowWrap:_={}}=e,{styleWindow:p={}}=e,{styleContent:L={}}=e,{styleCloseButton:Q={}}=e,{classBg:N=null}=e,{classWindowWrap:P=null}=e,{classWindow:X=null}=e,{classContent:le=null}=e,{classCloseButton:ne=null}=e,{unstyled:Be=!1}=e,{setContext:Se=n}=e,{transitionBg:fe=il}=e,{transitionBgProps:ue={duration:250}}=e,{transitionWindow:We=fe}=e,{transitionWindowProps:Oe=ue}=e,{disableFocusTrap:Ee=!1}=e;const Ie={ariaLabel:u,ariaLabelledBy:y,closeButton:f,closeOnEsc:h,closeOnOuterClick:m,styleBg:C,styleWindowWrap:_,styleWindow:p,styleContent:L,styleCloseButton:Q,classBg:N,classWindowWrap:P,classWindow:X,classContent:le,classCloseButton:ne,transitionBg:fe,transitionBgProps:ue,transitionWindow:We,transitionWindowProps:Oe,disableFocusTrap:Ee,isTabbable:a,unstyled:Be};let V={...Ie},se=null,de,_e,me,Pe,Me,De,Ge,Le,Ve,Ue,Fe,je,Je,Ke,Re;const wt=d=>d.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase(),re=d=>d?Object.keys(d).reduce((ce,x)=>`${ce}; ${wt(x)}: ${d[x]}`,""):"",qe=d=>!!(d&&d.constructor&&d.call&&d.apply),vt=()=>{l(6,Me=re(Object.assign({},{width:window.innerWidth,height:window.innerHeight},V.styleBg))),l(7,De=re(V.styleWindowWrap)),l(8,Ge=re(V.styleWindow)),l(9,Le=re(V.styleContent)),l(10,Ve=re(V.styleCloseButton)),l(11,Ue=V.transitionBg),l(12,Fe=V.transitionWindow)},he=()=>{};let Ye=he,be=he,Ze=he,ge=he;const ze=(d,ce={},x={},U={})=>{l(2,se=ul(d,ce)),l(1,V={...Ie,...x}),vt(),St(),l(13,Ye=$=>{U.onOpen&&U.onOpen($),i("open"),i("opening")}),l(14,be=$=>{U.onClose&&U.onClose($),i("close"),i("closing")}),l(15,Ze=$=>{U.onOpened&&U.onOpened($),i("opened")}),l(16,ge=$=>{U.onClosed&&U.onClosed($),i("closed")})},oe=(d={})=>{se&&(l(14,be=d.onClose||be),l(16,ge=d.onClosed||ge),l(2,se=null),Wt())},kt=d=>{if(V.closeOnEsc&&se&&d.key==="Escape"&&(d.preventDefault(),oe()),se&&d.key==="Tab"&&!V.disableFocusTrap){const ce=me.querySelectorAll("*"),x=Array.from(ce).filter(V.isTabbable).sort(($,Tt)=>$.tabIndex-Tt.tabIndex);let U=x.indexOf(document.activeElement);U===-1&&d.shiftKey&&(U=0),U+=x.length+(d.shiftKey?-1:1),U%=x.length,x[U].focus(),d.preventDefault()}},Ct=d=>{V.closeOnOuterClick&&(d.target===de||d.target===_e)&&(Re=d.target)},Bt=d=>{V.closeOnOuterClick&&d.target===Re&&(d.preventDefault(),oe())},St=()=>{Pe=window.scrollY,je=document.body.style.position,Je=document.body.style.overflow,Ke=document.body.style.width,document.body.style.position="fixed",document.body.style.top=`-${Pe}px`,document.body.style.overflow="hidden",document.body.style.width="100%"},Wt=()=>{document.body.style.position=je||"",document.body.style.top="",document.body.style.overflow=Je||"",document.body.style.width=Ke||"",window.scrollTo(0,Pe)};Se(g,{open:ze,close:oe});let ye=!1;Ut(()=>{ye&&oe()}),Ft(()=>{l(46,ye=!0)});function Ot(d){Te[d?"unshift":"push"](()=>{me=d,l(5,me)})}function Et(d){Te[d?"unshift":"push"](()=>{_e=d,l(4,_e)})}function Pt(d){Te[d?"unshift":"push"](()=>{de=d,l(3,de)})}return s.$$set=d=>{"isTabbable"in d&&l(22,a=d.isTabbable),"show"in d&&l(23,c=d.show),"key"in d&&l(24,g=d.key),"ariaLabel"in d&&l(25,u=d.ariaLabel),"ariaLabelledBy"in d&&l(26,y=d.ariaLabelledBy),"closeButton"in d&&l(27,f=d.closeButton),"closeOnEsc"in d&&l(28,h=d.closeOnEsc),"closeOnOuterClick"in d&&l(29,m=d.closeOnOuterClick),"styleBg"in d&&l(30,C=d.styleBg),"styleWindowWrap"in d&&l(31,_=d.styleWindowWrap),"styleWindow"in d&&l(32,p=d.styleWindow),"styleContent"in d&&l(33,L=d.styleContent),"styleCloseButton"in d&&l(34,Q=d.styleCloseButton),"classBg"in d&&l(35,N=d.classBg),"classWindowWrap"in d&&l(36,P=d.classWindowWrap),"classWindow"in d&&l(37,X=d.classWindow),"classContent"in d&&l(38,le=d.classContent),"classCloseButton"in d&&l(39,ne=d.classCloseButton),"unstyled"in d&&l(0,Be=d.unstyled),"setContext"in d&&l(40,Se=d.setContext),"transitionBg"in d&&l(41,fe=d.transitionBg),"transitionBgProps"in d&&l(42,ue=d.transitionBgProps),"transitionWindow"in d&&l(43,We=d.transitionWindow),"transitionWindowProps"in d&&l(44,Oe=d.transitionWindowProps),"disableFocusTrap"in d&&l(45,Ee=d.disableFocusTrap),"$$scope"in d&&l(47,o=d.$$scope)},s.$$.update=()=>{s.$$.dirty[0]&8388608|s.$$.dirty[1]&32768&&ye&&(qe(c)?ze(c):oe())},[Be,V,se,de,_e,me,Me,De,Ge,Le,Ve,Ue,Fe,Ye,be,Ze,ge,qe,oe,kt,Ct,Bt,a,c,g,u,y,f,h,m,C,_,p,L,Q,N,P,X,le,ne,Se,fe,ue,We,Oe,Ee,ye,o,t,Ot,Et,Pt]}class _l extends ee{constructor(e){super(),te(this,e,dl,fl,K,{isTabbable:22,show:23,key:24,ariaLabel:25,ariaLabelledBy:26,closeButton:27,closeOnEsc:28,closeOnOuterClick:29,styleBg:30,styleWindowWrap:31,styleWindow:32,styleContent:33,styleCloseButton:34,classBg:35,classWindowWrap:36,classWindow:37,classContent:38,classCloseButton:39,unstyled:0,setContext:40,transitionBg:41,transitionBgProps:42,transitionWindow:43,transitionWindowProps:44,disableFocusTrap:45},null,[-1,-1,-1])}}function _t(s,e,l){const t=s.slice();return t[1]=e[l],t}function ml(s){let e,l=s[0].history,t=[];for(let o=0;o<l.length;o+=1)t[o]=mt(_t(s,l,o));return{c(){e=S("div");for(let o=0;o<t.length;o+=1)t[o].c()},l(o){e=W(o,"DIV",{});var i=O(e);for(let n=0;n<t.length;n+=1)t[n].l(i);i.forEach(b)},m(o,i){w(o,e,i);for(let n=0;n<t.length;n+=1)t[n].m(e,null)},p(o,i){if(i&1){l=o[0].history;let n;for(n=0;n<l.length;n+=1){const r=_t(o,l,n);t[n]?t[n].p(r,i):(t[n]=mt(r),t[n].c(),t[n].m(e,null))}for(;n<t.length;n+=1)t[n].d(1);t.length=l.length}},d(o){o&&b(e),ie(t,o)}}}function hl(s){let e,l;return{c(){e=S("p"),l=I("History recording is not enabled for this game.")},l(t){e=W(t,"P",{});var o=O(e);l=M(o,"History recording is not enabled for this game."),o.forEach(b)},m(t,o){w(t,e,o),v(e,l)},p:G,d(t){t&&b(e)}}}function mt(s){let e,l=JSON.stringify(s[1])+"",t;return{c(){e=S("p"),t=I(l)},l(o){e=W(o,"P",{});var i=O(e);t=M(i,l),i.forEach(b)},m(o,i){w(o,e,i),v(e,t)},p(o,i){i&1&&l!==(l=JSON.stringify(o[1])+"")&&ae(t,l)},d(o){o&&b(e)}}}function bl(s){let e,l,t,o;function i(a,c){return a[0].historyEnabled?ml:hl}let n=i(s),r=n(s);return{c(){e=S("h4"),l=I("Game history"),t=H(),r.c(),o=z()},l(a){e=W(a,"H4",{});var c=O(e);l=M(c,"Game history"),c.forEach(b),t=A(a),r.l(a),o=z()},m(a,c){w(a,e,c),v(e,l),w(a,t,c),r.m(a,c),w(a,o,c)},p(a,[c]){n===(n=i(a))&&r?r.p(a,c):(r.d(1),r=n(a),r&&(r.c(),r.m(o.parentNode,o)))},i:G,o:G,d(a){a&&b(e),a&&b(t),r.d(a),a&&b(o)}}}function gl(s,e,l){let{game:t}=e;return s.$$set=o=>{"game"in o&&l(0,t=o.game)},[t]}class yl extends ee{constructor(e){super(),te(this,e,gl,bl,K,{game:0})}}function pl(s){let e,l,t,o;return{c(){e=S("button"),l=I("Show game history")},l(i){e=W(i,"BUTTON",{});var n=O(e);l=M(n,"Show game history"),n.forEach(b)},m(i,n){w(i,e,n),v(e,l),t||(o=D(e,"click",s[0]),t=!0)},p:G,i:G,o:G,d(i){i&&b(e),t=!1,o()}}}function wl(s,e,l){const t=Kt("simple-modal"),{open:o}=t,i=()=>o(yl,{game:n});let{game:n}=e;return s.$$set=r=>{"game"in r&&l(1,n=r.game)},[i,n]}class vl extends ee{constructor(e){super(),te(this,e,wl,pl,K,{game:1})}}function kl(s){let e,l;return e=new vl({props:{game:s[0]}}),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){j(e,t,o),l=!0},p(t,o){const i={};o&1&&(i.game=t[0]),e.$set(i)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){E(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function ht(s){let e,l;return e=new el({props:{onSelectCell:s[1],game:s[0]}}),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){j(e,t,o),l=!0},p(t,o){const i={};o&1&&(i.game=t[0]),e.$set(i)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){E(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}function bt(s){let e,l,t,o,i,n,r=s[0].state.player+"",a,c,g,u,y,f;return{c(){e=S("div"),l=S("span"),t=I("Game over!"),o=H(),i=S("span"),n=I("Winner: Player "),a=I(r),c=H(),g=S("button"),u=I("Play again")},l(h){e=W(h,"DIV",{});var m=O(e);l=W(m,"SPAN",{});var C=O(l);t=M(C,"Game over!"),C.forEach(b),o=A(m),i=W(m,"SPAN",{});var _=O(i);n=M(_,"Winner: Player "),a=M(_,r),_.forEach(b),c=A(m),g=W(m,"BUTTON",{});var p=O(g);u=M(p,"Play again"),p.forEach(b),m.forEach(b)},m(h,m){w(h,e,m),v(e,l),v(l,t),v(e,o),v(e,i),v(i,n),v(i,a),v(e,c),v(e,g),v(g,u),y||(f=D(g,"click",s[4]),y=!0)},p(h,m){m&1&&r!==(r=h[0].state.player+"")&&ae(a,r)},d(h){h&&b(e),y=!1,f()}}}function gt(s){let e,l,t,o;return e=new ft({props:{onSelectAuto:s[3],onSelectPiece:s[2],hand:He(s[0]),disabled:!1}}),t=new ft({props:{onSelectAuto:s[3],onSelectPiece:s[2],hand:xe(s[0]),disabled:!0}}),{c(){F(e.$$.fragment),l=H(),F(t.$$.fragment)},l(i){R(e.$$.fragment,i),l=A(i),R(t.$$.fragment,i)},m(i,n){j(e,i,n),w(i,l,n),j(t,i,n),o=!0},p(i,n){const r={};n&1&&(r.hand=He(i[0])),e.$set(r);const a={};n&1&&(a.hand=xe(i[0])),t.$set(a)},i(i){o||(k(e.$$.fragment,i),k(t.$$.fragment,i),o=!0)},o(i){E(e.$$.fragment,i),E(t.$$.fragment,i),o=!1},d(i){J(e,i),i&&b(l),J(t,i)}}}function Cl(s){let e,l,t,o,i,n,r,a=s[0],c,g,u=s[0],y,f;o=new nl({}),n=new _l({props:{$$slots:{default:[kl]},$$scope:{ctx:s}}});let h=ht(s),m=s[0].state.action==="winner"&&bt(s),C=gt(s);return{c(){e=S("h2"),l=I("Tic Tac Cup"),t=H(),F(o.$$.fragment),i=H(),F(n.$$.fragment),r=H(),h.c(),c=H(),m&&m.c(),g=H(),C.c(),y=z()},l(_){e=W(_,"H2",{});var p=O(e);l=M(p,"Tic Tac Cup"),p.forEach(b),t=A(_),R(o.$$.fragment,_),i=A(_),R(n.$$.fragment,_),r=A(_),h.l(_),c=A(_),m&&m.l(_),g=A(_),C.l(_),y=z()},m(_,p){w(_,e,p),v(e,l),w(_,t,p),j(o,_,p),w(_,i,p),j(n,_,p),w(_,r,p),h.m(_,p),w(_,c,p),m&&m.m(_,p),w(_,g,p),C.m(_,p),w(_,y,p),f=!0},p(_,[p]){const L={};p&257&&(L.$$scope={dirty:p,ctx:_}),n.$set(L),p&1&&K(a,a=_[0])?(Y(),E(h,1,1,G),Z(),h=ht(_),h.c(),k(h,1),h.m(c.parentNode,c)):h.p(_,p),_[0].state.action==="winner"?m?m.p(_,p):(m=bt(_),m.c(),m.m(g.parentNode,g)):m&&(m.d(1),m=null),p&1&&K(u,u=_[0])?(Y(),E(C,1,1,G),Z(),C=gt(_),C.c(),k(C,1),C.m(y.parentNode,y)):C.p(_,p)},i(_){f||(k(o.$$.fragment,_),k(n.$$.fragment,_),k(h),k(C),f=!0)},o(_){E(o.$$.fragment,_),E(n.$$.fragment,_),E(h),E(C),f=!1},d(_){_&&b(e),_&&b(t),J(o,_),_&&b(i),J(n,_),_&&b(r),h.d(_),_&&b(c),m&&m.d(_),_&&b(g),_&&b(y),C.d(_)}}}function Bl(s,e,l){let t;yt(s,ve,u=>l(6,t=u));let o=Xe({historyEnabled:!0}),i=0;const n=()=>{if(["winner","select2"].includes(o.state.action)||o.state.player!==o.player2.player||!t.player2Auto)return;const u=Ce[t.player2Strat];setTimeout(()=>{u(o,o.player2),l(0,o)},500)};return[o,({x:u,y})=>{try{if(o.state.action==="select2"){Rt(o,{x:u,y})===0&&n(),l(0,o);return}const f=He(o);qt(o,f,{x:u,y}),l(0,o),l(0,o)}catch(f){console.error("Could not select cell"),console.error(f),console.error("Game should be able to keep working")}},(u,y)=>{try{Yt(o,u,y)}catch(f){console.error("Could not select piece"),console.error(f),console.error("Game should be able to keep working")}l(0,o)},(u,y)=>{const f=Ce[y];f(o,u),n(),l(0,o)},()=>{i++;const u=i%2===1;l(0,o=Xe({player2Start:u,historyEnabled:!0})),u&&t.player2Auto&&n()}]}class Sl extends ee{constructor(e){super(),te(this,e,Bl,Cl,K,{})}}function Wl(s){let e,l;return e=new Sl({}),{c(){F(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,o){j(e,t,o),l=!0},p:G,i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){E(e.$$.fragment,t),l=!1},d(t){J(e,t)}}}class Nl extends ee{constructor(e){super(),te(this,e,null,Wl,K,{})}}export{Nl as default};
