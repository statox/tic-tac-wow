import{S as z,i as q,s as D,k as w,l as E,m as S,h as m,n as x,I as M,b as v,J as F,B,K as Y,q as I,a as N,r as G,c as P,G as b,u as Z,L as De,f as g,g as K,d as Q,t as k,e as ue,w as X,x as W,y as j,z as J,M as Xe,N as de,O as Ge,H as Te,P as We,Q as je}from"../../chunks/index-780d2971.js";import{w as Je}from"../../chunks/index-341ca319.js";const _e=t=>{const e=t===1?1:-1,n=[1,1,2,2,3,3].map(l=>l*e);return{player:t,pieces:n,unselectableIndexes:new Set,selectedPiece:null}},pe=t=>{const e=[];for(let l=0;l<3;l++){e.push([]);for(let o=0;o<3;o++)e[e.length-1].push([])}const n={state:{player:1,action:"select1"},grid:e,player1:_e(1),player2:_e(2)};return t!=null&&t.player2Start&&(n.state.player=2),n},O=t=>{const e=t.player1.unselectableIndexes,n=t.player2.unselectableIndexes,l=JSON.parse(JSON.stringify(t));return l.player1.unselectableIndexes=new Set([...e.values()]),l.player2.unselectableIndexes=new Set([...n.values()]),l},H=t=>t.state.player===1?t.player1:t.player2,$=t=>t.state.player===1?t.player2:t.player1,se=(t,e,n)=>{const l=t[n][e];return l.length?l[l.length-1]:null},T=(t,e,n)=>{if(e<0||n<0||e>2||n>2)throw new Error(`Invalid coordinates ${e},${n}`);const l=se(t,e,n);return l===null?null:l>0?1:2},Re=(t,e,n)=>{if(e<0||n<0||e>2||n>2)throw new Error(`Invalid coordinates ${e},${n}`);const l=se(t,e,n);return l===null?0:Math.abs(l)},V=(t,e,n)=>{const l=T(t,e.x,e.y),o=T(t,n.x,n.y);return l!==null&&l===o},L=t=>{const{grid:e}=t,n=new Set;for(let l=0;l<3;l++)if(V(e,{x:0,y:l},{x:1,y:l})&&V(e,{x:0,y:l},{x:2,y:l})){const o=T(e,0,l);n.add(o)}for(let l=0;l<3;l++)if(V(e,{x:l,y:0},{x:l,y:1})&&V(e,{x:l,y:0},{x:l,y:2})){const o=T(e,l,0);n.add(o)}if(V(e,{x:0,y:0},{x:1,y:1})&&V(e,{x:0,y:0},{x:2,y:2})){const l=T(e,0,0);n.add(l)}if(V(e,{x:0,y:2},{x:1,y:1})&&V(e,{x:0,y:2},{x:2,y:0})){const l=T(e,0,2);n.add(l)}if(n.delete(null),n.size===1){t.state.player=[...n.values()][0],t.state.action="winner";return}if(n.size===2){t.state.player=1,t.state.action="draw";return}},He=(t,e,n)=>{if(t.state.player!==e.player||t.state.action!=="select1")throw new Error("invalid_step");if(n>=e.pieces.length||n<0)throw new Error("oob_selection_index");if(e.selectedPiece!==null)throw new Error("previous_selection_in_hand");if(e.unselectableIndexes.has(n))throw new Error("piece_already_used");e.selectedPiece={from:"hand",index:n},t.state.action="select2"},Fe=(t,e,n)=>{if(t.state.player!==e.player||t.state.action!=="select1")throw new Error("invalid_step");const{x:l,y:o}=n;if(l<0||o<0||l>2||o>2)throw new Error(`Invalid coordinates ${l},${o}`);if(e.selectedPiece!==null)throw new Error("previous_selection_in_hand");if(t.grid[o][l].length===0)throw new Error("empty_stack_selection");if(T(t.grid,l,o)!==e.player)throw new Error("opponent_owned_selection");e.selectedPiece={from:"board",position:{x:l,y:o}},t.state.action="select2"},Be=(t,e)=>{if(t.state.action!=="select2")throw new Error("invalid_step");const n=H(t);if(n.selectedPiece===null)throw new Error("no_selection_in_hand");const{x:l,y:o}=e,s=n.selectedPiece.from==="hand"?n.pieces[n.selectedPiece.index]:se(t.grid,n.selectedPiece.position.x,n.selectedPiece.position.y);if(s===null)throw new Error("selected_piece_is_null");if(Re(t.grid,l,o)>=Math.abs(s))throw new Error("destination_bigger_than_piece");return t.grid[e.y][e.x].push(s),n.selectedPiece.from==="hand"&&n.unselectableIndexes.add(n.selectedPiece.index),n.selectedPiece.from==="board"&&t.grid[n.selectedPiece.position.y][n.selectedPiece.position.x].pop(),n.selectedPiece=null,t.state.action="select1",t.state.player=t.state.player===1?2:1,L(t),0},C=(t,e,n)=>{n.from.from==="hand"?He(t,e,n.from.index):Fe(t,e,n.from.position),Be(t,n.to)},Le=(t,e)=>{const n=[];for(let l=0;l<3;l++)for(let o=0;o<3;o++){const s=Re(t.grid,o,l);(!s||s<Math.abs(e))&&n.push({x:o,y:l})}return n},U=(t,e)=>xe(t,e).reduce((l,o)=>{const s=Oe(t,e,o),r=Le(t,s);for(const f of r)l.push({from:o,to:f});return l},[]),xe=(t,e)=>{const n=e.pieces.map((l,o)=>o).filter(l=>!e.unselectableIndexes.has(l)).map(l=>({index:l,from:"hand"}));for(let l=0;l<3;l++)for(let o=0;o<3;o++)T(t.grid,o,l)===e.player&&n.push({from:"board",position:{x:o,y:l}});return n},Oe=(t,e,n)=>{if(n.from==="board"){const l=t.grid[n.position.y][n.position.x];return l[l.length-1]}return e.pieces[n.index]},ee=t=>{if(L(t),t.state.action==="winner")return t.state.player===1?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER;if(t.state.action==="draw")return Number.MAX_SAFE_INTEGER/2;const e=U(t,t.player1),n=U(t,t.player2);if(e.length===0&&n.length===0)return Number.MAX_SAFE_INTEGER/2;let l=0;const o=T(t.grid,1,1);return o===t.player1.player?l+=2:o===t.player2.player&&(l-=2),[T(t.grid,0,0),T(t.grid,2,0),T(t.grid,0,2),T(t.grid,2,2)].forEach(r=>{r!==null&&(l+=r!==null&&r===1?1:-1)}),l},he=(t,e,n)=>{let l=0;n.from.from==="board"&&(l+=10);const o=Oe(t,e,n.from);return l+=Math.abs(o),n.to.x===1&&n.to.y===1&&(l+=5),(n.to.x===0&&n.to.y===0||n.to.x===2&&n.to.y===0||n.to.x===0&&n.to.y===2||n.to.x===2&&n.to.y===2)&&(l+=3),l},ne=(t,e,n,l,o)=>{const s=U(t,e);if(L(t),n===0||!s.length||["draw","winner"].includes(t.state.action))return{score:ee(t),move:null};if(e.player===1){let i=Number.MIN_SAFE_INTEGER,u;for(const _ of s){const a=O(t),d=H(a),c=$(a);C(a,d,_);const p=ne(a,c,n-1,l,o);if((i===void 0||p.score>=i)&&(i=p.score,u={score:p.score,move:_}),i>o)break;l=Math.max(l,i)}if(!u)throw new Error("no_minmax_result");return u}let r=Number.MAX_SAFE_INTEGER,f;for(const i of s){const u=O(t),_=H(u),a=$(u);C(u,_,i);const d=ne(u,a,n-1,l,o);if((r===void 0||d.score<=r)&&(r=d.score,f={score:d.score,move:i}),r<l)break;o=Math.min(o,r)}if(!f)throw new Error("no_minmax_result");return f},ze=(t,e)=>{const n=ne(t,e,3,Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);if(!n.move)throw new Error("no_move_possible");const l=n.move;C(t,e,l)},oe=(t,e,n,l,o)=>{const s=U(t,e);if(L(t),n===0||!s.length||["draw","winner"].includes(t.state.action))return{score:ee(t),move:null};if(s.sort((i,u)=>he(t,e,u)-he(t,e,i)),e.player===1){let i=Number.MIN_SAFE_INTEGER,u;for(const _ of s){const a=O(t),d=H(a),c=$(a);C(a,d,_);const p=oe(a,c,n-1,l,o);if((i===void 0||p.score>=i)&&(i=p.score,u={score:p.score,move:_}),i>o)break;l=Math.max(l,i)}if(!u)throw new Error("no_minmax_result");return u}let r=Number.MAX_SAFE_INTEGER,f;for(const i of s){const u=O(t),_=H(u),a=$(u);C(u,_,i);const d=oe(u,a,n-1,l,o);if((r===void 0||d.score<=r)&&(r=d.score,f={score:d.score,move:i}),r<l)break;o=Math.min(o,r)}if(!f)throw new Error("no_minmax_result");return f},qe=(t,e)=>{const n=oe(t,e,4,Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);if(!n.move)throw new Error("no_move_possible");const l=n.move;C(t,e,l)},Ke=(t,e)=>{const n=U(t,e);if(!n.length)throw new Error("no_move_possible");const s=[...n.reduce((r,f)=>{const i=O(t),u=e.player===1?i.player1:i.player2;C(i,u,f);const _=ee(i);return r.push({move:f,score:_}),r},[])].sort((r,f)=>e.player===1?f.score-r.score:r.score-f.score)[0].move;C(t,e,s)},re=(t,e,n)=>{const l=U(t,e);if(L(t),n===0||!l.length||["draw","winner"].includes(t.state.action))return{score:ee(t),move:null};if(e.player===1){let o=Number.MIN_SAFE_INTEGER,s;for(const r of l){const f=O(t),i=H(f),u=$(f);C(f,i,r);const _=re(f,u,n-1);(o===void 0||_.score>=o)&&(o=_.score,s={score:_.score,move:r})}if(!s)throw new Error("no_minmax_result");return s}else{let o=Number.MAX_SAFE_INTEGER,s;for(const r of l){const f=O(t),i=H(f),u=$(f);C(f,i,r);const _=re(f,u,n-1);(o===void 0||_.score<=o)&&(o=_.score,s={score:_.score,move:r})}if(!s)throw new Error("no_minmax_result");return s}},Qe=(t,e)=>{const n=re(t,e,2);if(!n.move)throw new Error("no_move_possible");const l=n.move;C(t,e,l)},$e=(t,e,n)=>{const l=e.player===1?1:-1,o=U(t,e);if(L(t),n===0||!o.length||["draw","winner"].includes(t.state.action))return{score:ee(t)*l,move:null};let s=Number.MIN_SAFE_INTEGER,r;for(const f of o){const i=O(t),u=H(i),_=$(i);C(i,u,f);const a=$e(i,_,n-1);a.score=-a.score,(s===void 0||a.score>=s)&&(s=a.score,r={score:a.score,move:f})}if(!r)throw new Error("no_minmax_result");return r},Ye=(t,e)=>{const n=$e(t,e,2);if(!n.move)throw new Error("no_move_possible");const l=n.move;C(t,e,l)},Ue=(t,e)=>{const n=U(t,e);if(n.length===0)throw new Error("no_move_possible");const l=Math.floor(Math.random()*n.length),o=n[l];C(t,e,o)},Ze=(t,e)=>{const n=U(t,e);if(!n.length)throw new Error("no_move_possible");for(const l of n){const o=O(t),s=e.player===1?o.player1:o.player2;if(C(o,s,l),L(o),o.state.action==="winner"&&o.state.player===e.player){C(t,e,l);return}}Ue(t,e)},le={random:Ue,win_or_random:Ze,euristic:Ke,minmax:Qe,negamax:Ye,alphabeta:ze,alphabeta_ordered:qe},et={player2Auto:!0,player2Strat:"alphabeta_ordered"},te=Je(et);function me(t,e,n){const l=t.slice();return l[5]=e[n],l}function ye(t){let e,n=t[5]+"",l,o;return{c(){e=w("div"),l=I(n),o=N(),this.h()},l(s){e=E(s,"DIV",{class:!0});var r=S(e);l=G(r,n),o=P(r),r.forEach(m),this.h()},h(){x(e,"class","piece svelte-950i0e"),M(e,"player1",t[5]>0),M(e,"player2",t[5]<0),M(e,"small-circle",Math.abs(t[5])===1),M(e,"medium-circle",Math.abs(t[5])===2),M(e,"large-circle",Math.abs(t[5])===3)},m(s,r){v(s,e,r),b(e,l),b(e,o)},p(s,r){r&1&&n!==(n=s[5]+"")&&Z(l,n),r&1&&M(e,"player1",s[5]>0),r&1&&M(e,"player2",s[5]<0),r&1&&M(e,"small-circle",Math.abs(s[5])===1),r&1&&M(e,"medium-circle",Math.abs(s[5])===2),r&1&&M(e,"large-circle",Math.abs(s[5])===3)},d(s){s&&m(e)}}}function tt(t){let e,n,l,o=[...t[0]].reverse(),s=[];for(let r=0;r<o.length;r+=1)s[r]=ye(me(t,o,r));return{c(){e=w("button");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=E(r,"BUTTON",{class:!0});var f=S(e);for(let i=0;i<s.length;i+=1)s[i].l(f);f.forEach(m),this.h()},h(){x(e,"class","cell svelte-950i0e"),M(e,"selected",t[1]),M(e,"disabledHand",t[3]),M(e,"disabledCell",t[2])},m(r,f){v(r,e,f);for(let i=0;i<s.length;i+=1)s[i].m(e,null);n||(l=F(e,"click",t[4]),n=!0)},p(r,[f]){if(f&1){o=[...r[0]].reverse();let i;for(i=0;i<o.length;i+=1){const u=me(r,o,i);s[i]?s[i].p(u,f):(s[i]=ye(u),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=o.length}f&2&&M(e,"selected",r[1]),f&8&&M(e,"disabledHand",r[3]),f&4&&M(e,"disabledCell",r[2])},i:B,o:B,d(r){r&&m(e),Y(s,r),n=!1,l()}}}function lt(t,e,n){let{pieces:l}=e,{selected:o=!1}=e,{disabledCell:s=!1}=e,{disabledHand:r=!1}=e;function f(i){De.call(this,t,i)}return t.$$set=i=>{"pieces"in i&&n(0,l=i.pieces),"selected"in i&&n(1,o=i.selected),"disabledCell"in i&&n(2,s=i.disabledCell),"disabledHand"in i&&n(3,r=i.disabledHand)},[l,o,s,r,f]}class Ve extends z{constructor(e){super(),q(this,e,lt,tt,D,{pieces:0,selected:1,disabledCell:2,disabledHand:3})}}function be(t,e,n){const l=t.slice();return l[4]=e[n],l[6]=n,l}function ve(t,e,n){const l=t.slice();return l[7]=e[n],l[9]=n,l}function we(t){let e,n;function l(){return t[3](t[9],t[6])}return e=new Ve({props:{pieces:t[7],selected:t[2]({x:t[9],y:t[6]})}}),e.$on("click",l),{c(){X(e.$$.fragment)},l(o){W(e.$$.fragment,o)},m(o,s){j(e,o,s),n=!0},p(o,s){t=o;const r={};s&1&&(r.pieces=t[7]),e.$set(r)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){J(e,o)}}}function Ee(t){let e,n,l=t[4],o=[];for(let r=0;r<l.length;r+=1)o[r]=we(ve(t,l,r));const s=r=>k(o[r],1,1,()=>{o[r]=null});return{c(){for(let r=0;r<o.length;r+=1)o[r].c();e=ue()},l(r){for(let f=0;f<o.length;f+=1)o[f].l(r);e=ue()},m(r,f){for(let i=0;i<o.length;i+=1)o[i].m(r,f);v(r,e,f),n=!0},p(r,f){if(f&7){l=r[4];let i;for(i=0;i<l.length;i+=1){const u=ve(r,l,i);o[i]?(o[i].p(u,f),g(o[i],1)):(o[i]=we(u),o[i].c(),g(o[i],1),o[i].m(e.parentNode,e))}for(K(),i=l.length;i<o.length;i+=1)s(i);Q()}},i(r){if(!n){for(let f=0;f<l.length;f+=1)g(o[f]);n=!0}},o(r){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)k(o[f]);n=!1},d(r){Y(o,r),r&&m(e)}}}function nt(t){let e,n,l=JSON.stringify(t[0].state)+"",o,s,r,f,i=t[0].grid,u=[];for(let a=0;a<i.length;a+=1)u[a]=Ee(be(t,i,a));const _=a=>k(u[a],1,1,()=>{u[a]=null});return{c(){e=w("div"),n=w("div"),o=I(l),s=N(),r=w("div");for(let a=0;a<u.length;a+=1)u[a].c();this.h()},l(a){e=E(a,"DIV",{class:!0});var d=S(e);n=E(d,"DIV",{});var c=S(n);o=G(c,l),c.forEach(m),s=P(d),r=E(d,"DIV",{class:!0});var p=S(r);for(let h=0;h<u.length;h+=1)u[h].l(p);p.forEach(m),d.forEach(m),this.h()},h(){x(r,"class","overlay svelte-1n6jeyv"),x(e,"class","board svelte-1n6jeyv")},m(a,d){v(a,e,d),b(e,n),b(n,o),b(e,s),b(e,r);for(let c=0;c<u.length;c+=1)u[c].m(r,null);f=!0},p(a,[d]){if((!f||d&1)&&l!==(l=JSON.stringify(a[0].state)+"")&&Z(o,l),d&7){i=a[0].grid;let c;for(c=0;c<i.length;c+=1){const p=be(a,i,c);u[c]?(u[c].p(p,d),g(u[c],1)):(u[c]=Ee(p),u[c].c(),g(u[c],1),u[c].m(r,null))}for(K(),c=i.length;c<u.length;c+=1)_(c);Q()}},i(a){if(!f){for(let d=0;d<i.length;d+=1)g(u[d]);f=!0}},o(a){u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)k(u[d]);f=!1},d(a){a&&m(e),Y(u,a)}}}function ot(t,e,n){let{game:l}=e,{onSelectCell:o}=e;const s=f=>{for(const i of[l.player1,l.player2]){const{selectedPiece:u}=i;if((u==null?void 0:u.from)==="board"&&u.position.x===f.x&&u.position.y===f.y)return!0}return!1},r=(f,i)=>o({x:f,y:i});return t.$$set=f=>{"game"in f&&n(0,l=f.game),"onSelectCell"in f&&n(1,o=f.onSelectCell)},[l,o,s,r]}class rt extends z{constructor(e){super(),q(this,e,ot,nt,D,{game:0,onSelectCell:1})}}function Se(t,e,n){const l=t.slice();return l[3]=e[n],l}function ge(t){let e,n=t[3]+"",l,o;return{c(){e=w("option"),l=I(n),o=N(),this.h()},l(s){e=E(s,"OPTION",{});var r=S(e);l=G(r,n),o=P(r),r.forEach(m),this.h()},h(){e.__value=t[3],e.value=e.__value},m(s,r){v(s,e,r),b(e,l),b(e,o)},p:B,d(s){s&&m(e)}}}function st(t){let e,n,l=t[0].player2Auto?"Human player 2":"Computer player 2",o,s,r,f,i,u=Object.keys(le),_=[];for(let a=0;a<u.length;a+=1)_[a]=ge(Se(t,u,a));return{c(){e=w("div"),n=w("button"),o=I(l),s=N(),r=w("select");for(let a=0;a<_.length;a+=1)_[a].c();this.h()},l(a){e=E(a,"DIV",{});var d=S(e);n=E(d,"BUTTON",{});var c=S(n);o=G(c,l),c.forEach(m),s=P(d),r=E(d,"SELECT",{});var p=S(r);for(let h=0;h<_.length;h+=1)_[h].l(p);p.forEach(m),d.forEach(m),this.h()},h(){t[0].player2Strat===void 0&&Xe(()=>t[2].call(r))},m(a,d){v(a,e,d),b(e,n),b(n,o),b(e,s),b(e,r);for(let c=0;c<_.length;c+=1)_[c].m(r,null);de(r,t[0].player2Strat),f||(i=[F(n,"click",t[1]),F(r,"change",t[2])],f=!0)},p(a,[d]){if(d&1&&l!==(l=a[0].player2Auto?"Human player 2":"Computer player 2")&&Z(o,l),d&0){u=Object.keys(le);let c;for(c=0;c<u.length;c+=1){const p=Se(a,u,c);_[c]?_[c].p(p,d):(_[c]=ge(p),_[c].c(),_[c].m(r,null))}for(;c<_.length;c+=1)_[c].d(1);_.length=u.length}d&1&&de(r,a[0].player2Strat)},i:B,o:B,d(a){a&&m(e),Y(_,a),f=!1,Ge(i)}}}function ct(t,e,n){let l;Te(t,te,r=>n(0,l=r));const o=()=>We(te,l.player2Auto=!l.player2Auto,l);function s(){l.player2Strat=je(this),te.set(l)}return[l,o,s]}class it extends z{constructor(e){super(),q(this,e,ct,st,D,{})}}function ke(t,e,n){const l=t.slice();return l[10]=e[n],l[12]=n,l}function Me(t){let e,n,l,o,s,r,f,i,u,_,a,d,c,p,h,R;return{c(){e=w("button"),n=I("Random"),l=N(),o=w("button"),s=I("Win or random"),r=N(),f=w("button"),i=I("Euristic"),u=N(),_=w("button"),a=I("MinMax"),d=N(),c=w("button"),p=I("AlphaBeta ordered")},l(y){e=E(y,"BUTTON",{});var A=S(e);n=G(A,"Random"),A.forEach(m),l=P(y),o=E(y,"BUTTON",{});var ce=S(o);s=G(ce,"Win or random"),ce.forEach(m),r=P(y),f=E(y,"BUTTON",{});var ie=S(f);i=G(ie,"Euristic"),ie.forEach(m),u=P(y),_=E(y,"BUTTON",{});var ae=S(_);a=G(ae,"MinMax"),ae.forEach(m),d=P(y),c=E(y,"BUTTON",{});var fe=S(c);p=G(fe,"AlphaBeta ordered"),fe.forEach(m)},m(y,A){v(y,e,A),b(e,n),v(y,l,A),v(y,o,A),b(o,s),v(y,r,A),v(y,f,A),b(f,i),v(y,u,A),v(y,_,A),b(_,a),v(y,d,A),v(y,c,A),b(c,p),h||(R=[F(e,"click",t[4]),F(o,"click",t[5]),F(f,"click",t[6]),F(_,"click",t[7]),F(c,"click",t[8])],h=!0)},p:B,d(y){y&&m(e),y&&m(l),y&&m(o),y&&m(r),y&&m(f),y&&m(u),y&&m(_),y&&m(d),y&&m(c),h=!1,Ge(R)}}}function Ne(t){var o;let e,n;function l(){return t[9](t[12])}return e=new Ve({props:{disabledHand:t[1],disabledCell:t[0].unselectableIndexes.has(t[12]),pieces:[t[10]],selected:((o=t[0].selectedPiece)==null?void 0:o.from)==="hand"&&t[0].selectedPiece.index===t[12]}}),e.$on("click",l),{c(){X(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,r){j(e,s,r),n=!0},p(s,r){var i;t=s;const f={};r&2&&(f.disabledHand=t[1]),r&1&&(f.disabledCell=t[0].unselectableIndexes.has(t[12])),r&1&&(f.pieces=[t[10]]),r&1&&(f.selected=((i=t[0].selectedPiece)==null?void 0:i.from)==="hand"&&t[0].selectedPiece.index===t[12]),e.$set(f)},i(s){n||(g(e.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),n=!1},d(s){J(e,s)}}}function at(t){let e,n,l=t[0].player+"",o,s,r,f,i,u=!t[1]&&Me(t),_=t[0].pieces,a=[];for(let c=0;c<_.length;c+=1)a[c]=Ne(ke(t,_,c));const d=c=>k(a[c],1,1,()=>{a[c]=null});return{c(){e=w("span"),n=I("Player "),o=I(l),s=N(),u&&u.c(),r=N(),f=w("div");for(let c=0;c<a.length;c+=1)a[c].c();this.h()},l(c){e=E(c,"SPAN",{});var p=S(e);n=G(p,"Player "),o=G(p,l),p.forEach(m),s=P(c),u&&u.l(c),r=P(c),f=E(c,"DIV",{class:!0});var h=S(f);for(let R=0;R<a.length;R+=1)a[R].l(h);h.forEach(m),this.h()},h(){x(f,"class","overlay svelte-rwgxl1")},m(c,p){v(c,e,p),b(e,n),b(e,o),v(c,s,p),u&&u.m(c,p),v(c,r,p),v(c,f,p);for(let h=0;h<a.length;h+=1)a[h].m(f,null);i=!0},p(c,[p]){if((!i||p&1)&&l!==(l=c[0].player+"")&&Z(o,l),c[1]?u&&(u.d(1),u=null):u?u.p(c,p):(u=Me(c),u.c(),u.m(r.parentNode,r)),p&7){_=c[0].pieces;let h;for(h=0;h<_.length;h+=1){const R=ke(c,_,h);a[h]?(a[h].p(R,p),g(a[h],1)):(a[h]=Ne(R),a[h].c(),g(a[h],1),a[h].m(f,null))}for(K(),h=_.length;h<a.length;h+=1)d(h);Q()}},i(c){if(!i){for(let p=0;p<_.length;p+=1)g(a[p]);i=!0}},o(c){a=a.filter(Boolean);for(let p=0;p<a.length;p+=1)k(a[p]);i=!1},d(c){c&&m(e),c&&m(s),u&&u.d(c),c&&m(r),c&&m(f),Y(a,c)}}}function ft(t,e,n){let{hand:l}=e,{disabled:o}=e,{onSelectPiece:s}=e,{onSelectAuto:r}=e;const f=()=>r(l,"random"),i=()=>r(l,"win_or_random"),u=()=>r(l,"euristic"),_=()=>r(l,"minmax"),a=()=>r(l,"alphabeta_ordered"),d=c=>s(l,c);return t.$$set=c=>{"hand"in c&&n(0,l=c.hand),"disabled"in c&&n(1,o=c.disabled),"onSelectPiece"in c&&n(2,s=c.onSelectPiece),"onSelectAuto"in c&&n(3,r=c.onSelectAuto)},[l,o,s,r,f,i,u,_,a,d]}class Pe extends z{constructor(e){super(),q(this,e,ft,at,D,{hand:0,disabled:1,onSelectPiece:2,onSelectAuto:3})}}function Ce(t){let e,n;return e=new rt({props:{onSelectCell:t[1],game:t[0]}}),{c(){X(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,o){j(e,l,o),n=!0},p(l,o){const s={};o&1&&(s.game=l[0]),e.$set(s)},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){J(e,l)}}}function Ae(t){let e,n,l,o,s,r,f=t[0].state.player+"",i,u,_,a,d,c;return{c(){e=w("div"),n=w("span"),l=I("Game over!"),o=N(),s=w("span"),r=I("Winner: Player "),i=I(f),u=N(),_=w("button"),a=I("Play again")},l(p){e=E(p,"DIV",{});var h=S(e);n=E(h,"SPAN",{});var R=S(n);l=G(R,"Game over!"),R.forEach(m),o=P(h),s=E(h,"SPAN",{});var y=S(s);r=G(y,"Winner: Player "),i=G(y,f),y.forEach(m),u=P(h),_=E(h,"BUTTON",{});var A=S(_);a=G(A,"Play again"),A.forEach(m),h.forEach(m)},m(p,h){v(p,e,h),b(e,n),b(n,l),b(e,o),b(e,s),b(s,r),b(s,i),b(e,u),b(e,_),b(_,a),d||(c=F(_,"click",t[4]),d=!0)},p(p,h){h&1&&f!==(f=p[0].state.player+"")&&Z(i,f)},d(p){p&&m(e),d=!1,c()}}}function Ie(t){let e,n,l,o;return e=new Pe({props:{onSelectAuto:t[3],onSelectPiece:t[2],hand:H(t[0]),disabled:!1}}),l=new Pe({props:{onSelectAuto:t[3],onSelectPiece:t[2],hand:$(t[0]),disabled:!0}}),{c(){X(e.$$.fragment),n=N(),X(l.$$.fragment)},l(s){W(e.$$.fragment,s),n=P(s),W(l.$$.fragment,s)},m(s,r){j(e,s,r),v(s,n,r),j(l,s,r),o=!0},p(s,r){const f={};r&1&&(f.hand=H(s[0])),e.$set(f);const i={};r&1&&(i.hand=$(s[0])),l.$set(i)},i(s){o||(g(e.$$.fragment,s),g(l.$$.fragment,s),o=!0)},o(s){k(e.$$.fragment,s),k(l.$$.fragment,s),o=!1},d(s){J(e,s),s&&m(n),J(l,s)}}}function ut(t){let e,n,l,o=t[0],s,r,f=t[0],i;n=new it({});let u=Ce(t),_=t[0].state.action==="winner"&&Ae(t),a=Ie(t);return{c(){e=w("div"),X(n.$$.fragment),l=N(),u.c(),s=N(),_&&_.c(),r=N(),a.c(),this.h()},l(d){e=E(d,"DIV",{class:!0});var c=S(e);W(n.$$.fragment,c),l=P(c),u.l(c),s=P(c),_&&_.l(c),r=P(c),a.l(c),c.forEach(m),this.h()},h(){x(e,"class","d-flex justify-content-center")},m(d,c){v(d,e,c),j(n,e,null),b(e,l),u.m(e,null),b(e,s),_&&_.m(e,null),b(e,r),a.m(e,null),i=!0},p(d,[c]){c&1&&D(o,o=d[0])?(K(),k(u,1,1,B),Q(),u=Ce(d),u.c(),g(u,1),u.m(e,s)):u.p(d,c),d[0].state.action==="winner"?_?_.p(d,c):(_=Ae(d),_.c(),_.m(e,r)):_&&(_.d(1),_=null),c&1&&D(f,f=d[0])?(K(),k(a,1,1,B),Q(),a=Ie(d),a.c(),g(a,1),a.m(e,null)):a.p(d,c)},i(d){i||(g(n.$$.fragment,d),g(u),g(a),i=!0)},o(d){k(n.$$.fragment,d),k(u),k(a),i=!1},d(d){d&&m(e),J(n),u.d(d),_&&_.d(),a.d(d)}}}function dt(t,e,n){let l;Te(t,te,a=>n(6,l=a));let o=pe(),s=0;const r=()=>{if(["winner","select2"].includes(o.state.action)||o.state.player!==o.player2.player||!l.player2Auto)return;const a=le[l.player2Strat];setTimeout(()=>{a(o,o.player2),n(0,o)},500)};return[o,({x:a,y:d})=>{try{if(o.state.action==="select2"){Be(o,{x:a,y:d})===0&&r(),n(0,o);return}const c=H(o);Fe(o,c,{x:a,y:d}),n(0,o),n(0,o)}catch(c){console.error("Could not select cell"),console.error(c),console.error("Game should be able to keep working")}},(a,d)=>{try{He(o,a,d)}catch(c){console.error("Could not select piece"),console.error(c),console.error("Game should be able to keep working")}n(0,o)},(a,d)=>{const c=le[d];c(o,a),r(),n(0,o)},()=>{s++;const a=s%2===1;n(0,o=pe({player2Start:a})),a&&l.player2Auto&&r()}]}class _t extends z{constructor(e){super(),q(this,e,dt,ut,D,{})}}function pt(t){let e,n;return e=new _t({}),{c(){X(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,o){j(e,l,o),n=!0},p:B,i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){J(e,l)}}}class yt extends z{constructor(e){super(),q(this,e,null,pt,D,{})}}export{yt as default};
