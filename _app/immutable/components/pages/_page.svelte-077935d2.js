import{S as L,i as z,s as B,k as w,l as E,m as g,h as m,n as J,I as M,b as v,J as O,B as T,K as Z,q as N,a as k,r as C,c as P,G as y,u as x,L as Re,f as b,g as Q,d as Y,t as S,e as se,w as H,x as V,y as U,z as D,M as Oe,N as ce,O as Pe,H as Me,P as Be,Q as Fe}from"../../chunks/index-780d2971.js";import{w as He}from"../../chunks/index-341ca319.js";const ie=t=>{const e=t===1?1:-1,l=[1,1,2,2,3,3].map(n=>n*e);return{player:t,pieces:l,unselectableIndexes:new Set,selectedPiece:null}},ae=t=>{const e=[];for(let n=0;n<3;n++){e.push([]);for(let o=0;o<3;o++)e[e.length-1].push([])}const l={state:{player:1,action:"select1"},grid:e,player1:ie(1),player2:ie(2)};return t!=null&&t.player2Start&&(l.state.player=2),l},W=t=>{const e=t.player1.unselectableIndexes,l=t.player2.unselectableIndexes,n=JSON.parse(JSON.stringify(t));return n.player1.unselectableIndexes=new Set([...e.values()]),n.player2.unselectableIndexes=new Set([...l.values()]),n},$=t=>t.state.player===1?t.player1:t.player2,X=t=>t.state.player===1?t.player2:t.player1,re=(t,e,l)=>{const n=t[l][e];return n.length?n[n.length-1]:null},I=(t,e,l)=>{if(e<0||l<0||e>2||l>2)throw new Error(`Invalid coordinates ${e},${l}`);const n=re(t,e,l);return n===null?null:n>0?1:2},Ne=(t,e,l)=>{if(e<0||l<0||e>2||l>2)throw new Error(`Invalid coordinates ${e},${l}`);const n=re(t,e,l);return n===null?0:Math.abs(n)},R=(t,e,l)=>{const n=I(t,e.x,e.y),o=I(t,l.x,l.y);return n!==null&&n===o},q=t=>{const{grid:e}=t,l=new Set;for(let n=0;n<3;n++)if(R(e,{x:0,y:n},{x:1,y:n})&&R(e,{x:0,y:n},{x:2,y:n})){const o=I(e,0,n);l.add(o)}for(let n=0;n<3;n++)if(R(e,{x:n,y:0},{x:n,y:1})&&R(e,{x:n,y:0},{x:n,y:2})){const o=I(e,n,0);l.add(o)}if(R(e,{x:0,y:0},{x:1,y:1})&&R(e,{x:0,y:0},{x:2,y:2})){const n=I(e,0,0);l.add(n)}if(R(e,{x:0,y:2},{x:1,y:1})&&R(e,{x:0,y:2},{x:2,y:0})){const n=I(e,0,2);l.add(n)}if(l.delete(null),l.size===1){t.state.player=[...l.values()][0],t.state.action="winner";return}if(l.size===2){t.state.player=1,t.state.action="draw";return}},Ce=(t,e,l)=>{if(t.state.player!==e.player||t.state.action!=="select1")throw new Error("invalid_step");if(l>=e.pieces.length||l<0)throw new Error("oob_selection_index");if(e.selectedPiece!==null)throw new Error("previous_selection_in_hand");if(e.unselectableIndexes.has(l))throw new Error("piece_already_used");e.selectedPiece={from:"hand",index:l},t.state.action="select2"},Ie=(t,e,l)=>{if(t.state.player!==e.player||t.state.action!=="select1")throw new Error("invalid_step");const{x:n,y:o}=l;if(n<0||o<0||n>2||o>2)throw new Error(`Invalid coordinates ${n},${o}`);if(e.selectedPiece!==null)throw new Error("previous_selection_in_hand");if(t.grid[o][n].length===0)throw new Error("empty_stack_selection");if(I(t.grid,n,o)!==e.player)throw new Error("opponent_owned_selection");e.selectedPiece={from:"board",position:{x:n,y:o}},t.state.action="select2"},Ae=(t,e)=>{if(t.state.action!=="select2")throw new Error("invalid_step");const l=$(t);if(l.selectedPiece===null)throw new Error("no_selection_in_hand");const{x:n,y:o}=e,s=l.selectedPiece.from==="hand"?l.pieces[l.selectedPiece.index]:re(t.grid,l.selectedPiece.position.x,l.selectedPiece.position.y);if(s===null)throw new Error("selected_piece_is_null");if(Ne(t.grid,n,o)>=Math.abs(s))throw new Error("destination_bigger_than_piece");return t.grid[e.y][e.x].push(s),l.selectedPiece.from==="hand"&&l.unselectableIndexes.add(l.selectedPiece.index),l.selectedPiece.from==="board"&&t.grid[l.selectedPiece.position.y][l.selectedPiece.position.x].pop(),l.selectedPiece=null,t.state.action="select1",t.state.player=t.state.player===1?2:1,q(t),0},A=(t,e,l)=>{l.from.from==="hand"?Ce(t,e,l.from.index):Ie(t,e,l.from.position),Ae(t,l.to)},Ve=(t,e)=>{const l=[];for(let n=0;n<3;n++)for(let o=0;o<3;o++){const s=Ne(t.grid,o,n);(!s||s<Math.abs(e))&&l.push({x:o,y:n})}return l},F=(t,e)=>Ue(t,e).reduce((n,o)=>{const s=De(t,e,o),r=Ve(t,s);for(const c of r)n.push({from:o,to:c});return n},[]),Ue=(t,e)=>{const l=e.pieces.map((n,o)=>o).filter(n=>!e.unselectableIndexes.has(n)).map(n=>({index:n,from:"hand"}));for(let n=0;n<3;n++)for(let o=0;o<3;o++)I(t.grid,o,n)===e.player&&l.push({from:"board",position:{x:o,y:n}});return l},De=(t,e,l)=>{if(l.from==="board"){const n=t.grid[l.position.y][l.position.x];return n[n.length-1]}return e.pieces[l.index]},ne=t=>{if(q(t),t.state.action==="winner")return t.state.player===1?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER;if(t.state.action==="draw")return Number.MAX_SAFE_INTEGER/2;const e=F(t,t.player1),l=F(t,t.player2);if(e.length===0&&l.length===0)return Number.MAX_SAFE_INTEGER/2;let n=0;const o=I(t.grid,1,1);return o===t.player1.player?n+=2:o===t.player2.player&&(n-=2),[I(t.grid,0,0),I(t.grid,2,0),I(t.grid,0,2),I(t.grid,2,2)].forEach(r=>{r!==null&&(n+=r!==null&&r===1?1:-1)}),n},le=(t,e,l,n,o)=>{const s=F(t,e);if(q(t),l===0||!s.length||["draw","winner"].includes(t.state.action))return{score:ne(t),move:null};if(e.player===1){let a=Number.MIN_SAFE_INTEGER,u;for(const d of s){const i=W(t),_=$(i),f=X(i);A(i,_,d);const p=le(i,f,l-1,n,o);if((a===void 0||p.score>=a)&&(a=p.score,u={score:p.score,move:d}),a>o)break;n=Math.max(n,a)}if(!u)throw new Error("no_minmax_result");return u}let r=Number.MAX_SAFE_INTEGER,c;for(const a of s){const u=W(t),d=$(u),i=X(u);A(u,d,a);const _=le(u,i,l-1,n,o);if((r===void 0||_.score<=r)&&(r=_.score,c={score:_.score,move:a}),r<n)break;o=Math.min(o,r)}if(!c)throw new Error("no_minmax_result");return c},We=(t,e)=>{const l=le(t,e,3,Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);if(!l.move)throw new Error("no_move_possible");const n=l.move;A(t,e,n)},Xe=(t,e)=>{const l=F(t,e);if(!l.length)throw new Error("no_move_possible");const s=[...l.reduce((r,c)=>{const a=W(t),u=e.player===1?a.player1:a.player2;A(a,u,c);const d=ne(a);return r.push({move:c,score:d}),r},[])].sort((r,c)=>e.player===1?c.score-r.score:r.score-c.score)[0].move;A(t,e,s)},oe=(t,e,l)=>{const n=F(t,e);if(q(t),l===0||!n.length||["draw","winner"].includes(t.state.action))return{score:ne(t),move:null};if(e.player===1){let o=Number.MIN_SAFE_INTEGER,s;for(const r of n){const c=W(t),a=$(c),u=X(c);A(c,a,r);const d=oe(c,u,l-1);(o===void 0||d.score>=o)&&(o=d.score,s={score:d.score,move:r})}if(!s)throw new Error("no_minmax_result");return s}else{let o=Number.MAX_SAFE_INTEGER,s;for(const r of n){const c=W(t),a=$(c),u=X(c);A(c,a,r);const d=oe(c,u,l-1);(o===void 0||d.score<=o)&&(o=d.score,s={score:d.score,move:r})}if(!s)throw new Error("no_minmax_result");return s}},je=(t,e)=>{const l=oe(t,e,2);if(!l.move)throw new Error("no_move_possible");const n=l.move;A(t,e,n)},Ge=(t,e,l)=>{const n=e.player===1?1:-1,o=F(t,e);if(q(t),l===0||!o.length||["draw","winner"].includes(t.state.action))return{score:ne(t)*n,move:null};let s=Number.MIN_SAFE_INTEGER,r;for(const c of o){const a=W(t),u=$(a),d=X(a);A(a,u,c);const i=Ge(a,d,l-1);i.score=-i.score,(s===void 0||i.score>=s)&&(s=i.score,r={score:i.score,move:c})}if(!r)throw new Error("no_minmax_result");return r},Je=(t,e)=>{const l=Ge(t,e,2);if(!l.move)throw new Error("no_move_possible");const n=l.move;A(t,e,n)},Te=(t,e)=>{const l=F(t,e);if(l.length===0)throw new Error("no_move_possible");const n=Math.floor(Math.random()*l.length),o=l[n];A(t,e,o)},Le=(t,e)=>{const l=F(t,e);if(!l.length)throw new Error("no_move_possible");for(const n of l){const o=W(t),s=e.player===1?o.player1:o.player2;if(A(o,s,n),q(o),o.state.action==="winner"&&o.state.player===e.player){A(t,e,n);return}}Te(t,e)},te={random:Te,win_or_random:Le,euristic:Xe,minmax:je,negamax:Je,alphabeta:We},ze={player2Auto:!0,player2Strat:"alphabeta"},ee=He(ze);function fe(t,e,l){const n=t.slice();return n[4]=e[l],n}function ue(t){let e,l=t[4]+"",n,o;return{c(){e=w("div"),n=N(l),o=k(),this.h()},l(s){e=E(s,"DIV",{class:!0});var r=g(e);n=C(r,l),o=P(r),r.forEach(m),this.h()},h(){J(e,"class","piece svelte-1bwmfvs"),M(e,"player1",t[4]>0),M(e,"player2",t[4]<0),M(e,"small-circle",Math.abs(t[4])===1),M(e,"medium-circle",Math.abs(t[4])===2),M(e,"large-circle",Math.abs(t[4])===3)},m(s,r){v(s,e,r),y(e,n),y(e,o)},p(s,r){r&1&&l!==(l=s[4]+"")&&x(n,l),r&1&&M(e,"player1",s[4]>0),r&1&&M(e,"player2",s[4]<0),r&1&&M(e,"small-circle",Math.abs(s[4])===1),r&1&&M(e,"medium-circle",Math.abs(s[4])===2),r&1&&M(e,"large-circle",Math.abs(s[4])===3)},d(s){s&&m(e)}}}function qe(t){let e,l,n,o=[...t[0]].reverse(),s=[];for(let r=0;r<o.length;r+=1)s[r]=ue(fe(t,o,r));return{c(){e=w("button");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=E(r,"BUTTON",{class:!0});var c=g(e);for(let a=0;a<s.length;a+=1)s[a].l(c);c.forEach(m),this.h()},h(){J(e,"class","cell svelte-1bwmfvs"),M(e,"selected",t[1]),M(e,"disabled",t[2])},m(r,c){v(r,e,c);for(let a=0;a<s.length;a+=1)s[a].m(e,null);l||(n=O(e,"click",t[3]),l=!0)},p(r,[c]){if(c&1){o=[...r[0]].reverse();let a;for(a=0;a<o.length;a+=1){const u=fe(r,o,a);s[a]?s[a].p(u,c):(s[a]=ue(u),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}c&2&&M(e,"selected",r[1]),c&4&&M(e,"disabled",r[2])},i:T,o:T,d(r){r&&m(e),Z(s,r),l=!1,n()}}}function Ke(t,e,l){let{pieces:n}=e,{selected:o=!1}=e,{disabled:s}=e;function r(c){Re.call(this,t,c)}return t.$$set=c=>{"pieces"in c&&l(0,n=c.pieces),"selected"in c&&l(1,o=c.selected),"disabled"in c&&l(2,s=c.disabled)},[n,o,s,r]}class $e extends L{constructor(e){super(),z(this,e,Ke,qe,B,{pieces:0,selected:1,disabled:2})}}function de(t,e,l){const n=t.slice();return n[4]=e[l],n[6]=l,n}function _e(t,e,l){const n=t.slice();return n[7]=e[l],n[9]=l,n}function pe(t){let e,l;function n(){return t[3](t[9],t[6])}return e=new $e({props:{pieces:t[7],disabled:!1,selected:t[2]({x:t[9],y:t[6]})}}),e.$on("click",n),{c(){H(e.$$.fragment)},l(o){V(e.$$.fragment,o)},m(o,s){U(e,o,s),l=!0},p(o,s){t=o;const r={};s&1&&(r.pieces=t[7]),e.$set(r)},i(o){l||(b(e.$$.fragment,o),l=!0)},o(o){S(e.$$.fragment,o),l=!1},d(o){D(e,o)}}}function he(t){let e,l,n=t[4],o=[];for(let r=0;r<n.length;r+=1)o[r]=pe(_e(t,n,r));const s=r=>S(o[r],1,1,()=>{o[r]=null});return{c(){for(let r=0;r<o.length;r+=1)o[r].c();e=se()},l(r){for(let c=0;c<o.length;c+=1)o[c].l(r);e=se()},m(r,c){for(let a=0;a<o.length;a+=1)o[a].m(r,c);v(r,e,c),l=!0},p(r,c){if(c&7){n=r[4];let a;for(a=0;a<n.length;a+=1){const u=_e(r,n,a);o[a]?(o[a].p(u,c),b(o[a],1)):(o[a]=pe(u),o[a].c(),b(o[a],1),o[a].m(e.parentNode,e))}for(Q(),a=n.length;a<o.length;a+=1)s(a);Y()}},i(r){if(!l){for(let c=0;c<n.length;c+=1)b(o[c]);l=!0}},o(r){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)S(o[c]);l=!1},d(r){Z(o,r),r&&m(e)}}}function Qe(t){let e,l,n=JSON.stringify(t[0].state)+"",o,s,r,c,a=t[0].grid,u=[];for(let i=0;i<a.length;i+=1)u[i]=he(de(t,a,i));const d=i=>S(u[i],1,1,()=>{u[i]=null});return{c(){e=w("div"),l=w("div"),o=N(n),s=k(),r=w("div");for(let i=0;i<u.length;i+=1)u[i].c();this.h()},l(i){e=E(i,"DIV",{class:!0});var _=g(e);l=E(_,"DIV",{});var f=g(l);o=C(f,n),f.forEach(m),s=P(_),r=E(_,"DIV",{class:!0});var p=g(r);for(let h=0;h<u.length;h+=1)u[h].l(p);p.forEach(m),_.forEach(m),this.h()},h(){J(r,"class","overlay svelte-1n6jeyv"),J(e,"class","board svelte-1n6jeyv")},m(i,_){v(i,e,_),y(e,l),y(l,o),y(e,s),y(e,r);for(let f=0;f<u.length;f+=1)u[f].m(r,null);c=!0},p(i,[_]){if((!c||_&1)&&n!==(n=JSON.stringify(i[0].state)+"")&&x(o,n),_&7){a=i[0].grid;let f;for(f=0;f<a.length;f+=1){const p=de(i,a,f);u[f]?(u[f].p(p,_),b(u[f],1)):(u[f]=he(p),u[f].c(),b(u[f],1),u[f].m(r,null))}for(Q(),f=a.length;f<u.length;f+=1)d(f);Y()}},i(i){if(!c){for(let _=0;_<a.length;_+=1)b(u[_]);c=!0}},o(i){u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)S(u[_]);c=!1},d(i){i&&m(e),Z(u,i)}}}function Ye(t,e,l){let{game:n}=e,{onSelectCell:o}=e;const s=c=>{for(const a of[n.player1,n.player2]){const{selectedPiece:u}=a;if((u==null?void 0:u.from)==="board"&&u.position.x===c.x&&u.position.y===c.y)return!0}return!1},r=(c,a)=>o({x:c,y:a});return t.$$set=c=>{"game"in c&&l(0,n=c.game),"onSelectCell"in c&&l(1,o=c.onSelectCell)},[n,o,s,r]}class Ze extends L{constructor(e){super(),z(this,e,Ye,Qe,B,{game:0,onSelectCell:1})}}function me(t,e,l){const n=t.slice();return n[3]=e[l],n}function ye(t){let e,l=t[3]+"",n,o;return{c(){e=w("option"),n=N(l),o=k(),this.h()},l(s){e=E(s,"OPTION",{});var r=g(e);n=C(r,l),o=P(r),r.forEach(m),this.h()},h(){e.__value=t[3],e.value=e.__value},m(s,r){v(s,e,r),y(e,n),y(e,o)},p:T,d(s){s&&m(e)}}}function xe(t){let e,l,n=t[0].player2Auto?"Human player 2":"Computer player 2",o,s,r,c,a,u=Object.keys(te),d=[];for(let i=0;i<u.length;i+=1)d[i]=ye(me(t,u,i));return{c(){e=w("div"),l=w("button"),o=N(n),s=k(),r=w("select");for(let i=0;i<d.length;i+=1)d[i].c();this.h()},l(i){e=E(i,"DIV",{});var _=g(e);l=E(_,"BUTTON",{});var f=g(l);o=C(f,n),f.forEach(m),s=P(_),r=E(_,"SELECT",{});var p=g(r);for(let h=0;h<d.length;h+=1)d[h].l(p);p.forEach(m),_.forEach(m),this.h()},h(){t[0].player2Strat===void 0&&Oe(()=>t[2].call(r))},m(i,_){v(i,e,_),y(e,l),y(l,o),y(e,s),y(e,r);for(let f=0;f<d.length;f+=1)d[f].m(r,null);ce(r,t[0].player2Strat),c||(a=[O(l,"click",t[1]),O(r,"change",t[2])],c=!0)},p(i,[_]){if(_&1&&n!==(n=i[0].player2Auto?"Human player 2":"Computer player 2")&&x(o,n),_&0){u=Object.keys(te);let f;for(f=0;f<u.length;f+=1){const p=me(i,u,f);d[f]?d[f].p(p,_):(d[f]=ye(p),d[f].c(),d[f].m(r,null))}for(;f<d.length;f+=1)d[f].d(1);d.length=u.length}_&1&&ce(r,i[0].player2Strat)},i:T,o:T,d(i){i&&m(e),Z(d,i),c=!1,Pe(a)}}}function et(t,e,l){let n;Me(t,ee,r=>l(0,n=r));const o=()=>Be(ee,n.player2Auto=!n.player2Auto,n);function s(){n.player2Strat=Fe(this),ee.set(n)}return[n,o,s]}class tt extends L{constructor(e){super(),z(this,e,et,xe,B,{})}}function ve(t,e,l){const n=t.slice();return n[9]=e[l],n[11]=l,n}function be(t){let e,l,n,o,s,r,c,a,u,d,i,_,f;return{c(){e=w("button"),l=N("Random"),n=k(),o=w("button"),s=N("Win or random"),r=k(),c=w("button"),a=N("Euristic"),u=k(),d=w("button"),i=N("MinMax")},l(p){e=E(p,"BUTTON",{});var h=g(e);l=C(h,"Random"),h.forEach(m),n=P(p),o=E(p,"BUTTON",{});var G=g(o);s=C(G,"Win or random"),G.forEach(m),r=P(p),c=E(p,"BUTTON",{});var j=g(c);a=C(j,"Euristic"),j.forEach(m),u=P(p),d=E(p,"BUTTON",{});var K=g(d);i=C(K,"MinMax"),K.forEach(m)},m(p,h){v(p,e,h),y(e,l),v(p,n,h),v(p,o,h),y(o,s),v(p,r,h),v(p,c,h),y(c,a),v(p,u,h),v(p,d,h),y(d,i),_||(f=[O(e,"click",t[4]),O(o,"click",t[5]),O(c,"click",t[6]),O(d,"click",t[7])],_=!0)},p:T,d(p){p&&m(e),p&&m(n),p&&m(o),p&&m(r),p&&m(c),p&&m(u),p&&m(d),_=!1,Pe(f)}}}function we(t){var o;let e,l;function n(){return t[8](t[11])}return e=new $e({props:{disabled:t[1]||t[0].unselectableIndexes.has(t[11]),pieces:[t[9]],selected:((o=t[0].selectedPiece)==null?void 0:o.from)==="hand"&&t[0].selectedPiece.index===t[11]}}),e.$on("click",n),{c(){H(e.$$.fragment)},l(s){V(e.$$.fragment,s)},m(s,r){U(e,s,r),l=!0},p(s,r){var a;t=s;const c={};r&3&&(c.disabled=t[1]||t[0].unselectableIndexes.has(t[11])),r&1&&(c.pieces=[t[9]]),r&1&&(c.selected=((a=t[0].selectedPiece)==null?void 0:a.from)==="hand"&&t[0].selectedPiece.index===t[11]),e.$set(c)},i(s){l||(b(e.$$.fragment,s),l=!0)},o(s){S(e.$$.fragment,s),l=!1},d(s){D(e,s)}}}function nt(t){let e,l,n=t[0].player+"",o,s,r,c,a,u=!t[1]&&be(t),d=t[0].pieces,i=[];for(let f=0;f<d.length;f+=1)i[f]=we(ve(t,d,f));const _=f=>S(i[f],1,1,()=>{i[f]=null});return{c(){e=w("span"),l=N("Player "),o=N(n),s=k(),u&&u.c(),r=k(),c=w("div");for(let f=0;f<i.length;f+=1)i[f].c();this.h()},l(f){e=E(f,"SPAN",{});var p=g(e);l=C(p,"Player "),o=C(p,n),p.forEach(m),s=P(f),u&&u.l(f),r=P(f),c=E(f,"DIV",{class:!0});var h=g(c);for(let G=0;G<i.length;G+=1)i[G].l(h);h.forEach(m),this.h()},h(){J(c,"class","overlay svelte-rwgxl1")},m(f,p){v(f,e,p),y(e,l),y(e,o),v(f,s,p),u&&u.m(f,p),v(f,r,p),v(f,c,p);for(let h=0;h<i.length;h+=1)i[h].m(c,null);a=!0},p(f,[p]){if((!a||p&1)&&n!==(n=f[0].player+"")&&x(o,n),f[1]?u&&(u.d(1),u=null):u?u.p(f,p):(u=be(f),u.c(),u.m(r.parentNode,r)),p&7){d=f[0].pieces;let h;for(h=0;h<d.length;h+=1){const G=ve(f,d,h);i[h]?(i[h].p(G,p),b(i[h],1)):(i[h]=we(G),i[h].c(),b(i[h],1),i[h].m(c,null))}for(Q(),h=d.length;h<i.length;h+=1)_(h);Y()}},i(f){if(!a){for(let p=0;p<d.length;p+=1)b(i[p]);a=!0}},o(f){i=i.filter(Boolean);for(let p=0;p<i.length;p+=1)S(i[p]);a=!1},d(f){f&&m(e),f&&m(s),u&&u.d(f),f&&m(r),f&&m(c),Z(i,f)}}}function lt(t,e,l){let{hand:n}=e,{disabled:o}=e,{onSelectPiece:s}=e,{onSelectAuto:r}=e;const c=()=>r(n,"random"),a=()=>r(n,"win_or_random"),u=()=>r(n,"euristic"),d=()=>r(n,"minmax"),i=_=>s(n,_);return t.$$set=_=>{"hand"in _&&l(0,n=_.hand),"disabled"in _&&l(1,o=_.disabled),"onSelectPiece"in _&&l(2,s=_.onSelectPiece),"onSelectAuto"in _&&l(3,r=_.onSelectAuto)},[n,o,s,r,c,a,u,d,i]}class Ee extends L{constructor(e){super(),z(this,e,lt,nt,B,{hand:0,disabled:1,onSelectPiece:2,onSelectAuto:3})}}function ge(t){let e,l;return e=new Ze({props:{onSelectCell:t[1],game:t[0]}}),{c(){H(e.$$.fragment)},l(n){V(e.$$.fragment,n)},m(n,o){U(e,n,o),l=!0},p(n,o){const s={};o&1&&(s.game=n[0]),e.$set(s)},i(n){l||(b(e.$$.fragment,n),l=!0)},o(n){S(e.$$.fragment,n),l=!1},d(n){D(e,n)}}}function Se(t){let e,l,n,o,s,r,c=t[0].state.player+"",a,u,d,i,_,f;return{c(){e=w("div"),l=w("span"),n=N("Game over!"),o=k(),s=w("span"),r=N("Winner: Player "),a=N(c),u=k(),d=w("button"),i=N("Play again")},l(p){e=E(p,"DIV",{});var h=g(e);l=E(h,"SPAN",{});var G=g(l);n=C(G,"Game over!"),G.forEach(m),o=P(h),s=E(h,"SPAN",{});var j=g(s);r=C(j,"Winner: Player "),a=C(j,c),j.forEach(m),u=P(h),d=E(h,"BUTTON",{});var K=g(d);i=C(K,"Play again"),K.forEach(m),h.forEach(m)},m(p,h){v(p,e,h),y(e,l),y(l,n),y(e,o),y(e,s),y(s,r),y(s,a),y(e,u),y(e,d),y(d,i),_||(f=O(d,"click",t[4]),_=!0)},p(p,h){h&1&&c!==(c=p[0].state.player+"")&&x(a,c)},d(p){p&&m(e),_=!1,f()}}}function ke(t){let e,l,n,o;return e=new Ee({props:{onSelectAuto:t[3],onSelectPiece:t[2],hand:$(t[0]),disabled:!1}}),n=new Ee({props:{onSelectAuto:t[3],onSelectPiece:t[2],hand:X(t[0]),disabled:!0}}),{c(){H(e.$$.fragment),l=k(),H(n.$$.fragment)},l(s){V(e.$$.fragment,s),l=P(s),V(n.$$.fragment,s)},m(s,r){U(e,s,r),v(s,l,r),U(n,s,r),o=!0},p(s,r){const c={};r&1&&(c.hand=$(s[0])),e.$set(c);const a={};r&1&&(a.hand=X(s[0])),n.$set(a)},i(s){o||(b(e.$$.fragment,s),b(n.$$.fragment,s),o=!0)},o(s){S(e.$$.fragment,s),S(n.$$.fragment,s),o=!1},d(s){D(e,s),s&&m(l),D(n,s)}}}function ot(t){let e,l,n,o=t[0],s,r,c=t[0],a;l=new tt({});let u=ge(t),d=t[0].state.action==="winner"&&Se(t),i=ke(t);return{c(){e=w("div"),H(l.$$.fragment),n=k(),u.c(),s=k(),d&&d.c(),r=k(),i.c(),this.h()},l(_){e=E(_,"DIV",{class:!0});var f=g(e);V(l.$$.fragment,f),n=P(f),u.l(f),s=P(f),d&&d.l(f),r=P(f),i.l(f),f.forEach(m),this.h()},h(){J(e,"class","d-flex justify-content-center")},m(_,f){v(_,e,f),U(l,e,null),y(e,n),u.m(e,null),y(e,s),d&&d.m(e,null),y(e,r),i.m(e,null),a=!0},p(_,[f]){f&1&&B(o,o=_[0])?(Q(),S(u,1,1,T),Y(),u=ge(_),u.c(),b(u,1),u.m(e,s)):u.p(_,f),_[0].state.action==="winner"?d?d.p(_,f):(d=Se(_),d.c(),d.m(e,r)):d&&(d.d(1),d=null),f&1&&B(c,c=_[0])?(Q(),S(i,1,1,T),Y(),i=ke(_),i.c(),b(i,1),i.m(e,null)):i.p(_,f)},i(_){a||(b(l.$$.fragment,_),b(u),b(i),a=!0)},o(_){S(l.$$.fragment,_),S(u),S(i),a=!1},d(_){_&&m(e),D(l),u.d(_),d&&d.d(),i.d(_)}}}function rt(t,e,l){let n;Me(t,ee,d=>l(5,n=d));let o=ae();const s=()=>{if(["winner","select2"].includes(o.state.action)||o.state.player!==o.player2.player||!n.player2Auto)return;const d=te[n.player2Strat];setTimeout(()=>{d(o,o.player2),l(0,o)},500)};return[o,({x:d,y:i})=>{try{if(o.state.action==="select2"){Ae(o,{x:d,y:i})===0&&s(),l(0,o);return}const _=$(o);Ie(o,_,{x:d,y:i}),l(0,o),l(0,o)}catch(_){console.error("Could not select cell"),console.error(_),console.error("Game should be able to keep working")}},(d,i)=>{try{Ce(o,d,i)}catch(_){console.error("Could not select piece"),console.error(_),console.error("Game should be able to keep working")}l(0,o)},(d,i)=>{const _=te[i];_(o,d),s(),l(0,o)},()=>{l(0,o=ae({player2Start:Math.random()<.5})),o.state.player===2&&n.player2Auto&&s()}]}class st extends L{constructor(e){super(),z(this,e,rt,ot,B,{})}}function ct(t){let e,l;return e=new st({}),{c(){H(e.$$.fragment)},l(n){V(e.$$.fragment,n)},m(n,o){U(e,n,o),l=!0},p:T,i(n){l||(b(e.$$.fragment,n),l=!0)},o(n){S(e.$$.fragment,n),l=!1},d(n){D(e,n)}}}class ft extends L{constructor(e){super(),z(this,e,null,ct,B,{})}}export{ft as default};
