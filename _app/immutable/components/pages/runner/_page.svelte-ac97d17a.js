import{S as Se,i as be,s as Pe,k as h,l as y,m as g,h as _,n as R,p as ve,I as Te,b as C,B as _e,q as p,a as N,r as v,c as A,D as r,e as Ce,J as Ee,u as $,w as we,x as Ge,K as ze,L as De,M as ge,y as ke,N as ye,O as Qe,f as me,g as Xe,t as de,d as Ye,z as We,P as Ze,Q as Be}from"../../../chunks/index-1d785069.js";import{e as $e}from"../../../chunks/async-8fd893d5.js";import{s as he,g as xe,c as Ie,p as Oe,a as Me,b as et}from"../../../chunks/service-a0b0a97b.js";function tt(n){let e;return{c(){e=h("div"),this.h()},l(l){e=y(l,"DIV",{class:!0,style:!0}),g(e).forEach(_),this.h()},h(){R(e,"class","circle svelte-dqjlks"),ve(e,"--size",n[3]+n[1]),ve(e,"--color",n[0]),ve(e,"--duration",n[2]),Te(e,"pause-animation",n[4])},m(l,t){C(l,e,t)},p(l,[t]){t&10&&ve(e,"--size",l[3]+l[1]),t&1&&ve(e,"--color",l[0]),t&4&&ve(e,"--duration",l[2]),t&16&&Te(e,"pause-animation",l[4])},i:_e,o:_e,d(l){l&&_(e)}}}function lt(n,e,l){let{color:t="#FF3E00"}=e,{unit:a="px"}=e,{duration:i="0.75s"}=e,{size:s="60"}=e,{pause:m=!1}=e;return n.$$set=f=>{"color"in f&&l(0,t=f.color),"unit"in f&&l(1,a=f.unit),"duration"in f&&l(2,i=f.duration),"size"in f&&l(3,s=f.size),"pause"in f&&l(4,m=f.pause)},[t,a,i,s,m]}class at extends Se{constructor(e){super(),be(this,e,lt,tt,Pe,{color:0,unit:1,duration:2,size:3,pause:4})}}function Fe(n,e,l){const t=n.slice();return t[1]=e[l],t}function He(n){let e,l=[...n[0]].reverse(),t=[];for(let a=0;a<l.length;a+=1)t[a]=Re(Fe(n,l,a));return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=Ce()},l(a){for(let i=0;i<t.length;i+=1)t[i].l(a);e=Ce()},m(a,i){for(let s=0;s<t.length;s+=1)t[s].m(a,i);C(a,e,i)},p(a,i){if(i&1){l=[...a[0]].reverse();let s;for(s=0;s<l.length;s+=1){const m=Fe(a,l,s);t[s]?t[s].p(m,i):(t[s]=Re(m),t[s].c(),t[s].m(e.parentNode,e))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(a){Ee(t,a),a&&_(e)}}}function Re(n){let e,l=n[1].totalGame+"",t,a,i,s=n[1].p1Strat+"",m,f,F=n[1].p2Strat+"",z,D,I,d,G,O,H=n[1].p1Win+"",k,b,P=n[1].p1WinPercent*100+"",j,B,V,M,x,J=n[1].p2Win+"",ae,ne,ee=n[1].p2WinPercent*100+"",q,X,re,K,te,L=n[1].draw+"",Y,T,W=n[1].drawPercent*100+"",o,E,S,u,U=n[1].avgMovesByGame+"",oe,ie,le,se=n[1].timeSeconds+"",Z;return{c(){e=h("span"),t=p(l),a=N(),i=h("span"),m=p(s),f=p(" vs "),z=p(F),D=N(),I=h("div"),d=h("ul"),G=h("li"),O=p("P1 win: "),k=p(H),b=p(" ("),j=p(P),B=p("%)"),V=N(),M=h("li"),x=p("P2 win: "),ae=p(J),ne=p(" ("),q=p(ee),X=p("%)"),re=N(),K=h("li"),te=p("Draw: "),Y=p(L),T=p(" ("),o=p(W),E=p("%)"),S=N(),u=h("span"),oe=p(U),ie=N(),le=h("span"),Z=p(se)},l(c){e=y(c,"SPAN",{});var w=g(e);t=v(w,l),w.forEach(_),a=A(c),i=y(c,"SPAN",{});var Q=g(i);m=v(Q,s),f=v(Q," vs "),z=v(Q,F),Q.forEach(_),D=A(c),I=y(c,"DIV",{});var Ne=g(I);d=y(Ne,"UL",{});var ce=g(d);G=y(ce,"LI",{});var fe=g(G);O=v(fe,"P1 win: "),k=v(fe,H),b=v(fe," ("),j=v(fe,P),B=v(fe,"%)"),fe.forEach(_),V=A(ce),M=y(ce,"LI",{});var ue=g(M);x=v(ue,"P2 win: "),ae=v(ue,J),ne=v(ue," ("),q=v(ue,ee),X=v(ue,"%)"),ue.forEach(_),re=A(ce),K=y(ce,"LI",{});var pe=g(K);te=v(pe,"Draw: "),Y=v(pe,L),T=v(pe," ("),o=v(pe,W),E=v(pe,"%)"),pe.forEach(_),ce.forEach(_),Ne.forEach(_),S=A(c),u=y(c,"SPAN",{});var Ae=g(u);oe=v(Ae,U),Ae.forEach(_),ie=A(c),le=y(c,"SPAN",{});var Le=g(le);Z=v(Le,se),Le.forEach(_)},m(c,w){C(c,e,w),r(e,t),C(c,a,w),C(c,i,w),r(i,m),r(i,f),r(i,z),C(c,D,w),C(c,I,w),r(I,d),r(d,G),r(G,O),r(G,k),r(G,b),r(G,j),r(G,B),r(d,V),r(d,M),r(M,x),r(M,ae),r(M,ne),r(M,q),r(M,X),r(d,re),r(d,K),r(K,te),r(K,Y),r(K,T),r(K,o),r(K,E),C(c,S,w),C(c,u,w),r(u,oe),C(c,ie,w),C(c,le,w),r(le,Z)},p(c,w){w&1&&l!==(l=c[1].totalGame+"")&&$(t,l),w&1&&s!==(s=c[1].p1Strat+"")&&$(m,s),w&1&&F!==(F=c[1].p2Strat+"")&&$(z,F),w&1&&H!==(H=c[1].p1Win+"")&&$(k,H),w&1&&P!==(P=c[1].p1WinPercent*100+"")&&$(j,P),w&1&&J!==(J=c[1].p2Win+"")&&$(ae,J),w&1&&ee!==(ee=c[1].p2WinPercent*100+"")&&$(q,ee),w&1&&L!==(L=c[1].draw+"")&&$(Y,L),w&1&&W!==(W=c[1].drawPercent*100+"")&&$(o,W),w&1&&U!==(U=c[1].avgMovesByGame+"")&&$(oe,U),w&1&&se!==(se=c[1].timeSeconds+"")&&$(Z,se)},d(c){c&&_(e),c&&_(a),c&&_(i),c&&_(D),c&&_(I),c&&_(S),c&&_(u),c&&_(ie),c&&_(le)}}}function st(n){let e,l,t,a,i,s,m,f,F,z,D,I,d,G,O,H,k=n[0].length&&He(n);return{c(){e=h("div"),l=h("span"),t=p("Game played"),a=N(),i=h("span"),s=p("Compared strategies"),m=N(),f=h("span"),F=p("Win rates"),z=N(),D=h("span"),I=p("Avg move by game"),d=N(),G=h("span"),O=p("Total time"),H=N(),k&&k.c(),this.h()},l(b){e=y(b,"DIV",{class:!0});var P=g(e);l=y(P,"SPAN",{class:!0});var j=g(l);t=v(j,"Game played"),j.forEach(_),a=A(P),i=y(P,"SPAN",{class:!0});var B=g(i);s=v(B,"Compared strategies"),B.forEach(_),m=A(P),f=y(P,"SPAN",{class:!0});var V=g(f);F=v(V,"Win rates"),V.forEach(_),z=A(P),D=y(P,"SPAN",{class:!0});var M=g(D);I=v(M,"Avg move by game"),M.forEach(_),d=A(P),G=y(P,"SPAN",{class:!0});var x=g(G);O=v(x,"Total time"),x.forEach(_),H=A(P),k&&k.l(P),P.forEach(_),this.h()},h(){R(l,"class","grid-header svelte-n839zb"),R(i,"class","grid-header svelte-n839zb"),R(f,"class","grid-header svelte-n839zb"),R(D,"class","grid-header svelte-n839zb"),R(G,"class","grid-header svelte-n839zb"),R(e,"class","overlay svelte-n839zb")},m(b,P){C(b,e,P),r(e,l),r(l,t),r(e,a),r(e,i),r(i,s),r(e,m),r(e,f),r(f,F),r(e,z),r(e,D),r(D,I),r(e,d),r(e,G),r(G,O),r(e,H),k&&k.m(e,null)},p(b,[P]){b[0].length?k?k.p(b,P):(k=He(b),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},i:_e,o:_e,d(b){b&&_(e),k&&k.d()}}}function nt(n,e,l){let{statsHistory:t}=e;return n.$$set=a=>{"statsHistory"in a&&l(0,t=a.statsHistory)},[t]}class rt extends Se{constructor(e){super(),be(this,e,nt,st,Pe,{statsHistory:0})}}const ot=({player1Strat:n,player2Strat:e,showSteps:l,showFinalGame:t})=>{const a=he[n],i=he[e],s=xe();let m=0;for(;m<10&&!["draw","winner"].includes(s.state.action);)a(s,s.player1),m++,Ie(s),l&&(Oe(s),Me(s)),!["draw","winner"].includes(s.state.action)&&(i(s,s.player2),m++,Ie(s),l&&(Oe(s),Me(s),console.log()));return t&&et(s),{nbMoves:m,finalState:{...s.state}}},je=(n,e,l)=>{const t={totalGame:l,p1Strat:n,p2Strat:e,totalMoves:0,avgMovesByGame:0,p1Win:0,p2Win:0,draw:0,p1WinPercent:0,p2WinPercent:0,drawPercent:0,timeSeconds:0},a=()=>{const s=Date.now();t.timeSeconds=(s-i)/1e3,t.p1WinPercent=t.p1Win/t.totalGame,t.p2WinPercent=t.p2Win/t.totalGame,t.drawPercent=t.draw/t.totalGame,t.avgMovesByGame=t.totalMoves/t.totalGame},i=Date.now();for(let s=0;s<t.totalGame;s++){const{finalState:m,nbMoves:f}=ot({player1Strat:t.p1Strat,player2Strat:t.p2Strat,showSteps:!1,showFinalGame:!1});t.totalMoves+=f,m.action==="winner"?m.player===1?t.p1Win++:t.p2Win++:t.draw++}return a(),t};function Ue(n,e,l){const t=n.slice();return t[11]=e[l],t}function Ve(n,e,l){const t=n.slice();return t[11]=e[l],t}function qe(n){let e,l=n[11]+"",t,a;return{c(){e=h("option"),t=p(l),a=N(),this.h()},l(i){e=y(i,"OPTION",{});var s=g(e);t=v(s,l),a=A(s),s.forEach(_),this.h()},h(){e.__value=n[11],e.value=e.__value},m(i,s){C(i,e,s),r(e,t),r(e,a)},p:_e,d(i){i&&_(e)}}}function Je(n){let e,l=n[11]+"",t,a;return{c(){e=h("option"),t=p(l),a=N(),this.h()},l(i){e=y(i,"OPTION",{});var s=g(e);t=v(s,l),a=A(s),s.forEach(_),this.h()},h(){e.__value=n[11],e.value=e.__value},m(i,s){C(i,e,s),r(e,t),r(e,a)},p:_e,d(i){i&&_(e)}}}function Ke(n){let e,l;return e=new at({props:{size:"10",color:"#FF3E00",unit:"px",duration:"1s"}}),{c(){we(e.$$.fragment)},l(t){Ge(e.$$.fragment,t)},m(t,a){ke(e,t,a),l=!0},i(t){l||(me(e.$$.fragment,t),l=!0)},o(t){de(e.$$.fragment,t),l=!1},d(t){We(e,t)}}}function it(n){let e,l,t,a,i,s,m,f,F,z,D,I,d,G,O,H,k,b,P,j,B,V,M,x,J,ae,ne,ee,q,X,re,K,te=Object.keys(he),L=[];for(let o=0;o<te.length;o+=1)L[o]=qe(Ve(n,te,o));let Y=Object.keys(he),T=[];for(let o=0;o<Y.length;o+=1)T[o]=Je(Ue(n,Y,o));let W=n[3]&&Ke();return q=new rt({props:{statsHistory:n[4]}}),{c(){e=h("h2"),l=p("Tic Tac Cup - Runner"),t=N(),a=h("div"),i=h("label"),s=p("Number of games to play"),m=N(),f=h("input"),F=N(),z=h("label"),D=p("Player 1 algorithm"),I=N(),d=h("select");for(let o=0;o<L.length;o+=1)L[o].c();G=N(),O=h("label"),H=p("Player 2 algorithm"),k=N(),b=h("select");for(let o=0;o<T.length;o+=1)T[o].c();P=N(),j=h("div"),B=h("span"),V=h("button"),M=p("Start runner"),x=N(),J=h("button"),ae=p("Start all strats"),ne=N(),W&&W.c(),ee=N(),we(q.$$.fragment),this.h()},l(o){e=y(o,"H2",{});var E=g(e);l=v(E,"Tic Tac Cup - Runner"),E.forEach(_),t=A(o),a=y(o,"DIV",{});var S=g(a);i=y(S,"LABEL",{for:!0});var u=g(i);s=v(u,"Number of games to play"),u.forEach(_),m=A(S),f=y(S,"INPUT",{id:!0,type:!0,min:!0}),F=A(S),z=y(S,"LABEL",{for:!0});var U=g(z);D=v(U,"Player 1 algorithm"),U.forEach(_),I=A(S),d=y(S,"SELECT",{id:!0});var oe=g(d);for(let Q=0;Q<L.length;Q+=1)L[Q].l(oe);oe.forEach(_),G=A(S),O=y(S,"LABEL",{for:!0});var ie=g(O);H=v(ie,"Player 2 algorithm"),ie.forEach(_),k=A(S),b=y(S,"SELECT",{id:!0});var le=g(b);for(let Q=0;Q<T.length;Q+=1)T[Q].l(le);le.forEach(_),S.forEach(_),P=A(o),j=y(o,"DIV",{});var se=g(j);B=y(se,"SPAN",{});var Z=g(B);V=y(Z,"BUTTON",{});var c=g(V);M=v(c,"Start runner"),c.forEach(_),x=A(Z),J=y(Z,"BUTTON",{});var w=g(J);ae=v(w,"Start all strats"),w.forEach(_),ne=A(Z),W&&W.l(Z),Z.forEach(_),se.forEach(_),ee=A(o),Ge(q.$$.fragment,o),this.h()},h(){R(i,"for","nbGames"),R(f,"id","nbGames"),R(f,"type","number"),R(f,"min","1"),f.disabled=n[3],R(z,"for","player1Strat"),R(d,"id","player1Strat"),d.disabled=n[3],n[0]===void 0&&ze(()=>n[8].call(d)),R(O,"for","player2Strat"),R(b,"id","player2Strat"),b.disabled=n[3],n[1]===void 0&&ze(()=>n[9].call(b))},m(o,E){C(o,e,E),r(e,l),C(o,t,E),C(o,a,E),r(a,i),r(i,s),r(a,m),r(a,f),De(f,n[2]),r(a,F),r(a,z),r(z,D),r(a,I),r(a,d);for(let S=0;S<L.length;S+=1)L[S].m(d,null);ge(d,n[0]),r(a,G),r(a,O),r(O,H),r(a,k),r(a,b);for(let S=0;S<T.length;S+=1)T[S].m(b,null);ge(b,n[1]),C(o,P,E),C(o,j,E),r(j,B),r(B,V),r(V,M),r(B,x),r(B,J),r(J,ae),r(B,ne),W&&W.m(B,null),C(o,ee,E),ke(q,o,E),X=!0,re||(K=[ye(f,"input",n[7]),ye(d,"change",n[8]),ye(b,"change",n[9]),ye(V,"click",n[5]),ye(J,"click",n[6])],re=!0)},p(o,[E]){if((!X||E&8)&&(f.disabled=o[3]),E&4&&Qe(f.value)!==o[2]&&De(f,o[2]),E&0){te=Object.keys(he);let u;for(u=0;u<te.length;u+=1){const U=Ve(o,te,u);L[u]?L[u].p(U,E):(L[u]=qe(U),L[u].c(),L[u].m(d,null))}for(;u<L.length;u+=1)L[u].d(1);L.length=te.length}if((!X||E&8)&&(d.disabled=o[3]),E&1&&ge(d,o[0]),E&0){Y=Object.keys(he);let u;for(u=0;u<Y.length;u+=1){const U=Ue(o,Y,u);T[u]?T[u].p(U,E):(T[u]=Je(U),T[u].c(),T[u].m(b,null))}for(;u<T.length;u+=1)T[u].d(1);T.length=Y.length}(!X||E&8)&&(b.disabled=o[3]),E&2&&ge(b,o[1]),o[3]?W?E&8&&me(W,1):(W=Ke(),W.c(),me(W,1),W.m(B,null)):W&&(Xe(),de(W,1,1,()=>{W=null}),Ye());const S={};E&16&&(S.statsHistory=o[4]),q.$set(S)},i(o){X||(me(W),me(q.$$.fragment,o),X=!0)},o(o){de(W),de(q.$$.fragment,o),X=!1},d(o){o&&_(e),o&&_(t),o&&_(a),Ee(L,o),Ee(T,o),o&&_(P),o&&_(j),W&&W.d(),o&&_(ee),We(q,o),re=!1,Ze(K)}}}function _t(n,e,l){let t="random",a="random",i=10,s=!1,m=[];const f=()=>{l(3,s=!0),setTimeout(()=>{const G=je(t,a,i);m.push(G),l(4,m),l(3,s=!1)},0)},F=[{player1Strat:"random",player2Strat:"random"},{player1Strat:"random",player2Strat:"win_or_random"},{player1Strat:"win_or_random",player2Strat:"random"},{player1Strat:"random",player2Strat:"euristic"},{player1Strat:"euristic",player2Strat:"random"},{player1Strat:"random",player2Strat:"minmax"},{player1Strat:"minmax",player2Strat:"random"},{player1Strat:"random",player2Strat:"negamax"},{player1Strat:"negamax",player2Strat:"random"},{player1Strat:"random",player2Strat:"alphabeta"},{player1Strat:"alphabeta",player2Strat:"random"},{player1Strat:"random",player2Strat:"alphabeta_ordered"},{player1Strat:"alphabeta_ordered",player2Strat:"random"}],z=()=>{l(3,s=!0),l(4,m=[]),$e(F,(G,O)=>{setTimeout(()=>{const H=je(G.player1Strat,G.player2Strat,i);return m.push(H),l(4,m),O()},0)},()=>{l(3,s=!1)})};function D(){i=Qe(this.value),l(2,i)}function I(){t=Be(this),l(0,t)}function d(){a=Be(this),l(1,a)}return[t,a,i,s,m,f,z,D,I,d]}class ct extends Se{constructor(e){super(),be(this,e,_t,it,Pe,{})}}function ft(n){let e,l;return e=new ct({}),{c(){we(e.$$.fragment)},l(t){Ge(e.$$.fragment,t)},m(t,a){ke(e,t,a),l=!0},p:_e,i(t){l||(me(e.$$.fragment,t),l=!0)},o(t){de(e.$$.fragment,t),l=!1},d(t){We(e,t)}}}class mt extends Se{constructor(e){super(),be(this,e,null,ft,Pe,{})}}export{mt as default};
