import{S as J,i as L,s as V,k as w,l as S,m as P,h as m,n as W,I,b as k,J as F,B as C,K as q,q as A,a as E,r as M,c as $,G as y,u as K,L as Ce,f as v,g as R,d as U,t as g,e as j,w as G,x as T,y as B,z as O,M as Ge,N as ne,O as ke,H as we,P as Te,Q as Be}from"../../chunks/index-780d2971.js";import{w as Oe}from"../../chunks/index-341ca319.js";const re=l=>{const e=l===1?1:-1,n=[1,1,2,2,3,3].map(t=>t*e);return{player:l,pieces:n,unselectableIndexes:new Set,selectedPiece:null}},oe=()=>{const l=[];for(let n=0;n<3;n++){l.push([]);for(let t=0;t<3;t++)l[l.length-1].push([])}return{state:{player:1,action:"select1"},grid:l,player1:re(1),player2:re(2)}},Se=l=>{const e=l.player1.unselectableIndexes,n=l.player2.unselectableIndexes,t=JSON.parse(JSON.stringify(l));return t.player1.unselectableIndexes=new Set([...e.values()]),t.player2.unselectableIndexes=new Set([...n.values()]),t},x=(l,e,n)=>{const t=l[n][e];return t.length?t[t.length-1]:null},N=(l,e,n)=>{if(e<0||n<0||e>2||n>2)throw new Error(`Invalid coordinates ${e},${n}`);const t=x(l,e,n);return t===null?null:t>0?1:2},Pe=(l,e,n)=>{if(e<0||n<0||e>2||n>2)throw new Error(`Invalid coordinates ${e},${n}`);const t=x(l,e,n);return t===null?0:Math.abs(t)},H=(l,e,n)=>{const t=N(l,e.x,e.y),r=N(l,n.x,n.y);return t!==null&&t===r},ee=l=>{const{grid:e}=l,n=new Set;for(let t=0;t<3;t++)if(H(e,{x:0,y:t},{x:1,y:t})&&H(e,{x:0,y:t},{x:2,y:t})){const r=N(e,0,t);n.add(r)}for(let t=0;t<3;t++)if(H(e,{x:t,y:0},{x:t,y:1})&&H(e,{x:t,y:0},{x:t,y:2})){const r=N(e,t,0);n.add(r)}if(H(e,{x:0,y:0},{x:1,y:1})&&H(e,{x:0,y:0},{x:2,y:2})){const t=N(e,0,0);n.add(t)}if(H(e,{x:0,y:2},{x:1,y:1})&&H(e,{x:0,y:2},{x:2,y:0})){const t=N(e,0,2);n.add(t)}if(n.delete(null),n.size===1){l.state.player=[...n.values()][0],l.state.action="winner";return}if(n.size===2){l.state.player=1,l.state.action="draw";return}},Ee=(l,e,n)=>{if(l.state.player!==e.player||l.state.action!=="select1")throw new Error("invalid_step");if(n>=e.pieces.length||n<0)throw new Error("oob_selection_index");if(e.selectedPiece!==null)throw new Error("previous_selection_in_hand");if(e.unselectableIndexes.has(n))throw new Error("piece_already_used");e.selectedPiece={from:"hand",index:n},l.state.action="select2"},$e=(l,e,n)=>{if(l.state.player!==e.player||l.state.action!=="select1")throw new Error("invalid_step");const{x:t,y:r}=n;if(t<0||r<0||t>2||r>2)throw new Error(`Invalid coordinates ${t},${r}`);if(e.selectedPiece!==null)throw new Error("previous_selection_in_hand");if(l.grid[r][t].length===0)throw new Error("empty_stack_selection");if(N(l.grid,t,r)!==e.player)throw new Error("opponent_owned_selection");e.selectedPiece={from:"board",position:{x:t,y:r}},l.state.action="select2"},Ie=(l,e)=>{if(l.state.action!=="select2")throw new Error("invalid_step");const n=l.state.player===1?l.player1:l.player2;if(n.selectedPiece===null)throw new Error("no_selection_in_hand");const{x:t,y:r}=e,o=n.selectedPiece.from==="hand"?n.pieces[n.selectedPiece.index]:x(l.grid,n.selectedPiece.position.x,n.selectedPiece.position.y);if(o===null)throw new Error("selected_piece_is_null");if(Pe(l.grid,t,r)>=Math.abs(o))throw new Error("destination_bigger_than_piece");return l.grid[e.y][e.x].push(o),n.selectedPiece.from==="hand"&&n.unselectableIndexes.add(n.selectedPiece.index),n.selectedPiece.from==="board"&&l.grid[n.selectedPiece.position.y][n.selectedPiece.position.x].pop(),n.selectedPiece=null,l.state.action="select1",l.state.player=l.state.player===1?2:1,ee(l),0},z=(l,e,n)=>{n.from.from==="hand"?Ee(l,e,n.from.index):$e(l,e,n.from.position),Ie(l,n.to)},Ve=(l,e)=>{const n=[];for(let t=0;t<3;t++)for(let r=0;r<3;r++){const o=Pe(l.grid,r,t);(!o||o<Math.abs(e))&&n.push({x:r,y:t})}return n},X=(l,e)=>He(l,e).reduce((t,r)=>{const o=De(l,e,r),s=Ve(l,o);for(const i of s)t.push({from:r,to:i});return t},[]),He=(l,e)=>{const n=e.pieces.map((t,r)=>r).filter(t=>!e.unselectableIndexes.has(t)).map(t=>({index:t,from:"hand"}));for(let t=0;t<3;t++)for(let r=0;r<3;r++)N(l.grid,r,t)===e.player&&n.push({from:"board",position:{x:r,y:t}});return n},De=(l,e,n)=>{if(n.from==="board"){const t=l.grid[n.position.y][n.position.x];return t[t.length-1]}return e.pieces[n.index]},Fe=l=>{if(ee(l),l.state.action==="winner")return l.state.player===1?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER;if(l.state.action==="draw")return Number.MAX_SAFE_INTEGER/2;const e=X(l,l.player1),n=X(l,l.player2);if(e.length===0&&n.length===0)return Number.MAX_SAFE_INTEGER/2;let t=0;const r=N(l.grid,1,1);return r===l.player1.player?t+=2:r===l.player2.player&&(t-=2),[N(l.grid,0,0),N(l.grid,2,0),N(l.grid,0,2),N(l.grid,2,2)].forEach(s=>{s!==null&&(t+=s!==null&&s===1?1:-1)}),t},Ne=(l,e)=>{const n=X(l,e);if(!n.length)throw new Error("no_move_possible");const o=[...n.reduce((s,i)=>{const a=Se(l),u=e.player===1?a.player1:a.player2;z(a,u,i);const d=Fe(a);return s.push({move:i,score:d}),s},[])].sort((s,i)=>e.player===1?i.score-s.score:s.score-i.score)[0].move;z(l,e,o)},te=(l,e)=>{const n=X(l,e);if(n.length===0)throw new Error("no_move_possible");const t=Math.floor(Math.random()*n.length),r=n[t];z(l,e,r)},Ae=(l,e)=>{const n=X(l,e);if(!n.length)throw new Error("no_move_possible");for(const t of n){const r=Se(l),o=e.player===1?r.player1:r.player2;if(z(r,o,t),ee(r),r.state.action==="winner"&&r.state.player===e.player){z(l,e,t);return}}te(l,e)},Z={random:te,win_or_random:Ae,euristic:Ne},Re={player2Auto:!0,player2Strat:"euristic"},Q=Oe(Re);function se(l,e,n){const t=l.slice();return t[4]=e[n],t}function ce(l){let e,n=l[4]+"",t,r;return{c(){e=w("div"),t=A(n),r=E(),this.h()},l(o){e=S(o,"DIV",{class:!0});var s=P(e);t=M(s,n),r=$(s),s.forEach(m),this.h()},h(){W(e,"class","piece svelte-1bwmfvs"),I(e,"player1",l[4]>0),I(e,"player2",l[4]<0),I(e,"small-circle",Math.abs(l[4])===1),I(e,"medium-circle",Math.abs(l[4])===2),I(e,"large-circle",Math.abs(l[4])===3)},m(o,s){k(o,e,s),y(e,t),y(e,r)},p(o,s){s&1&&n!==(n=o[4]+"")&&K(t,n),s&1&&I(e,"player1",o[4]>0),s&1&&I(e,"player2",o[4]<0),s&1&&I(e,"small-circle",Math.abs(o[4])===1),s&1&&I(e,"medium-circle",Math.abs(o[4])===2),s&1&&I(e,"large-circle",Math.abs(o[4])===3)},d(o){o&&m(e)}}}function Ue(l){let e,n,t,r=[...l[0]].reverse(),o=[];for(let s=0;s<r.length;s+=1)o[s]=ce(se(l,r,s));return{c(){e=w("button");for(let s=0;s<o.length;s+=1)o[s].c();this.h()},l(s){e=S(s,"BUTTON",{class:!0});var i=P(e);for(let a=0;a<o.length;a+=1)o[a].l(i);i.forEach(m),this.h()},h(){W(e,"class","cell svelte-1bwmfvs"),I(e,"selected",l[1]),I(e,"disabled",l[2])},m(s,i){k(s,e,i);for(let a=0;a<o.length;a+=1)o[a].m(e,null);n||(t=F(e,"click",l[3]),n=!0)},p(s,[i]){if(i&1){r=[...s[0]].reverse();let a;for(a=0;a<r.length;a+=1){const u=se(s,r,a);o[a]?o[a].p(u,i):(o[a]=ce(u),o[a].c(),o[a].m(e,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=r.length}i&2&&I(e,"selected",s[1]),i&4&&I(e,"disabled",s[2])},i:C,o:C,d(s){s&&m(e),q(o,s),n=!1,t()}}}function We(l,e,n){let{pieces:t}=e,{selected:r=!1}=e,{disabled:o}=e;function s(i){Ce.call(this,l,i)}return l.$$set=i=>{"pieces"in i&&n(0,t=i.pieces),"selected"in i&&n(1,r=i.selected),"disabled"in i&&n(2,o=i.disabled)},[t,r,o,s]}class Me extends J{constructor(e){super(),L(this,e,We,Ue,V,{pieces:0,selected:1,disabled:2})}}function ie(l,e,n){const t=l.slice();return t[4]=e[n],t[6]=n,t}function ae(l,e,n){const t=l.slice();return t[7]=e[n],t[9]=n,t}function fe(l){let e,n;function t(){return l[3](l[9],l[6])}return e=new Me({props:{pieces:l[7],disabled:!1,selected:l[2]({x:l[9],y:l[6]})}}),e.$on("click",t),{c(){G(e.$$.fragment)},l(r){T(e.$$.fragment,r)},m(r,o){B(e,r,o),n=!0},p(r,o){l=r;const s={};o&1&&(s.pieces=l[7]),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function ue(l){let e,n,t=l[4],r=[];for(let s=0;s<t.length;s+=1)r[s]=fe(ae(l,t,s));const o=s=>g(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=j()},l(s){for(let i=0;i<r.length;i+=1)r[i].l(s);e=j()},m(s,i){for(let a=0;a<r.length;a+=1)r[a].m(s,i);k(s,e,i),n=!0},p(s,i){if(i&7){t=s[4];let a;for(a=0;a<t.length;a+=1){const u=ae(s,t,a);r[a]?(r[a].p(u,i),v(r[a],1)):(r[a]=fe(u),r[a].c(),v(r[a],1),r[a].m(e.parentNode,e))}for(R(),a=t.length;a<r.length;a+=1)o(a);U()}},i(s){if(!n){for(let i=0;i<t.length;i+=1)v(r[i]);n=!0}},o(s){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)g(r[i]);n=!1},d(s){q(r,s),s&&m(e)}}}function je(l){let e,n,t=JSON.stringify(l[0].state)+"",r,o,s,i,a=l[0].grid,u=[];for(let c=0;c<a.length;c+=1)u[c]=ue(ie(l,a,c));const d=c=>g(u[c],1,1,()=>{u[c]=null});return{c(){e=w("div"),n=w("div"),r=A(t),o=E(),s=w("div");for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){e=S(c,"DIV",{class:!0});var p=P(e);n=S(p,"DIV",{});var f=P(n);r=M(f,t),f.forEach(m),o=$(p),s=S(p,"DIV",{class:!0});var h=P(s);for(let _=0;_<u.length;_+=1)u[_].l(h);h.forEach(m),p.forEach(m),this.h()},h(){W(s,"class","overlay svelte-1n6jeyv"),W(e,"class","board svelte-1n6jeyv")},m(c,p){k(c,e,p),y(e,n),y(n,r),y(e,o),y(e,s);for(let f=0;f<u.length;f+=1)u[f].m(s,null);i=!0},p(c,[p]){if((!i||p&1)&&t!==(t=JSON.stringify(c[0].state)+"")&&K(r,t),p&7){a=c[0].grid;let f;for(f=0;f<a.length;f+=1){const h=ie(c,a,f);u[f]?(u[f].p(h,p),v(u[f],1)):(u[f]=ue(h),u[f].c(),v(u[f],1),u[f].m(s,null))}for(R(),f=a.length;f<u.length;f+=1)d(f);U()}},i(c){if(!i){for(let p=0;p<a.length;p+=1)v(u[p]);i=!0}},o(c){u=u.filter(Boolean);for(let p=0;p<u.length;p+=1)g(u[p]);i=!1},d(c){c&&m(e),q(u,c)}}}function Je(l,e,n){let{game:t}=e,{onSelectCell:r}=e;const o=i=>{for(const a of[t.player1,t.player2]){const{selectedPiece:u}=a;if((u==null?void 0:u.from)==="board"&&u.position.x===i.x&&u.position.y===i.y)return!0}return!1},s=(i,a)=>r({x:i,y:a});return l.$$set=i=>{"game"in i&&n(0,t=i.game),"onSelectCell"in i&&n(1,r=i.onSelectCell)},[t,r,o,s]}class Le extends J{constructor(e){super(),L(this,e,Je,je,V,{game:0,onSelectCell:1})}}function de(l,e,n){const t=l.slice();return t[3]=e[n],t}function _e(l){let e,n=l[3]+"",t,r;return{c(){e=w("option"),t=A(n),r=E(),this.h()},l(o){e=S(o,"OPTION",{});var s=P(e);t=M(s,n),r=$(s),s.forEach(m),this.h()},h(){e.__value=l[3],e.value=e.__value},m(o,s){k(o,e,s),y(e,t),y(e,r)},p:C,d(o){o&&m(e)}}}function ze(l){let e,n,t=l[0].player2Auto?"Human player 2":"Computer player 2",r,o,s,i,a,u=Object.keys(Z),d=[];for(let c=0;c<u.length;c+=1)d[c]=_e(de(l,u,c));return{c(){e=w("div"),n=w("button"),r=A(t),o=E(),s=w("select");for(let c=0;c<d.length;c+=1)d[c].c();this.h()},l(c){e=S(c,"DIV",{});var p=P(e);n=S(p,"BUTTON",{});var f=P(n);r=M(f,t),f.forEach(m),o=$(p),s=S(p,"SELECT",{});var h=P(s);for(let _=0;_<d.length;_+=1)d[_].l(h);h.forEach(m),p.forEach(m),this.h()},h(){l[0].player2Strat===void 0&&Ge(()=>l[2].call(s))},m(c,p){k(c,e,p),y(e,n),y(n,r),y(e,o),y(e,s);for(let f=0;f<d.length;f+=1)d[f].m(s,null);ne(s,l[0].player2Strat),i||(a=[F(n,"click",l[1]),F(s,"change",l[2])],i=!0)},p(c,[p]){if(p&1&&t!==(t=c[0].player2Auto?"Human player 2":"Computer player 2")&&K(r,t),p&0){u=Object.keys(Z);let f;for(f=0;f<u.length;f+=1){const h=de(c,u,f);d[f]?d[f].p(h,p):(d[f]=_e(h),d[f].c(),d[f].m(s,null))}for(;f<d.length;f+=1)d[f].d(1);d.length=u.length}p&1&&ne(s,c[0].player2Strat)},i:C,o:C,d(c){c&&m(e),q(d,c),i=!1,ke(a)}}}function Xe(l,e,n){let t;we(l,Q,s=>n(0,t=s));const r=()=>Te(Q,t.player2Auto=!t.player2Auto,t);function o(){t.player2Strat=Be(this),Q.set(t)}return[t,r,o]}class qe extends J{constructor(e){super(),L(this,e,Xe,ze,V,{})}}function pe(l,e,n){const t=l.slice();return t[8]=e[n],t[10]=n,t}function he(l){let e,n,t,r,o,s,i,a,u,d;return{c(){e=w("button"),n=A("Random"),t=E(),r=w("button"),o=A("Win or random"),s=E(),i=w("button"),a=A("Euristic")},l(c){e=S(c,"BUTTON",{});var p=P(e);n=M(p,"Random"),p.forEach(m),t=$(c),r=S(c,"BUTTON",{});var f=P(r);o=M(f,"Win or random"),f.forEach(m),s=$(c),i=S(c,"BUTTON",{});var h=P(i);a=M(h,"Euristic"),h.forEach(m)},m(c,p){k(c,e,p),y(e,n),k(c,t,p),k(c,r,p),y(r,o),k(c,s,p),k(c,i,p),y(i,a),u||(d=[F(e,"click",l[4]),F(r,"click",l[5]),F(i,"click",l[6])],u=!0)},p:C,d(c){c&&m(e),c&&m(t),c&&m(r),c&&m(s),c&&m(i),u=!1,ke(d)}}}function me(l){var r;let e,n;function t(){return l[7](l[10])}return e=new Me({props:{disabled:l[1]||l[0].unselectableIndexes.has(l[10]),pieces:[l[8]],selected:((r=l[0].selectedPiece)==null?void 0:r.from)==="hand"&&l[0].selectedPiece.index===l[10]}}),e.$on("click",t),{c(){G(e.$$.fragment)},l(o){T(e.$$.fragment,o)},m(o,s){B(e,o,s),n=!0},p(o,s){var a;l=o;const i={};s&3&&(i.disabled=l[1]||l[0].unselectableIndexes.has(l[10])),s&1&&(i.pieces=[l[8]]),s&1&&(i.selected=((a=l[0].selectedPiece)==null?void 0:a.from)==="hand"&&l[0].selectedPiece.index===l[10]),e.$set(i)},i(o){n||(v(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){O(e,o)}}}function Ke(l){let e,n,t=l[0].player+"",r,o,s,i,a,u=!l[1]&&he(l),d=l[0].pieces,c=[];for(let f=0;f<d.length;f+=1)c[f]=me(pe(l,d,f));const p=f=>g(c[f],1,1,()=>{c[f]=null});return{c(){e=w("span"),n=A("Player "),r=A(t),o=E(),u&&u.c(),s=E(),i=w("div");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=S(f,"SPAN",{});var h=P(e);n=M(h,"Player "),r=M(h,t),h.forEach(m),o=$(f),u&&u.l(f),s=$(f),i=S(f,"DIV",{class:!0});var _=P(i);for(let b=0;b<c.length;b+=1)c[b].l(_);_.forEach(m),this.h()},h(){W(i,"class","overlay svelte-rwgxl1")},m(f,h){k(f,e,h),y(e,n),y(e,r),k(f,o,h),u&&u.m(f,h),k(f,s,h),k(f,i,h);for(let _=0;_<c.length;_+=1)c[_].m(i,null);a=!0},p(f,[h]){if((!a||h&1)&&t!==(t=f[0].player+"")&&K(r,t),f[1]?u&&(u.d(1),u=null):u?u.p(f,h):(u=he(f),u.c(),u.m(s.parentNode,s)),h&7){d=f[0].pieces;let _;for(_=0;_<d.length;_+=1){const b=pe(f,d,_);c[_]?(c[_].p(b,h),v(c[_],1)):(c[_]=me(b),c[_].c(),v(c[_],1),c[_].m(i,null))}for(R(),_=d.length;_<c.length;_+=1)p(_);U()}},i(f){if(!a){for(let h=0;h<d.length;h+=1)v(c[h]);a=!0}},o(f){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)g(c[h]);a=!1},d(f){f&&m(e),f&&m(o),u&&u.d(f),f&&m(s),f&&m(i),q(c,f)}}}function Qe(l,e,n){let{hand:t}=e,{disabled:r}=e,{onSelectPiece:o}=e,{onSelectAuto:s}=e;const i=()=>s(t,"random"),a=()=>s(t,"win_or_random"),u=()=>s(t,"euristic"),d=c=>o(t,c);return l.$$set=c=>{"hand"in c&&n(0,t=c.hand),"disabled"in c&&n(1,r=c.disabled),"onSelectPiece"in c&&n(2,o=c.onSelectPiece),"onSelectAuto"in c&&n(3,s=c.onSelectAuto)},[t,r,o,s,i,a,u,d]}class Y extends J{constructor(e){super(),L(this,e,Qe,Ke,V,{hand:0,disabled:1,onSelectPiece:2,onSelectAuto:3})}}function ye(l){let e,n;return e=new Le({props:{onSelectCell:l[1],game:l[0]}}),{c(){G(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.game=t[0]),e.$set(o)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function be(l){let e,n,t,r,o,s,i=l[0].state.player+"",a,u,d,c,p,f;return{c(){e=w("div"),n=w("span"),t=A("Game over!"),r=E(),o=w("span"),s=A("Winner: Player "),a=A(i),u=E(),d=w("button"),c=A("Play again")},l(h){e=S(h,"DIV",{});var _=P(e);n=S(_,"SPAN",{});var b=P(n);t=M(b,"Game over!"),b.forEach(m),r=$(_),o=S(_,"SPAN",{});var D=P(o);s=M(D,"Winner: Player "),a=M(D,i),D.forEach(m),u=$(_),d=S(_,"BUTTON",{});var le=P(d);c=M(le,"Play again"),le.forEach(m),_.forEach(m)},m(h,_){k(h,e,_),y(e,n),y(n,t),y(e,r),y(e,o),y(o,s),y(o,a),y(e,u),y(e,d),y(d,c),p||(f=F(d,"click",l[4]),p=!0)},p(h,_){_&1&&i!==(i=h[0].state.player+"")&&K(a,i)},d(h){h&&m(e),p=!1,f()}}}function Ye(l){let e=l[0],n,t,r=ve(l);return{c(){r.c(),n=j()},l(o){r.l(o),n=j()},m(o,s){r.m(o,s),k(o,n,s),t=!0},p(o,s){s&1&&V(e,e=o[0])?(R(),g(r,1,1,C),U(),r=ve(o),r.c(),v(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(v(r),t=!0)},o(o){g(r),t=!1},d(o){o&&m(n),r.d(o)}}}function Ze(l){let e=l[0],n,t,r=ge(l);return{c(){r.c(),n=j()},l(o){r.l(o),n=j()},m(o,s){r.m(o,s),k(o,n,s),t=!0},p(o,s){s&1&&V(e,e=o[0])?(R(),g(r,1,1,C),U(),r=ge(o),r.c(),v(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(v(r),t=!0)},o(o){g(r),t=!1},d(o){o&&m(n),r.d(o)}}}function ve(l){let e,n,t,r;return e=new Y({props:{onSelectAuto:l[3],onSelectPiece:l[2],hand:l[0].player2,disabled:!1}}),t=new Y({props:{onSelectAuto:l[3],onSelectPiece:l[2],hand:l[0].player1,disabled:!0}}),{c(){G(e.$$.fragment),n=E(),G(t.$$.fragment)},l(o){T(e.$$.fragment,o),n=$(o),T(t.$$.fragment,o)},m(o,s){B(e,o,s),k(o,n,s),B(t,o,s),r=!0},p(o,s){const i={};s&1&&(i.hand=o[0].player2),e.$set(i);const a={};s&1&&(a.hand=o[0].player1),t.$set(a)},i(o){r||(v(e.$$.fragment,o),v(t.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),r=!1},d(o){O(e,o),o&&m(n),O(t,o)}}}function ge(l){let e,n,t,r;return e=new Y({props:{onSelectAuto:l[3],onSelectPiece:l[2],hand:l[0].player1,disabled:!1}}),t=new Y({props:{onSelectAuto:l[3],onSelectPiece:l[2],hand:l[0].player2,disabled:!0}}),{c(){G(e.$$.fragment),n=E(),G(t.$$.fragment)},l(o){T(e.$$.fragment,o),n=$(o),T(t.$$.fragment,o)},m(o,s){B(e,o,s),k(o,n,s),B(t,o,s),r=!0},p(o,s){const i={};s&1&&(i.hand=o[0].player1),e.$set(i);const a={};s&1&&(a.hand=o[0].player2),t.$set(a)},i(o){r||(v(e.$$.fragment,o),v(t.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),r=!1},d(o){O(e,o),o&&m(n),O(t,o)}}}function xe(l){let e,n,t,r=l[0],o,s,i,a,u;n=new qe({});let d=ye(l),c=l[0].state.action==="winner"&&be(l);const p=[Ze,Ye],f=[];function h(_,b){return _[0].state.player===1?0:1}return i=h(l),a=f[i]=p[i](l),{c(){e=w("div"),G(n.$$.fragment),t=E(),d.c(),o=E(),c&&c.c(),s=E(),a.c(),this.h()},l(_){e=S(_,"DIV",{class:!0});var b=P(e);T(n.$$.fragment,b),t=$(b),d.l(b),o=$(b),c&&c.l(b),s=$(b),a.l(b),b.forEach(m),this.h()},h(){W(e,"class","d-flex justify-content-center")},m(_,b){k(_,e,b),B(n,e,null),y(e,t),d.m(e,null),y(e,o),c&&c.m(e,null),y(e,s),f[i].m(e,null),u=!0},p(_,[b]){b&1&&V(r,r=_[0])?(R(),g(d,1,1,C),U(),d=ye(_),d.c(),v(d,1),d.m(e,o)):d.p(_,b),_[0].state.action==="winner"?c?c.p(_,b):(c=be(_),c.c(),c.m(e,s)):c&&(c.d(1),c=null);let D=i;i=h(_),i===D?f[i].p(_,b):(R(),g(f[D],1,1,()=>{f[D]=null}),U(),a=f[i],a?a.p(_,b):(a=f[i]=p[i](_),a.c()),v(a,1),a.m(e,null))},i(_){u||(v(n.$$.fragment,_),v(d),v(a),u=!0)},o(_){g(n.$$.fragment,_),g(d),g(a),u=!1},d(_){_&&m(e),O(n),d.d(_),c&&c.d(),f[i].d()}}}function et(l,e,n){let t;we(l,Q,d=>n(5,t=d));let r=oe();const o=()=>{if(["winner","select2"].includes(r.state.action)||r.state.player!==r.player2.player||!t.player2Auto)return;const d=Z[t.player2Strat];d(r,r.player2)};return[r,({x:d,y:c})=>{try{if(r.state.action==="select2"){Ie(r,{x:d,y:c})===0&&o(),n(0,r);return}const p=r.state.player===1?r.player1:r.player2;$e(r,p,{x:d,y:c}),n(0,r),n(0,r)}catch(p){console.error("Could not select cell"),console.error(p),console.error("Game should be able to keep working")}},(d,c)=>{try{Ee(r,d,c)}catch(p){console.error("Could not select piece"),console.error(p),console.error("Game should be able to keep working")}n(0,r)},(d,c)=>{c==="random"&&te(r,d),c==="win_or_random"&&Ae(r,d),c==="euristic"&&Ne(r,d),o(),n(0,r)},()=>n(0,r=oe())]}class tt extends J{constructor(e){super(),L(this,e,et,xe,V,{})}}function lt(l){let e,n;return e=new tt({}),{c(){G(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),n=!0},p:C,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}class ot extends J{constructor(e){super(),L(this,e,null,lt,V,{})}}export{ot as default};
